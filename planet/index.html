<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="http://ocaml.org/img/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
    <li><a href="http://gitorious.org/search?page=1&q=ocaml">Gitorious</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings/">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://feeds.feedburner.com/amirmc-ocaml">Amir Chaudhry</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://cufp.org/rss/news">CUFP</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss2">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://blog.bentobako.org/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://jobs.github.com/positions.atom?description=ocaml&location=">Github OCaml jobs</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocaml-book.com/blog?format=rss">OCaml Book</a></li><li><a href="http://ocamllabs.github.com/compiler-hacking/rss.xml">OCaml Labs compiler hacking</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/feed/?amp;language=en&language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="376d2f9b8db4ac3c425e8645ae939756"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.11.12.html"> Caml Weekly News, 12 Nov 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">12 Nov 2013</span></span><span class="rss-description">Migration plan and bug hunt for ocaml.org - http://preview.ocaml.org / out-of-the-heap 'a arrays ? / final release of OPAM 1.1.0 / opam2debian v0.1.0: Create Debian package that contains a set of OPAM packages / Real World OCaml is finished / Real World OCaml now available online and print / exenum.0.6: exhaustive enumerations for datatypes / Other Caml News</span>
<a name="aca716d11cd2f36fb46eeb2d9752e9e1"></a><span class="rss-header"><span class="rss-title"><a href="http://rwmj.wordpress.com/2013/11/11/why-is-virt-builder-written-in-ocaml/"> Why is virt-builder written in OCaml?</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Richard Jones</span>, <span class="rss-date">11 Nov 2013</span></span><span class="rss-description"><div id="post1"><p><img src="http://libguestfs.org/virt-builder.svg" style="float: right;" width="250"/></p>
<p><a href="https://news.ycombinator.com/item?id=6709517">Docker is written in Go.</a>  <a href="http://libguestfs.org/virt-builder.1.html">virt-builder</a> is written in OCaml.  Why?  (Or as someone at work asked me — apparently seriously — why did you write it in a language which only you can use?)</p>
<p>Virt-builder is a fairly thin wrapper around <a href="http://libguestfs.org">libguestfs</a> and libguestfs has bindings for a dozen languages, and I’m pretty handy in most programming languages, so it could have been done in Python or C or even Go.  In this case there are reasons why OCaml is a much better choice:</p>
<a onclick="switchContent('post1','post2')" class="btn" href="#aca716d11cd2f36fb46eeb2d9752e9e1">Read more...</a></div><div id="post2" style="display: none"><p><img src="http://libguestfs.org/virt-builder.svg" style="float: right;" width="250"/></p>
<p><a href="https://news.ycombinator.com/item?id=6709517">Docker is written in Go.</a>  <a href="http://libguestfs.org/virt-builder.1.html">virt-builder</a> is written in OCaml.  Why?  (Or as someone at work asked me — apparently seriously — why did you write it in a language which only you can use?)</p>
<p>Virt-builder is a fairly thin wrapper around <a href="http://libguestfs.org">libguestfs</a> and libguestfs has bindings for a dozen languages, and I’m pretty handy in most programming languages, so it could have been done in Python or C or even Go.  In this case there are reasons why OCaml is a much better choice:</p>
<ul>
<li> It’s a language I’m familiar with and happy programming in.  Never underestimate how much that matters.
</li><li> OCaml is strongly typed, helping to eliminate many errors.  If it had been written in Python we’d be running into bugs at customer sites that could have been eliminated by the compiler before anything shipped.  That doesn’t mean virt-builder is bug free, but if the compiler can help to remove a bug, why not have the compiler do that?
</li><li> Virt-builder has to be fast, and OCaml is fast.  Python is fucking slow.
</li><li> I had some C code for doing <a href="http://git.annexia.org/?p=pxzcat.git;a=summary">parallel xzcat</a> and with OCaml I can just link the C code and the OCaml code together directly into a single native binary.  Literally you just mix C object files and OCaml object files together on the linker command line.  Doing this in, say, Perl/Python/Ruby would be far more hassle.  We would have ended up with either a slow interpreted implementation, or having to ship a separate .so file and have the virt-builder program find it and dynamically load it.  Ugh.
</li><li> There was a little bit of common code used by another utility called <a href="http://libguestfs.org/virt-sysprep.1.html">virt-sysprep</a> which started out as a shell script but is now also written in OCaml.  Virt-sysprep regularly gets outside contributions, despite being written in OCaml.  I could have written the small amount of common code in C to get around this, but every little helps.
</li></ul>
<p>Is OCaml a language that only I can understand?  Judge for yourself by <a href="https://github.com/libguestfs/libguestfs/blob/master/builder/builder.ml">looking at the source code</a>.  I think if you cannot understand that enough to at least make small changes, you should hand in your programmer’s card at the door.</p>
<p>Edit: <a href="https://news.ycombinator.com/item?id=6711893">Hacker News discussion of this article</a>.</p><br/>  <a href="http://feeds.wordpress.com/1.0/gocomments/rwmj.wordpress.com/4776/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/rwmj.wordpress.com/4776/" alt="" border="0"/></a> <img src="http://stats.wordpress.com/b.gif?host=rwmj.wordpress.com&amp;blog=6840703&amp;post=4776&amp;subd=rwmj&amp;ref=&amp;feed=1" alt="" height="1" border="0" width="1"/><a onclick="switchContent('post2','post1')" class="btn" href="#aca716d11cd2f36fb46eeb2d9752e9e1">Hide</a></div></span>
<a name="6669830c2e0c05e85b490aca7e1d38e0"></a><span class="rss-header"><span class="rss-title"><a href="https://ocaml.janestreet.com/?q=node/117"> The making of Real World OCaml</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Jane Street</span>, <span class="rss-date">11 Nov 2013</span></span><span class="rss-description"><div id="post3"><p><a href="http://amzn.to/1afkSIe">
<img src="https://realworldocaml.org/media/img/coversmall.png" align="left" width="150"/>
</a></p>

<p>It's taken a good long while, but Real World OCaml is finally done.
You can read it for free at
<a href="http://realworldocaml.org">http://realworldocaml.org</a>, or buy a
<a href="http://amzn.to/1afkSIe">hardcopy</a> or an
<a href="http://amzn.to/1gzzxTO">ebook</a> <a href="http://oreil.ly/S2Vtdh">version</a>.</p>

<p>The idea for the book was born in a bar in Tokyo in 2011.  After
talk-filled day at ICFP, a few of us, Ashish Agarwal and Marius
Eriksen, Anil, and myself, went out drinking.  We were all bellyaching
over the lack of a high-quality OCaml book in English, and, emboldened
by the Guinness and egged on by Ashish and Marius, Anil and I decided
that we were just going to have to go ahead and write the book
ourselves.  We brought Jason into the project soon after.</p>

<p>From the very beginning, Anil and I had different visions for the
book.  From my perspective, it was a simple proposition: there was no
good book available, and we were going to write one.  The goal was to
document the state of the art so as to make it more accessible.</p>

<p>Anil's vision was grander.  He argued that writing a book is an
opportunity to discover all of the things that are just too
embarrassing to explain.  And, once discovered, you needed to find a
way to get all of those things fixed before the book was published.</p>

<a onclick="switchContent('post3','post4')" class="btn" href="#6669830c2e0c05e85b490aca7e1d38e0">Read more...</a></div><div id="post4" style="display: none"><p><a href="http://amzn.to/1afkSIe">
<img src="https://realworldocaml.org/media/img/coversmall.png" align="left" width="150"/>
</a></p>

<p>It's taken a good long while, but Real World OCaml is finally done.
You can read it for free at
<a href="http://realworldocaml.org">http://realworldocaml.org</a>, or buy a
<a href="http://amzn.to/1afkSIe">hardcopy</a> or an
<a href="http://amzn.to/1gzzxTO">ebook</a> <a href="http://oreil.ly/S2Vtdh">version</a>.</p>

<p>The idea for the book was born in a bar in Tokyo in 2011.  After
talk-filled day at ICFP, a few of us, Ashish Agarwal and Marius
Eriksen, Anil, and myself, went out drinking.  We were all bellyaching
over the lack of a high-quality OCaml book in English, and, emboldened
by the Guinness and egged on by Ashish and Marius, Anil and I decided
that we were just going to have to go ahead and write the book
ourselves.  We brought Jason into the project soon after.</p>

<p>From the very beginning, Anil and I had different visions for the
book.  From my perspective, it was a simple proposition: there was no
good book available, and we were going to write one.  The goal was to
document the state of the art so as to make it more accessible.</p>

<p>Anil's vision was grander.  He argued that writing a book is an
opportunity to discover all of the things that are just too
embarrassing to explain.  And, once discovered, you needed to find a
way to get all of those things fixed before the book was published.</p>

<p>It was Anil's grander vision that we followed, and to good effect.
It's not that we fixed the problems ourselves.  We solved some
problems directly, but by and large, we ended up getting help from
those who were better positioned than us to fix the problems at hand.</p>

<p>Here are a few examples of pieces that came together over those two
years.</p>

<ul>
<li><em>OPAM.</em> The core work on OPAM was done by Thomas Gazagnaire at
OCamlPro (funded by Jane Street), with Anil collaborating closely.
This is probably the biggest improvement of the bunch.  It's hard to
overstate how transformational OPAM is.  Before OPAM, installing
OCaml libraries was a complex chore.  Now it's a joy.</li>
<li><em>The Core release process.</em> We decided early on to base the book on
Core, Jane Street's alternative to OCaml's standard library.  But
the release process around Core was too monolithic and too hard for
external collaborators.  We reorganized the process completely,
moving to weekly releases to github, with the repos broken out into
manageable components.  Most of this work was done by Jeremie Dimino
and Yury Sulsky at Jane Street.</li>
<li><em>Ctypes.</em> Anil was in charge of writing the section on C bindings,
and he decided that the standard way was just too painful to
explain.  That was the germ of ctypes, a library, written by Jeremy
Yallop, that lets you build C bindings entirely from within OCaml,
with a easy and simple interface.</li>
<li><em>Short paths.</em> One of the real pains associated with working with
Core is the heavy use that Core makes of the module system.  OCaml's
error messages, unfortunately, do not cope with this terribly well,
leading to absurd types in error messages, so you might see a type
rendered as <code>Core.Std.Int.Map.Key.t Core.Std.Option.Monad_infix</code>
where it could just as well have been rendered as <code>int option</code>.  We
worked with Jacques Garrigue to implement a better heuristic for
picking type names (suggested by Stephen Weeks, who implemented the
same heuristic for Mlton).  This is now available in the 4.01
version of the compiler, via the <code>-short-paths</code> patch.</li>
</ul>

<p>This period also saw the founding of OCaml Labs, a lab at Cambridge
University devoted to improving OCaml as a platform, with Anil at the
head.</p>

<p>And we're not done.  OCaml Labs and OCamlPro are still working on
improving OPAM and building out a curated OCaml Platform that's built
on top of OPAM.  There's ongoing work on improving documentation
generation so we can have better online API docs.  Jacques Garrigue
and Leo White are working on adding module aliases to OCaml which will
greatly improve compilation time for libraries like Core that need to
manage large namespaces.</p>

<p>And there are more projects that are improving OCaml and its
surrounding infrastructure that have no direct connection to Real
World OCaml, like:</p>

<ul>
<li>Frederic Bour and Thomas Refis' work on Merlin, a tool for providing
IDE-like tooling from within editors like VI and Emacs.</li>
<li>Mark Shinwell's work on improving GDB support for OCaml,</li>
<li>Fabrice le Fessant's work improving OCaml's interactions with
performance tools like perf. </li>
<li>Work that Ashish Agarwal, Christophe Troestler, Esther Baruk, and
now many others, have poured into improving the
<a href="http://ocaml.org">http://ocaml.org</a> website.</li>
</ul>

<p>Real World OCaml is of course a personal milestone for Jason, Anil and
myself (and for Leo White, Jeremy Yallop and Stephen Weeks, who made
some key contributions to the text).  But viewed from a broader
perspective, it's just one part of the increasing swirl of activity in
the OCaml community.</p>

<p>OCaml has been a great language for a very long time.  Now, we're
growing a social and technological infrastructure around it to match.</p><a onclick="switchContent('post4','post3')" class="btn" href="#6669830c2e0c05e85b490aca7e1d38e0">Hide</a></div></span>
<a name="270583dd49e7070c6e708ac7a28ba506"></a><span class="rss-header"><span class="rss-title"><a href="http://le-gall.net/sylvain+violaine/blog/index.php?post/2013/11/08/opam2debian%2C-a-tool-to-create-Debian-binary-package-out-of-OPAM"> opam2debian, a tool to create Debian binary package out of OPAM</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Sylvain Le Gall</span>, <span class="rss-date">10 Nov 2013</span></span><span class="rss-description"><div id="post5"><p>One week ago, <a href="http://lists.ocaml.org/pipermail/opam-devel/2013-October/000240.html">a thread in opam-devel mailing list</a> started about the possibility to create binary snapshot to distribute OPAM packages. Distributing binary packages with everything already compiled is pretty useful when you want to make sure that everyone has the same version of packages installed and you don't want to spend time configuring all the computer of your colleague.</p>


<p>As a matter of fact I was also interested to see that happening. I have several computers where I want to install a set of packages and I want to snapshot OPAM archives when I am ready for an upgrade. I have tested for a long time another source distribution: <a href="http://godi.camlcity.org">GODI</a>. I even wrote a <a href="https://plus.google.com/+SylvainLeGall/posts/ahELQPy98Zb">puppet module</a> to drive it. This was a fun experience, but as with any source only distribution, there are some drawbacks. Especially even if it is fully automated, you get a lot of errors and timeout when trying to build automatically from source.</p>


<p>This is how <a href="http://forge.ocamlcore.org/projects/opam2debian">opam2debian</a> has started. I wanted a replacement for puppet-godi that takes advantage of OPAM and the possibility to distribute my set of packages everywhere quickly.</p>


<p>The goals of this project are:</p>
<a onclick="switchContent('post5','post6')" class="btn" href="#270583dd49e7070c6e708ac7a28ba506">Read more...</a></div><div id="post6" style="display: none"><p>One week ago, <a href="http://lists.ocaml.org/pipermail/opam-devel/2013-October/000240.html">a thread in opam-devel mailing list</a> started about the possibility to create binary snapshot to distribute OPAM packages. Distributing binary packages with everything already compiled is pretty useful when you want to make sure that everyone has the same version of packages installed and you don't want to spend time configuring all the computer of your colleague.</p>


<p>As a matter of fact I was also interested to see that happening. I have several computers where I want to install a set of packages and I want to snapshot OPAM archives when I am ready for an upgrade. I have tested for a long time another source distribution: <a href="http://godi.camlcity.org">GODI</a>. I even wrote a <a href="https://plus.google.com/+SylvainLeGall/posts/ahELQPy98Zb">puppet module</a> to drive it. This was a fun experience, but as with any source only distribution, there are some drawbacks. Especially even if it is fully automated, you get a lot of errors and timeout when trying to build automatically from source.</p>


<p>This is how <a href="http://forge.ocamlcore.org/projects/opam2debian">opam2debian</a> has started. I wanted a replacement for puppet-godi that takes advantage of OPAM and the possibility to distribute my set of packages everywhere quickly.</p>


<p>The goals of this project are:</p>
<ol>
<li>generate a Debian binary package with all the dependencies set on external packages (like libpcre)</li>
<li>use OPAM to build everything</li>
<li>use standard Debian process to build package</li>
<li>create snapshot of OPAM repository that allow to rebuild exactly the same thing on different arches</li>
</ol>

<p>The real challenge behind opam2debian was to be able to use standard Debian process to create package to get all the power of dependencies computation provided by the Debian maintainer scripts. My great achievement on this topic was to find a tool called <a href="http://proot.me/">proot</a> that allows you to bind mount a directory as a user. This is an achievement because it allows to create a package using a directory where you are not allowed to write (i.e. <em>/opt/opam2debian</em> directory which is owned by root). This is a way to do it on any Jenkins builder without root access and a standard way for Debian to build packages.</p>


<h3>Usage example</h3>


<p>I need to compile a set of package to install on all my Jenkins builder. Here is the list of packages I need and I also want to use the latest OCaml version. I want to build a Debian package for Debian Wheezy which has only OCaml 3.12.1.</p>


<p>Building the package:</p>

<pre>$ opam2debian create --build --name opam2debian-test2 --compiler 4.01.0 \
 ocamlfind fileutils ocaml-data-notation ocaml-expect ounit \
 ocamlmod ocamlify oasis yojson sexplib extlib pcre-ocaml \
 calendar ocaml-inifiles ocamlnet ocurl gettext inotify ocaml-sqlexpr \
 ocamlrss ocaml-xdg-basedir</pre>


<p>Getting the package list right can be tricky because the process will stop at the first error -- and if it is because the last package fails to build it can be long. I have implemented a --keep-build-dir in case you want to tune the package list live.</p>


<p>The program will build everything and it can takes quite a while. At the end you get a file <em>opam2debian-test2_20131105_amd64.deb</em> which has a reasonable size of 232MB. That is big, but it looks like the biggest directory is <em>$OPAMROOT/4.01.0/build</em>, I am not sure if I can remove it but we may save some space here (the build directory represents 50% of the package size).</p>


<p>Then you can just do a standard Debian installation:</p>


<pre>$ sudo dpkg -i opam2debian-test2_20131105_amd64.deb</pre>


<p>And you can use it:</p>


<pre>$ eval $(opam config env --root /opt/opam2debian/opam2debian-test2/)
$ which ocamlfind
 /opt/opam2debian/opam2debian-test2/4.01.0/bin/ocamlfind
$ ocamlfind list
 [...]
 stdlib              (version: [distributed with Ocaml])
 str                 (version: [distributed with Ocaml])
 threads             (version: [distributed with Ocaml])
 threads.posix       (version: [internal])
 threads.vm          (version: [internal])
 type_conv           (version: 109.41.00)
 unidiff             (version: 0.0.2)
 unix                (version: [distributed with Ocaml])
 userconf            (version: 0.3.1)
 xdg-basedir         (version: 0.0.3)
 xmlm                (version: 1.1.1)
 yojson              (version: 1.1.5)</pre>


<p>A nice thing to note, is that it is a standard OPAM install. You can install, update and upgrade OPAM from there, as root. However, I would recommend not to do it, and just rebuild a newer Debian package to upgrade.</p>


<h3>Install</h3>


<p>You will need the <a href="http://packages.debian.org/sid/opam">opam</a> and <a href="http://packages.debian.org/sid/proot">proot</a> Debian package available in Debian jessie and sid. You will also need various OCaml libraries (cmdliner, calendar, fileutils and jingoo).</p>


<p>Download the opam2debian tarball on the <a href="https://forge.ocamlcore.org/frs/?group_id=348">forge</a>, build  and install it.</p>


<p>The project is hosted on <a href="https://github.com/gildor478/opam2debian">github</a>.</p>


<h3>Open issues</h3>


<p>On the initial list of goals of the project. Not everything is completed. I have still several open issues.</p>


<p>In particular 4. (create snapshot of OPAM repository) was blocked by a bug in opam-mk-repo, that prevents snapshots (see <a href="https://github.com/ocaml/opam/pull/977">my pull-request to solve it</a>).</p>


<p>Another issues is about licenses of the included files. I should list them all and I need to figure out a way to extract every licences.</p>


<p>Submit bugs directly to <a href="https://github.com/gildor478/opam2debian/issues">github</a>.</p><a onclick="switchContent('post6','post5')" class="btn" href="#270583dd49e7070c6e708ac7a28ba506">Hide</a></div></span>
<a name="9fc76b93fd89f2e19976096b468d4495"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/overriding-submodules"> Overriding submodules</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">09 Nov 2013</span></span><span class="rss-description"><div id="post7"><p>A few days ago Jacques-Pascal Deplaix came to ask me this question: when using the <code>include</code> trick to override some definition in a module, how can we also override some definition in a submodule? The answer is short -- just scroll to the last code block -- and may be of interest to some readers.</p>




<h3 id="module-overriding">Module overriding</h3>
<p>The proposed use-case is the following: you want to write code that looks like it uses the module <code>List</code> from the standard library, but in fact the functions <code>hd</code> and <code>tl</code> are the variants that return <code>option</code> values, because you like that style better than catching exceptions.</p>
<p>There is a rather well-known trick to do that, which is to prepend the following code at the beginning of your source, or in a separate <code>My_std</code> module you always open first.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> List = <span class="kw">struct</span>
  <span class="ot">include</span> List
  <span class="kw">let</span> hd = <span class="kw">function</span>
    | [] -&gt; <span class="dt">None</span>
    | x::_ -&gt; <span class="dt">Some</span> x
<span class="kw">end</span></code></pre>
<p>However, you may run into problem if the definition you want to override is not directly in the module, but some of its submodule. Let's consider the following code:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> Toto = <span class="kw">struct</span>
    <span class="kw">let</span> x = 1
    <span class="ot">module</span> Tata = <span class="kw">struct</span>
      <span class="kw">let</span> y = 2
    <span class="kw">end</span>
    <span class="ot">module</span> Titi = <span class="kw">struct</span>
      <span class="kw">let</span> z = 3
    <span class="kw">end</span>
<span class="kw">end</span></code></pre>
<a onclick="switchContent('post7','post8')" class="btn" href="#9fc76b93fd89f2e19976096b468d4495">Read more...</a></div><div id="post8" style="display: none"><p>A few days ago Jacques-Pascal Deplaix came to ask me this question: when using the <code>include</code> trick to override some definition in a module, how can we also override some definition in a submodule? The answer is short -- just scroll to the last code block -- and may be of interest to some readers.</p>




<h3 id="module-overriding">Module overriding</h3>
<p>The proposed use-case is the following: you want to write code that looks like it uses the module <code>List</code> from the standard library, but in fact the functions <code>hd</code> and <code>tl</code> are the variants that return <code>option</code> values, because you like that style better than catching exceptions.</p>
<p>There is a rather well-known trick to do that, which is to prepend the following code at the beginning of your source, or in a separate <code>My_std</code> module you always open first.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> List = <span class="kw">struct</span>
  <span class="ot">include</span> List
  <span class="kw">let</span> hd = <span class="kw">function</span>
    | [] -&gt; <span class="dt">None</span>
    | x::_ -&gt; <span class="dt">Some</span> x
<span class="kw">end</span></code></pre>
<p>However, you may run into problem if the definition you want to override is not directly in the module, but some of its submodule. Let's consider the following code:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> Toto = <span class="kw">struct</span>
    <span class="kw">let</span> x = 1
    <span class="ot">module</span> Tata = <span class="kw">struct</span>
      <span class="kw">let</span> y = 2
    <span class="kw">end</span>
    <span class="ot">module</span> Titi = <span class="kw">struct</span>
      <span class="kw">let</span> z = 3
    <span class="kw">end</span>
<span class="kw">end</span></code></pre>
<p>Suppose I want to replace <code>Toto.Tata.y</code> to be of type <code>string</code> rather than <code>int</code>. The obvious thing doesn't work.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> Totoverride = <span class="kw">struct</span>
  <span class="ot">include</span> Toto
  <span class="ot">module</span> Tata = <span class="kw">struct</span>
    <span class="ot">include</span> Toto<span class="kw">.</span>Tata
    <span class="kw">let</span> y = <span class="st">"2"</span>
  <span class="kw">end</span>
<span class="kw">end</span></code></pre>
<pre><code>Error: Multiple definition of the module name Tata.
       Names must be unique in a given structure or signature.</code></pre>
<p>The problem is that, while OCaml will let you shadow an existing <code>let</code> declaration, it does not accept declaring other sorts of declarations (types, modules, module types...) twice in the same module. Here a <code>Tata</code> submodule is created in <code>Totoverride</code> first at the <code>include Toto</code> point, and then for a second time explicitly.</p>
<p>One manual solution is to use a signature ascription to remove the <code>Tata</code> submodule from <code>Toto</code> at include time.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> Totoverride = <span class="kw">struct</span>
  <span class="ot">include</span> (<span class="dt">Toto</span> : <span class="kw">sig</span>
             <span class="kw">val</span> x : <span class="dt">int</span>
             <span class="ot">module</span> Titi : (<span class="kw">sig</span> <span class="kw">val</span> z : <span class="dt">int</span> <span class="kw">end</span>) 
           <span class="kw">end</span>)
  <span class="ot">module</span> Tata = <span class="kw">struct</span>
    <span class="ot">include</span> Toto<span class="kw">.</span>Tata
    <span class="kw">let</span> y = <span class="st">"2"</span>
  <span class="kw">end</span>
<span class="kw">end</span></code></pre>
<p>The problem with this solution is that you have to repeat most <code>Toto</code>'s signature, which leads to a painful maintenance burden. Not only will changes in <code>Toto</code>'s definition (addition of new fields) require changes in this place, but the compiler will not tell you when such changes happen, <code>Totoverride</code> will just be incomplete with respect to <code>Toto</code>.</p>
<h3 id="module-type-of-and-destructive-substitution"><code>module type of</code> and Destructive substitution</h3>
<p>Destructive substitution (<code>with .. := ...</code>) is a newish feature of the OCaml language, as it was added in 3.12 -- released in summer 2010. The <a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/extn.html#sec234">documentation in the manual</a> is extremely clear and provides good examples, so if you don't know about it you should just go read it now.</p>
<p><a href="http://caml.inria.fr/pub/docs/manual-ocaml-4.01/extn.html#sec233"><code>module type of</code></a> was also added in 3.12, and lets you speak about the interface of a module without defining it explicitly: <code>module type of Foo</code> is an interface that <code>Foo</code> satisfies.</p>
<p>There are subtleties about the semantics of both these constructions, so you should not abuse them unless you want to read papers about module systems -- you probably don't -- to understand why your code doesn't type-check. However, they can be combined in a perfectly reasonable way to remove some type or submodules of a module at inclusion time: <code>module type of Foo with type t := Foo.t</code> is the signature of <code>Foo</code>, minus the type <code>t</code>, and the same thing works for <code>with module</code>. This lets us solve our module overriding problem:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="ot">module</span> Totoverride = <span class="kw">struct</span>
  <span class="ot">include</span> (<span class="dt">Toto</span> : <span class="ot">module</span> <span class="kw">type</span> <span class="kw">of</span> <span class="dt">Toto</span> <span class="kw">with</span> <span class="ot">module</span> Tata := Toto<span class="kw">.</span><span class="dt">Tata</span>)
  <span class="ot">module</span> Tata = <span class="kw">struct</span>
    <span class="ot">include</span> Toto<span class="kw">.</span>Tata
    <span class="kw">let</span> y = <span class="st">"2"</span>
  <span class="kw">end</span>
<span class="kw">end</span></code></pre>
<h3 id="completeness-is-always-hard">Completeness is always hard</h3>
<p>This is a neat trick to have in your toolbox, but you should know that it may not satisfy all your module overriding drives. You can remove type and module from a signature, but there are a lot of other OCaml signature items that don't have a corresponding destructive subtitution: module types, classes, class types and exceptions.</p>
<p>The problem is that it's not always clear what the intended semantics of destructive substitution should be. For example, I'm not really sure what destructive substitution of exception declarations would mean -- exceptions are a kind of blind spot as they don't appear in types. But in any case, if you try to override everything, you'll run into this incompleteness and go add your lament to <a href="http://caml.inria.fr/mantis/view.php?id=5460">the feature request PR#5460</a>, "Replace/rename/remove module types".</p>
<p>To be honest, the signature language grows pieces by pieces as needs are justified (and semantics are understood), so it's not particularly surprising that it is not complete. There was a notable attempt by Norman Ramsey in 2001 to think about what a more self-sufficient signature languages should be, <a href="http://www.cs.tufts.edu/~nr/pubs/sigcalc.ps">Towards a Calculus of Signatures</a> -- with, I just found out, a draft implementation by <a href="http://www.pfitzenmaier.de/sigcalc.html">Jürgen Pfitzenmaier</a>). The good news is that probably the most important construct (destructive substitution of types) has been integrated since, but otherwise things are going at their own pace.</p><a onclick="switchContent('post8','post7')" class="btn" href="#9fc76b93fd89f2e19976096b468d4495">Hide</a></div></span>
<a name="a71b4294da2067aa511bdbf21edf6438"></a><span class="rss-header"><span class="rss-title"><a href="http://amirchaudhry.com/migration-plan-ocaml-org"> Migration plan for the OCaml.org redesign</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Amir Chaudhry</span>, <span class="rss-date">06 Nov 2013</span></span><span class="rss-description"><div id="post9"><p>We’re close to releasing the new design of ocaml.org but need help from the OCaml community to identify and fix bugs before we switch next week.</p>

<p>Ashish, Christophe, Philippe and I have been discussing how we should go about this and below is the plan for migration. If anyone would like to discuss any of this, then the <a href="http://lists.ocaml.org/listinfo/infrastructure">infrastructure list</a> is the best place to do so.</p>

<ol>
<li>
<p>We’ve made a <strong><a href="https://github.com/ocaml/ocaml.org/tree/redesign">new branch</a></strong> on the main ocaml.org repository with the redesign. This branch is a fork of the master and we’ve simply cleaned up and replayed our git commits there.</p>
</li>

<li>
<p>We’ve built a live version of the new site, which is visible at <strong><a href="http://preview.ocaml.org">http://preview.ocaml.org</a></strong> - this is rebuilt every few minutes from the branch mentioned above.</p>
</li>

<li>
<p>Over the course of one week, we ask the community to review the new site and <strong><a href="https://github.com/ocaml/ocaml.org/issues">report any bugs or problems</a></strong> on the issue tracker. We <em>triage</em> those bugs to identify any blockers and work on those first. This is the phase we’ll be in from <em>today</em>.</p>
</li>

<li>
<p>After one week (7 days), and after blocking bugs have been fixed, we <strong>merge the redesign branch</strong> into the master branch. This would effectively present the new site to the world.</p>
</li>
</ol>

<a onclick="switchContent('post9','post10')" class="btn" href="#a71b4294da2067aa511bdbf21edf6438">Read more...</a></div><div id="post10" style="display: none"><p>We’re close to releasing the new design of ocaml.org but need help from the OCaml community to identify and fix bugs before we switch next week.</p>

<p>Ashish, Christophe, Philippe and I have been discussing how we should go about this and below is the plan for migration. If anyone would like to discuss any of this, then the <a href="http://lists.ocaml.org/listinfo/infrastructure">infrastructure list</a> is the best place to do so.</p>

<ol>
<li>
<p>We’ve made a <strong><a href="https://github.com/ocaml/ocaml.org/tree/redesign">new branch</a></strong> on the main ocaml.org repository with the redesign. This branch is a fork of the master and we’ve simply cleaned up and replayed our git commits there.</p>
</li>

<li>
<p>We’ve built a live version of the new site, which is visible at <strong><a href="http://preview.ocaml.org">http://preview.ocaml.org</a></strong> - this is rebuilt every few minutes from the branch mentioned above.</p>
</li>

<li>
<p>Over the course of one week, we ask the community to review the new site and <strong><a href="https://github.com/ocaml/ocaml.org/issues">report any bugs or problems</a></strong> on the issue tracker. We <em>triage</em> those bugs to identify any blockers and work on those first. This is the phase we’ll be in from <em>today</em>.</p>
</li>

<li>
<p>After one week (7 days), and after blocking bugs have been fixed, we <strong>merge the redesign branch</strong> into the master branch. This would effectively present the new site to the world.</p>
</li>
</ol>

<p>During the above, we would not be able to accept any new pull requests on the master branch but would be happy to accept them on the new, redesign branch. Hence, restricting the time frame to one week.</p>

<p>Please note that the above is only intended to merge the <em>design</em> and <em>toolchain</em> for the new site. Specifically, we’ve created new landing pages, have new style sheets and have restructured the site’s contents as well as made some new libraries (<a href="http://pw374.github.io/posts/2013-09-05-22-31-26-about-omd.html">OMD</a> and <a href="http://pw374.github.io/posts/2013-10-03-20-39-07-OPAMaging-MPP.html">MPP</a>). The new toolchain means people can write files in markdown, which makes contributing content a lot easier.</p>

<p>Since the files are on GitHub, people don’t even need to clone the site locally to make simple edits (or even add new pages). Just click the ‘Edit this page’ link in the footer to be taken to the right file in the repository and GitHub’s editing and pull request features will allow you to make changes and submit updates, all from within your browser (see the <a href="https://help.github.com/articles/creating-and-editing-files-in-your-repository">GitHub Article</a> for details).</p>

<p>There is still work to be done on adding new features but the above changes are already a great improvement to the site and are ready to be reviewed by the OCaml community and merged.</p><a onclick="switchContent('post10','post9')" class="btn" href="#a71b4294da2067aa511bdbf21edf6438">Hide</a></div></span>
<a name="e5900cb0c3951424fc6f50fff64ca80d"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.11.05.html"> Caml Weekly News, 05 Nov 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">05 Nov 2013</span></span><span class="rss-description">Robust left to right flow for record disambiguation / random-generator 0.1 / A useful Makefile collection for OCaml projects / ODT 3.0 released / LLVM OCaml bindings / Other Caml News</span>
<a name="737918f3f7de75aff5c248083da4fc44"></a><span class="rss-header"><span class="rss-title"><a href="http://ocaml-book.com/blog/2013/10/25/every-thing-i-did-to-publish-ocaml-from-the-very-beginning"> Everything I did to self-publish a textbook about OCaml (except for the writing part)</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCaml Book</span>, <span class="rss-date">04 Nov 2013</span></span><span class="rss-description"><div id="post11"><p>Lots of what is written about the self-publishing of technical books comes from people who have a huge mailing list from blogging, or who are writing about a terribly fashionable subject and can create buzz (not that there's anything wrong with that).</p><p>Here is a description of the self-publishing of a rather traditional book, with no particular marketing involved. </p><h2>The book</h2><p>I wanted to write an introductory book about programming in OCaml (which I use for work) since I felt one was lacking, and decided to do the publishing myself. I had previously published <a href="http://shop.oreilly.com/product/0636920021483.do">PDF Explained</a> with O'Reilly. I was happy with O'Reilly, but not with the DocBook typesetting system, nor with the money. I couldn't justify taking time off to write another book if the money wasn't there.</p><p>The result is <a href="http://www.ocaml-book.com/">OCaml from the Very Beginning</a>. </p><h2>How many copies do books about programming sell? </h2><p>The <a href="http://www.novelrank.com">NovelRank</a> website tracks Amazon ranks and deduces rough sales numbers from them. One needs to extrapolate for non-Amazon sales, of course. For scale, here are the sales of some popular (and not so popular) programming books in paper form on Amazon worldwide for the month of October 2013, according to NovelRank. </p><a onclick="switchContent('post11','post12')" class="btn" href="#737918f3f7de75aff5c248083da4fc44">Read more...</a></div><div id="post12" style="display: none"><p>Lots of what is written about the self-publishing of technical books comes from people who have a huge mailing list from blogging, or who are writing about a terribly fashionable subject and can create buzz (not that there's anything wrong with that).</p><p>Here is a description of the self-publishing of a rather traditional book, with no particular marketing involved. </p><h2>The book</h2><p>I wanted to write an introductory book about programming in OCaml (which I use for work) since I felt one was lacking, and decided to do the publishing myself. I had previously published <a href="http://shop.oreilly.com/product/0636920021483.do">PDF Explained</a> with O'Reilly. I was happy with O'Reilly, but not with the DocBook typesetting system, nor with the money. I couldn't justify taking time off to write another book if the money wasn't there.</p><p>The result is <a href="http://www.ocaml-book.com/">OCaml from the Very Beginning</a>. </p><h2>How many copies do books about programming sell? </h2><p>The <a href="http://www.novelrank.com">NovelRank</a> website tracks Amazon ranks and deduces rough sales numbers from them. One needs to extrapolate for non-Amazon sales, of course. For scale, here are the sales of some popular (and not so popular) programming books in paper form on Amazon worldwide for the month of October 2013, according to NovelRank. </p><ul><li>Real World Haskell (O'Reilly) 66</li><li>Introduction to Algorithms (MIT, paperback only) 182</li><li>Learn you a Haskell for Great Good (No Starch) 158</li><li>Concrete Mathematics (Addison-Wesley) 114</li><li>ML for the Working Programmer (Cambridge Univ. Press) 15</li><li>Programming F# 3.0 (O'Reilly) 22</li></ul><p></p><p></p><h2>Content Production</h2><p>The interior was written in LaTeX. The cover was done in <a href="http://www.xara.com/us/designer-pro/">Xara Designer Pro</a> using a stock photograph I paid for. Writing was done over five months, in a total of 84 work days, whilst continuing with the usual commitments (business, teaching).</p><p>The kindle version was produced from the LaTeX sources using tex4ht to make a single big HTML file and then <a href="http://calibre-ebook.com">Calibre</a> to convert to an ebook. This is a rather horrible process, all told, which took about a week to get right, and resulted in a significant diff to the original .tex file. Getting it remotely presentable is hard work.</p><p>I still don't understand how people read these kind of books on Kindle, but they seem to. </p><h2>Selling on Amazon with CreateSpace</h2><p><a href="http://createspace.com/">CreateSpace</a> is a subsidiary of Amazon, which will print paperback books on demand and list them on Amazon. You just upload the PDF files for the interior and cover, and the rest is automatic. OCaml from the Very Beginning is 9 x 7.5 inches, 204 pages in black and white, with a full colour cover. It costs about $3.25 to print, and CreateSpace &amp; Amazon take a cut after that.</p><p>List Price: <strong>$39.99</strong>. Amazon routinely discounts to about <strong>$35</strong>. Profit about <strong>$21</strong> per copy.</p><h2>Selling on Amazon Kindle</h2><p>Kindle has a horrible pricing model for publishing these kind of books. 70% royalty on books priced $9.99 or below, 35% otherwise. So pricing a book between between $10 and $20 makes no sense. I priced the book roughly the same as the print one, and signed up for MatchBook. The hope is that people just buy the paper one, getting the Kindle one for free, and netting me the profit from the print one, not the meagre take from the kindle one. </p><p>Price <strong>$35</strong>. Profit about <strong>$11.50</strong>  per copy.</p><h2>Selling the DRM-free PDF eBook</h2><p>A PDF of the book, sold from the <a href="http://www.ocaml-book.com/">ocaml-book.com</a> website, using <a href="http://e-junkie.com">e-junkie</a> for content delivery and PayPal for payment processing.</p><p>Price: <strong>$14.99. </strong><span>Profit about </span><strong>$14.10 </strong>per copy<strong>.</strong></p><p><span></span></p><h2>Marketing</h2><p></p><p>I announced the book to the OCaml mailing list, and blogged about it. The website was on about the third page of google for the search "ocaml book" but it reasonably quickly climbed to the middle of the front page, where it is today. There were no sales for the first two days, but I know that sinking feeling from other projects and was prepared for it. Then sales started trickling in. I sent off review copies to the Journal of Functional Programming and a couple of bloggers.</p><p>This is, so far as I can remember, the sum total of active marketing effort so far. </p><h2>Legal and financial issues</h2><p>Both CreateSpace and Amazon Kindle will, by default, give 30% of your net earnings to the IRS unless you can prove you are not a US citizen and your country has an appropriate tax treaty. This is relatively easy to deal with if you publish through an existing corporation like I did, but apparently individuals have to jump through more hoops.  There is lots of conflicting information about these issues online. If you don't get it done in time, claiming the already-withheld money is hard too.</p><p></p><p>A bright spot is that there is a real direct email address with a real human at Amazon for dealing with this tax issue, and the Kindle and CreateSpace systems are linked so that, upon request, paperwork relating to the tax status of one can be transferred to the other. </p><p>I also had to deposit six copies of the printed book with copyright libraries in the UK and the Republic of Ireland, as a condition of using the ISBN.  Each country will have its own rules.</p><h2>Up-front costs</h2><ul><li>ISBNs (Pack of 10) $201</li><li>Postage of free copies to draft reviewers etc. $80</li><li>Proofs from CreateSpace with expedited shipping to the UK $134</li><li>25 copies for friends and so on, with expedited shipping $149</li><li>Stock photographs for cover and website $40</li></ul><p>Total <strong>$604. </strong>You could use a CreateSpace-assigned ISBN for free, get fewer proofs, and buy fewer sample copies and get this total down to about $150<strong>.</strong></p><p></p><p><span></span></p><h2>Running costs</h2><p></p><p><a href="http://www.squarespace.com">Squarespace</a> web hosting, $8 per month. <a href="http://www.e-junkie.com">E-junkie</a> for processing and content delivery of PDF eBook, $5 per month. Total <strong>$13</strong> per month. In theory, you could roll all this yourself for $0.</p><h2>Sales figures</h2><ul><li>June 7th-30th | Amazon 21, PDF eBook 13, Kindle 3 | Total net <strong>$652</strong></li><li>July | Amazon 12, PDF eBook 6, Kindle 15 | Total net <strong>$505</strong></li><li>August | Amazon 18, PDF eBook 9, Kindle 9 | Total net <strong>$603</strong></li><li>September | Amazon 24, PDF eBook 15, Kindle 9 | Total net <strong>$812</strong></li><li>October | Amazon 26, PDF eBook 20, Kindle 8 | Total net <strong>$912</strong></li></ul><p>It's hard to say how many copies will be sold in the next few years. There is another excellent OCaml book out soon (<a href="http://shop.oreilly.com/product/0636920024743.do">Real World OCaml</a> from O'Reilly), and things change with time. <span>However, should it sell a few hundred dollars a month steadily for the next five or ten years, I would consider it to be very decent pay for the work involved.</span></p><p>For comparison, here are the last five months' royalty payments from O'Reilly for PDF Explained: $99, $123, $99, $38, $109. (PDF Explained sells 50 - 100 copies a month, but is a smaller, cheaper book).  </p><p><span></span></p><h2>Some Advantages of traditional publishers</h2><p></p><ul><li>Traditional publishers might give you an advance on royalties (though I didn't get an advance from O'Reilly)</li><li><span>Traditional publishers will invest in translated editions (PDF Explained has been translated into Portuguese (Brazil) and Japanese). I will have to decide about, arrange, and pay for, translations for OCaml from the Very Beginning.</span></li><li><span></span><span>Traditional publishers have extra sales channels (I get part of a cent every time someone looks at a page of PDF Explained on <a href="http://www.safaribooksonline.com">Safari</a>, for example).</span></li><li>Traditional publishers will proof-read and edit the book and sometimes deal with things like indexing (though I had to write my own index for PDF Explained). To produce a book without an editor, you need to work hard and proof-read again and again.</li></ul><p></p><h2>Lessons</h2><p></p><ul><li>There is real money (as opposed to beer money) to be made, even if it's a niche book, so long as it sells consistently, and sales continue for several years. </li><li>Books require less maintenance than software, especially if written with that in mind (there's not a single URL in the book, and since it's a beginner's book, very little which might change). </li><li><span>If you can write and format a high quality book, the publishing side is really not hard at all in comparison. Once set up, the running costs and administration are trivial.</span></li></ul><p>At some point the industry might change such that it's not possible to earn $21 clear profit from a paperback textbook sale but until then, there's money to be made.</p><p></p><p></p><p></p><p> </p><a onclick="switchContent('post12','post11')" class="btn" href="#737918f3f7de75aff5c248083da4fc44">Hide</a></div></span>
<a name="ced84158410ed83624edecbcf0099fa8"></a><span class="rss-header"><span class="rss-title"><a href="http://www.ocamlpro.com/blog/2013/11/01/monthly-09-10.html"> OCamlPro Highlights, Sept-Oct 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_1">OCamlPro &#9001;fabricel<abbr title="(at) &rarr; @">(at)</abbr>ocamlpro.com (Fabrice Le Fessant)&#9002;</span><script type="text/javascript"><!--;
local = "fabricel";
h = "ocamlpro.com (Fabrice Le Fessant)";
hq = "ocamlpro.com%20(Fabrice%20Le%20Fessant)";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >OCamlPro<\/a>";
//--></script></span>, <span class="rss-date">01 Nov 2013</span></span><span class="rss-description"><div id="post13"><p>Here is a short report of our activities in September-October 2013.</p><h2> OCamlPro at OCaml'2013 in Boston</h2><p>We were very happy to participate to OCaml'2013, in Boston. The event was a great success, with a lot of interesting talks and many participants. It was a nice opportunity for us to present some of our recent work:</p><a onclick="switchContent('post13','post14')" class="btn" href="#ced84158410ed83624edecbcf0099fa8">Read more...</a></div><div id="post14" style="display: none"><p>Here is a short report of our activities in September-October 2013.</p><h2> OCamlPro at OCaml'2013 in Boston</h2><p>We were very happy to participate to OCaml'2013, in Boston. The event was a great success, with a lot of interesting talks and many participants. It was a nice opportunity for us to present some of our recent work:</p><ul> <li> <p>Fabrice presented his work on <a href="http://ocaml.org/meetings/ocaml/2013/proposals/wxocaml.pdf">the design of the wxOCaml library</a>. Although the <a href="https://github.com/OCamlPro/ocplib-wxOCaml/">wxOCaml library</a> itself is an interesting project, the goal of his talk was to show that binding thousands of functions from a C++ library can be automated very easily in OCaml, and make the bindings easy to maintain and to improve.</p> </li><li> <p>The work of Thomas and Louis on OPAM was presented in a talk by Anil on the <a href="http://ocaml.org/meetings/ocaml/2013/proposals/platform.pdf">OCaml Platform v0.1</a>. The OCaml Platform is a set of tools, including OPAM, to provide an ever increasing set of packages for OCaml developers, including high-quality documentation and broad portability. Some statistics showed how OPAM, in less than a year, grew from 200 packages to more than 1400 packages, and from 2-3 contributors to about 130 contributors in September. Another talk, <a href="http://ocaml.org/meetings/ocaml/2013/proposals/ocamlot.pdf">Ocamlot: OCaml Online Testing</a> presented how sets of packages will now be automatically tested, to give immediate feedback to contributors, and an evaluation of packages quality to users.</p> </li><li> <p>Pierre presented his work on <a href="http://ocaml.org/meetings/ocaml/2013/slides/chambart.pdf">Improving OCaml high level optimisations</a> that he also presented in a recent <a href="http://www.ocamlpro.com/html/blog/2013/05/24/optimisations-you-shouldn-t-do.html">blog post</a>.</p> </li><li> <p>Grégoire presented his work with Jacques Garrigue on <a href="http://ocaml.org/meetings/ocaml/2013/proposals/runtime-types.pdf">Runtime types in OCaml</a>. In particular, he showed how abstraction is hard to deal with, as there is a dilemma between the ability to write powerful polytipic functions and the preservation of the abstraction wanted by the developer for code modularity.</p> </li><li> <p>Finally, Çagdas presented his work on <a href="http://ocaml.org/meetings/ocaml/2013/slides/bozman.pdf">Profiling the Memory Usage of OCaml Applications without Changing their Behavior</a>. This new profiler will be able to provide precise memory information on production OCaml software, by snapshoting the memory and recovering type information. It is currently being tested on several projects, such as the <a href="http://why3.lri.fr/">Why3 verification tool</a>.</p> </li> </ul><p>Of course, the day was full of interesting talks, and we can only advise to see all of them on the <a href="http://ocaml.org/meetings/ocaml/2013/program.html">complete program</a> that is now online.</p><p><a href="http://cufp.org/conference/schedule/2013">CUFP'2013 Program</a> was also very dense. For OCaml users, Dave Thomas, first keynote, reminded us how important it is to build two-way bridges between OCaml and other languages: we have the bad habit to only build one-way bridges to just use other languages from OCaml, and forget that new users will have to start by using small OCaml components from their existing software written in another language. Then, Julien Verlaguet <a href="http://www.youtube.com/watch?v=gKWNjFagR9k">presented</a> the use of OCaml at Facebook to type-check and compile a typed version of PhP, HipHop, that is now used for a large part of the code at Facebook.</p><h2>Software Projects</h2><p>The period of September-October was also very busy trying to find some funding for our projects. Fortunately, we still managed to make a lot of progress in the development of these projects:</p><h3> OPAM</h3><p>Lots has been going on regarding OPAM, as the 1.1 release is being pushed forward, with a beta and a RC available already. This release focuses on stability improvements and bug-fixes, but is nonetheless a large step from 1.0, with an enhanced update mechanism, extended metadata, an enhanced 'pin' workflow for developers, and much more.</p><p>We are delighted by the success met by OPAM, which was mentioned again and again at the OCaml'2013 workshop, where we got a warming lot of positive feedback. To be sure that this belongs to the community, after licensing all metadata of the repository under CC0 (as close to public domain as legally possible), we have worked hand in hand with OCamlLabs to migrate it to <a href="https://opam.ocaml.org">opam.ocaml.org</a>. External repositories for <a href="https://github.com/vouillon/opam-windows-repository">Windows</a>, <a href="https://github.com/vouillon/opam-android-repository">Android</a> <a href="https://github.com/search?q=opam-repo&amp;type=Repositories&amp;ref=searchresults">and so on</a> are appearing, which is a really good thing, too.</p><h3> The Alt-Ergo SMT Solver</h3><p>In September, we officially announced the distribution and the support of <a href="http://alt-ergo.lri.fr">Alt-Ergo</a> by OCamlPro and launched its <a href="http://alt-ergo.ocamlpro.com">new website</a>. This site allows to download public releases and to discover available support offerings. We have also published a new public release (version 0.95.2) of the prover. The main changes in this minor release are: source code reorganization, simplification of quantifier instantiation heuristics, GUI improvement to reduce latency when opening large files, as well as various bug fixes.</p><p>During September, we also re-implemented and simplified other parts of Alt-Ergo. In addition, we started the integration of a new SAT-solver based on miniSAT (implemented as a plug-in) and the development of a new tool, called Ctrl-Alt-Ergo, that automates the most interesting strategies of Alt-Ergo. The experiments we made during October are very encouraging as shown by <a href="http://www.ocamlpro.com/blog/2013/10/22/alt-ergo-evaluation-october-2013.html">our previous blog post</a>.</p><h3> Multi-runtime</h3><p>Luca Saiu completed his work at Inria and on the multi-runtime branch, fixing the last bugs and leaving the code in a shape not too far removed from permitting its eventual integration into the OCaml mainline.</p><p>Now, the code has a clean configuration-time facility for disabling the multi-runtime system, and compatibility is restored with architectures not including the required assembly support to at least compile and work using a single runtime.  A crucial optimization permits to work in this mode with extremely little overhead with respect to stock OCaml. Testing on an old PowerPC 32-bit machine revealed a few minor portability problems related to word size and endianness.</p><h3> Compiler optimisations</h3><p>We have been working on allowing cross module inlining. We wanted to be able to show a version generating strictly better code than the current compiler. This milestone being reached, we are now preparing a patch series for upstreaming the base parts. We are also working on polishing the remaining problems: the passes were written in an as simple as possible way, so compilation time is still a bit high. And there are a few difficulties remaining with cross module inlining and packs.</p><h2>The INRIA-OCamlPro Lab Team</h2><p>The team is also evolving, and some of us are now leaving the team to join other projects:</p><ul> <li> <p>After two years with us, Thomas Gazagnaire has left OCamlPro in October to work most of his time on <a href="http://www.openmirage.org/">Mirage</a> in Cambridge (UK). Thomas was OCamlPro's first employee, and OCamlPro probably wouldn't exist without him. Thomas has also been the main architect of OPAM, and was involved in the design of many of our projects. Louis Gesbert will continue his work on developing and maintaining OPAM.</p> </li><li> <p>After one year with us, Luca Saiu has left Inria in October. Luca has made a tremendous work on the implementation of a multicore-OCaml, where every runtime runs in a different memory space with its own garbage collector. We hope to be able to upstream his work soon to the official OCaml distribution.</p> </li><li> <p>After an internship with us, Pierrick Couderc, Souhire Kenawi and David Maison are back to their masters' studies since September. Souhire worked on testing the development of iOS applications on Linux with OCaml, a very challenging task ! Pierrick and David developed an online editor for OCaml that we are going to release very soon.</p> </li> </ul><p>This blog post was about departures, but stay connected, next month, we are going to announce some newcomers who decided to join the team for the winter !</p><a onclick="switchContent('post14','post13')" class="btn" href="#ced84158410ed83624edecbcf0099fa8">Hide</a></div></span>
<a name="c6e15f0c356db12e60552f7609d8e57c"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/projects/opam2debian/"> opam2debian</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge Projects</span>, <span class="rss-date">31 Oct 2013</span></span><span class="rss-description">Create Debian package which contains a compiled set of OPAM packages.  The VCS and the bug tracker are on github: https://github.com/gildor478/opam2debian</span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
