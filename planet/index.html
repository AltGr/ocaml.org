<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="https://static.ocamlcore.org/official/images/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="../books.html#manual">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings.html">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://www.ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://blog.mestan.fr/feed/?cat=16">Alp Mestan</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://unnali.com/tag/ocaml/feed/">Arlen Cuss</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://procrastiblog.com/category/ocaml/feed/">Christopher Conway</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://blog.dbpatterson.com/rss">Daniel Patterson</a></li><li><a href="http://nleyten.com/atom.aspx">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://bentobako.org/david/blog/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/CodeHacking/Ocaml/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/FP-Syd/index.rss20">FP-Sydney</a></li><li><a href="http://www.blogger.com/feeds/8964007124326996693/posts/default/-/ocaml">Fayssal Martani</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/rss?tag=ocaml">Jamie Brandon</a></li><li><a href="http://ocaml.janestcapital.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://savonet.sourceforge.net/liquidsoap.rss">Liquidsoap</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="http://eigenclass.org/R2/feeds/rss2/all">Mauricio Fernandez</a></li><li><a href="http://www.elehack.net/michael/blog/tags/ocaml?format=rss">Michael Ekstrand</a></li><li><a href="http://www.rktmb.org:82/feed/category/work/ocaml/atom">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocamlhackers.ning.com/profiles/blog/feed?tag=ocaml&xn_auth=no">OCaml Hackers</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://redlizards.com/blog/feed/?tag=ocaml">Red Lizard Software</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://www.nicollet.net/toroidal/ocaml/feed/">Victor Nicollet</a></li><li><a href="http://y-node.com/blog/feeds/tag/ocaml/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="a21986b497e300802f880aeb17491d60"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.02.26.html"> Caml Weekly News, 26 Feb 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">26 Feb 2013</span></span><span class="rss-description">llpp v13 / Beta-release of Merlin / Extracting information from HTML documents / strange typechecking result / What is triggering a lot of GC work? / Other Caml News</span>
<a name="eb5f3e93ab87a2e7e16b88def1b1fdfb"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/on-the-nary-cartesian-product"> On the n-ary cartesian product</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">23 Feb 2013</span></span><span class="rss-description"><div id="post1"><p>The n-ary cartesian product (on lists) returns the cartesian product of a list of list, rather than just two lists: <code>product [[1]; [2;3]; [4;5]]</code> is <code>[[1;2;4]; [1;2;5]; [1;3;4]; [1;3;5]]</code>. The result is the empty list as soon of one of the input lists is empty. But what is the product of the empty list of lists?</p>
<p>I first answered this question with mathematical considerations that, while working on set theory, will fell familiar to anyone having worked with dependent types. But there is a direct, much simpler answer <em>in the code</em>.</p>




<p>The motivation for this post was a <a href="https://github.com/ocaml-batteries-team/batteries-included/issues/359">bug report</a> on the bugtracker of the Batteries library project, in which user wistery-k noticed the <code>BatList.n_cartesian_product</code> function incorrectly failed on empty lists.</p>
<h3 id="a-view-from-the-theory">A view from the theory</h3>
<a onclick="switchContent('post1','post2')" class="btn" href="#eb5f3e93ab87a2e7e16b88def1b1fdfb">Read more...</a></div><div id="post2" style="display: none"><p>The n-ary cartesian product (on lists) returns the cartesian product of a list of list, rather than just two lists: <code>product [[1]; [2;3]; [4;5]]</code> is <code>[[1;2;4]; [1;2;5]; [1;3;4]; [1;3;5]]</code>. The result is the empty list as soon of one of the input lists is empty. But what is the product of the empty list of lists?</p>
<p>I first answered this question with mathematical considerations that, while working on set theory, will fell familiar to anyone having worked with dependent types. But there is a direct, much simpler answer <em>in the code</em>.</p>




<p>The motivation for this post was a <a href="https://github.com/ocaml-batteries-team/batteries-included/issues/359">bug report</a> on the bugtracker of the Batteries library project, in which user wistery-k noticed the <code>BatList.n_cartesian_product</code> function incorrectly failed on empty lists.</p>
<h3 id="a-view-from-the-theory">A view from the theory</h3>
<p>What is the n-ary cartesian product? In the result list of the product of <code>[[1]; [2;3]; [4;5]]</code>, each list corresponds to a choice, in each of the input lists, of one element. For example the result list <code>[1;3;4]</code> corresponds to taking the only element of the first list, the second element of the second list, and the first element of the third list. All such possible choices of one element in each list is represented in the output.</p>
<p>To reason about this function, we should therefore model those element choices. A natural choice is to represent lists as <em>families</em> over a set of indices. For example, <code>[3;4]</code> could be modeled by a function from the parameter set <code>{0,1}</code> to the elements, mapping <code>0</code> to <code>3</code> and <code>1</code> to <code>4</code>.</p>
<p>In order to prevent using an index into a list as an index into another list by mistake, we will rather use <em>abstract</em> sets of indices -- the usual technique of type abstraction. We will designate the input lists by a parameter in an abstract index set, <code>I</code>, and each element of the <code>i</code>-th input list by an index in another abstract index set, <code>J i</code>. Notice that <code>J</code> is here an indexed family of index sets. Finally, to each pair of an index <code>i</code> in <code>I</code> (we'll write <code>i : I</code>) in the outer list and <code>j : J i</code> in the <code>i</code>-th inner list corresponds an element <code>elem i j</code> (if we really see lists as functions from indices to elements, <code>elem</code> is just the input list of lists). All list elements have the same type <code>A</code> -- a finer-grained choice would not help us here.</p>
<p>In this context, a "choice" of an element for each lists of the input can be represented as a function from the index (<code>i : I</code>) of a list to the index (in <code>J i</code>) of its chosen element: they live in the dependent function space <code>(i : I) -&gt; J i</code>. The n-ary cartesian product is a list with one element for such a choice; in other terms, it is a list indexed by <code>(i : I) -&gt; J i</code> taken as an index set. For each such choice function, we return a list of elements, one per list of the input list of lists, that a family of type <code>I -&gt; A</code>.</p>
<p>Putting it all together: if we represent lists as indexed families, the n-ary cartesian product has the following type and formal implementation (I'm using parenthesis and braces interchangeably to make it easier to see the delimiter nesting).</p>
<pre><code>product : ((i : I) -&gt; {J i -&gt; A})
       -&gt; ({(i : I) -&gt; J i} -&gt; (I -&gt; A))
product elem = (fun choice -&gt; (fun i -&gt; elem i (choice i))</code></pre>
<p>We take a family over <code>I</code> of families over <code>J</code> of elements of type <code>A</code> (a list of lists), and return a family over choice functions <code>(i:I) -&gt; J i</code> of families over <code>I</code> (a lists of lists).</p>
<p>This gives us a firm formal standing to understand the behavior of the n-ary cartesian product on lists. We can first check that it coincides with our intuition in two well-understood edge cases, namely the product of a list of singletons, and the product of a list of a single list. We'll then see what this tells us of the n-ary product of no lists at all.</p>
<p>A singleton list can be modeled as being indexed by a singleton index set, which we will write <code>{*}</code> (<code>*</code> is an unnamed and un-interesting element). If we pass as input to <code>product</code> an <code>I</code>-indexed list of singleton, this means that each <code>J i</code> is <code>{*}</code>: we start from a value of type <code>I -&gt; ({*} -&gt; A)</code>, and return a <code>({(I -&gt; {*}) -&gt; (I -&gt; A)</code>. As there is only one function from <code>I</code> to <code>{*}</code>, that constantly returns <code>*</code>, there is only one possible choice, so our return list has to have only one element, which is indexed over <code>I</code>: it is the list of elements of our input singleton lists. <code>product [[1]; [2]; [3]]</code> is <code>[1; 2; 3]</code>.</p>
<p>The motivated reader can check that the return type corresponding to a single input list, that is <code>{*} -&gt; (J * -&gt; A)</code>, conversely tells us that we will get as return a <code>J*</code>-indexed list of singletons: <code>product [[1;2;3]]</code> is <code>[[1]; [2]; [3]]</code>.</p>
<p>Finally, a product of no list should take an input with type <code>(x : ∅) → ((j : J x) -&gt; A)</code>, with one family <code>J x</code> for each element <code>x</code> of the empty set, that is no <code>J</code> families at all. Correspondingly, the return value should map choice functions <code>(x : ∅) -&gt; J x</code> into lists of the form <code>∅ -&gt; A</code>. There is exactly one such choice function: it is a function whose graph is the empty set, that maps no element from its input type to elements of its output type (or, as a list of chosen indices, the empty list). And the list returned for this choice, of the form <code>∅ -&gt; A</code>, can only be the empty list. So <code>product []</code> should return <code>[[]]</code>.</p>
<h3 id="a-simpler-counting-argument">A simpler counting argument</h3>
<p>The length of the n-ary cartesian product is the product of the length of all input lists. Our example with input lists of sizes 1, 2 and 2 returned 4 lists as output. The length of the n-ary product of no lists should be the 0-ary product of sizes, namely the neutral element for multiplication, 1.</p>
<p>Finally, taking an empty <code>'a list list</code> as input, there is only one way to return a value of type <code>'a list list</code> that has one element: this element has to be the empty list <code>[]</code>, so the complete result must be <code>[[]]</code> -- enforced by parametricity.</p>
<p>(I'm not fond of those counting arguments, because they are fundamentally based on forgetting which kind of objects we're really working with, studying only cardinality rather than the actual lists. This can often set our intuition on the right track, but can also be misleading in some edge cases where different fields would make different choices of simplifications, such as the much-debated question of how should exponentiation be extended to define <code>0^0</code>.)</p>
<h3 id="the-view-from-the-code">The view from the code</h3>
<p>The buggy implementation was the following:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> <span class="kw">rec</span> n_cartesian_product = <span class="kw">function</span>
| [] -&gt; <span class="kw">assert</span> <span class="kw">false</span>
| [l] -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; [i]) l
| h :: t -&gt;
    <span class="kw">let</span> rest = n_cartesian_product t <span class="kw">in</span>
    List<span class="kw">.</span>concat
      (List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> r -&gt; i :: r) rest) h)</code></pre>
<p>A correct implementation (which was provided by wistery-k) should be of the following form:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> <span class="kw">rec</span> n_cartesian_product = <span class="kw">function</span>
| [] -&gt; <span class="co">(* ? *)</span>
| h :: t -&gt;
    <span class="kw">let</span> rest = n_cartesian_product t <span class="kw">in</span>
    List<span class="kw">.</span>concat
      (List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> r -&gt; i :: r) rest) h)</code></pre>
<p>The key point is that the value returned for <code>[]</code> should allow to express the former base case <code>[l]</code> as an instance of the general case <code>h :: t</code>. There is only one choice with this property, and it is <code>[[]]</code>.</p>
<p>No theoretical considerations make as strong an argument as this one: the <em>right</em> answer is the one that makes the code <em>elegant</em>.</p><a onclick="switchContent('post2','post1')" class="btn" href="#eb5f3e93ab87a2e7e16b88def1b1fdfb">Hide</a></div></span>
<a name="5faed7c033c8c4479a9024de0dc1bbbd"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=785"> Piqi 0.6.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">21 Feb 2013</span></span><span class="rss-description">Protocol Buffers, JSON and XML serialization".</span>
<a name="8bbd270a14fe70e04c0fc3ce452093ba"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=848"> Merlin</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">21 Feb 2013</span></span><span class="rss-description">Merlin is a tool
which providessmart completion, among other things, in your favorite editor.
As of today, Vim and Emacs are supported.</span>
<a name="6419d96eea6ef544d4299561d836c7cd"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/quick-tip-the-ocamlbuild-documentation-option"> Quick tip: the ocamlbuild -documentation option</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">20 Feb 2013</span></span><span class="rss-description"><div id="post3"><p>A quick and dirty blog post about the <code>-documentation</code> option of <code>ocamlbuild</code>, how to use and understand its output.</p>




<p>I've been overloaded since returning from POPL, and all the nice and interesting blog posts I planned to polish and publish are still in the drawers. In the meantime, I'm recycling emails that may be of interest to some of our beloved readers.</p>
<p>This post comes from a conversation with Cedric Cellier, which was wondering how to tell ocamlbuild to use the <code>-custom</code> option to (bytecode) compile his OCaml program.</p>
<h4 id="the-ocamlbuild--documentation-option">The ocamlbuild <code>-documentation</code> option</h4>
<a onclick="switchContent('post3','post4')" class="btn" href="#6419d96eea6ef544d4299561d836c7cd">Read more...</a></div><div id="post4" style="display: none"><p>A quick and dirty blog post about the <code>-documentation</code> option of <code>ocamlbuild</code>, how to use and understand its output.</p>




<p>I've been overloaded since returning from POPL, and all the nice and interesting blog posts I planned to polish and publish are still in the drawers. In the meantime, I'm recycling emails that may be of interest to some of our beloved readers.</p>
<p>This post comes from a conversation with Cedric Cellier, which was wondering how to tell ocamlbuild to use the <code>-custom</code> option to (bytecode) compile his OCaml program.</p>
<h4 id="the-ocamlbuild--documentation-option">The ocamlbuild <code>-documentation</code> option</h4>
<p>The command <code>ocamlbuild ... -documentation</code> explains the set of rules and tags understood by this particular ocamlbuild invocation (which can depend on the plugin, other options passed to <code>ocamlbuild</code>, etc..). It returns a very long output, that contains information about both all <em>rules</em> known by ocamlbuild (which tells him how to dynamically look for the dependencies of a given target) and all <em>tags</em> (which add flags to the compilation command for a given target). Some representative examples on my system:</p>
<pre><code>...

rule
  "ocaml: cmx* &amp; o* -&gt; native"
  ~deps:[ %.cmx; %.o ]
  ~prods:[ %.native ]
  &lt;fun&gt;

rule
  "ocaml: mllib &amp; d.cmo* -&gt; d.cma"
  ~deps:[ %.mllib ]
  ~prods:[ %.d.cma ]
  &lt;fun&gt;

...

flag {. byte, debug, link, ocaml, program .} "-g"

flag {. byte, compile, debug, ocaml .} "-g"

flag {. link, native, ocaml, use_camlp4_bin .} "+camlp4/Camlp4Bin.cmx"

flag {. byte, link, ocaml, use_camlp4_bin .} "+camlp4/Camlp4Bin.cmo"

flag {. compile, ocaml, use_camlp4_full .}
  "-I +camlp4/Camlp4Parsers -I +camlp4/Camlp4Printers -I +camlp4/Camlp4Filters"</code></pre>
<p>While it won't tell you everything (you don't know which <code>&lt;fun&gt;</code> is hiding under the <code>.d.cma</code> rule above, so you'll need to look at the manual or try it to what this extension means), grepping this output is a good way to find about ocamlbuild tags you didn't know about, and look for specific features. So for our <code>-custom</code> question:</p>
<pre><code>$ ocamlbuild -documentation | grep custom
flag {. byte, custom, library, link, ocaml .} "-custom"
flag {. byte, custom, link, ocaml, program .} "-custom"</code></pre>
<p>This tells us that <code>-custom</code> will be added to the compilation command when either one of this list of flags is present for the target being compiled -- this is similar to the predicate system of <code>ocamlfind</code>.</p>
<h4 id="knowing-which-flags-are-present-thats-what-_build_log-is-for">Knowing which flags are present: that's what <code>_build/_log</code> is for</h4>
<p>In this simple case it's enough to just try to add the <code>custom</code> tag to your ocamlbuild invocation (either in the <code>_tags</code> or on the command line directly) and check that it works. But in general you may want to know about precisely which of those flags are already present under your current compilation settings, and which should be added. For that, the log is your friend.</p>
<pre><code>$ cd /tmp
$ mkdir ocamlbuild-test; cd ocamlbuild-test
$ touch test.ml
$ ocamlbuild test.byte
Finished, 3 targets (0 cached) in 00:00:00.
$ cat _build/_log 
### Starting build.
# Target: test.ml.depends, tags: { extension:ml, file:test.ml, ocaml, ocamldep, quiet }
.../bin/ocamldep.opt -modules test.ml &gt; test.ml.depends
# Target: test.cmo, tags: { byte, compile, extension:cmo, extension:ml, file:test.cmo, file:test.ml, implem, ocaml, quiet }
.../bin/ocamlc.opt -c -o test.cmo test.ml
# Target: test.byte, tags: { byte, dont_link_with, extension:byte, file:test.byte, link, ocaml, program, quiet }
.../bin/ocamlc.opt test.cmo -o test.byte
# Compilation successful.</code></pre>
<p>There you are: ocamlbuild called <code>ocamldep</code> to look for dependencies, then compiled the module, then linked it. And you have the list of all flag presents at each step in the process. You can check that besides <code>custom</code>, the necessary <code>byte, link, ocaml, program</code> are all present during the linking phase.</p>
<pre><code>$ ocamlbuild -tag custom test.byte
Finished, 3 targets (2 cached) in 00:00:00.
scherer@jurancon:/tmp/ocamlbuild-test $ cat _build/_log 
### Starting build.
# Target: test.ml.depends, tags: { custom, extension:ml, file:test.ml, ocaml, ocamldep, quiet }
.../bin/ocamldep.opt -modules test.ml &gt; test.ml.depends # cached
# Target: test.cmo, tags: { byte, compile, custom, extension:cmo, extension:ml, file:test.cmo, file:test.ml, implem, ocaml, quiet }
.../bin/ocamlc.opt -c -o test.cmo test.ml # cached
# Target: test.byte, tags: { byte, custom, dont_link_with, extension:byte, file:test.byte, link, ocaml, program, quiet }
.../bin/ocamlc.opt -custom test.cmo -o test.byte
# Compilation successful.</code></pre>
<p>The <code>custom</code> tag was added to all compilation phases (we may have been more precise by adding it in <code>_tags</code> as a tag on <code>test.byte</code> only, so that it gets added only during the linking step), and resulted to the addition of the <code>-custom</code> flag. Job done. Notice that ocamlbuild only runs the linking command again, as the output of the others are already cached.</p><a onclick="switchContent('post4','post3')" class="btn" href="#6419d96eea6ef544d4299561d836c7cd">Hide</a></div></span>
<a name="13687fd2f726142a177153db4ec36e32"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.02.19.html"> Caml Weekly News, 19 Feb 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">19 Feb 2013</span></span><span class="rss-description">ocp-indent 1.0.0 release / Old and new OCaml installed on same machine? / Sequence 0.3.1 / Other Caml News</span>
<a name="557480a976edc0ddba3ac135b12b965d"></a><span class="rss-header"><span class="rss-title"><a href="http://www.ocamlpro.com/blog/2013/02/18/monthly-01-02.html"> An Overview of our Current Activities</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_1">OCamlPro &#9001;thomas<abbr title="(at) &rarr; @">(at)</abbr>ocamlpro.com (Thomas Gazagnaire)&#9002;</span><script type="text/javascript"><!--;
local = "thomas";
h = "ocamlpro.com (Thomas Gazagnaire)";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + h + "\" >OCamlPro<\/a>";
//--></script></span>, <span class="rss-date">18 Feb 2013</span></span><span class="rss-description"><div id="post5"><p>From the early days of OCamlPro, people have been curious about our plans; they were asking how we worked at OCamlPro and what we were doing exactly. Now that we have started releasing projects more regularly, these questions come again. They are very reasonable questions, and have resolved to be more public and communicate more regularly. This post covers our activities from the beginning of 2013 and updates are scheduled on a monthly basis.</p><h2>OCamlPro ?</h2><p>OCamlPro has been created to promote the use of OCaml in the industry. In order to do so, we provide a wide range of services targeted at all stages of typical software projects: we train engineers and we improve the efficiency and usability of the OCaml compiler and tools, we help design new projects, advise on which open-source software components to use and how, we help deliver OCaml software projects and we do custom software development. One extra focus is the increase of the accessibility of OCaml for beginners and students.</p><a onclick="switchContent('post5','post6')" class="btn" href="#557480a976edc0ddba3ac135b12b965d">Read more...</a></div><div id="post6" style="display: none"><p>From the early days of OCamlPro, people have been curious about our plans; they were asking how we worked at OCamlPro and what we were doing exactly. Now that we have started releasing projects more regularly, these questions come again. They are very reasonable questions, and have resolved to be more public and communicate more regularly. This post covers our activities from the beginning of 2013 and updates are scheduled on a monthly basis.</p><h2>OCamlPro ?</h2><p>OCamlPro has been created to promote the use of OCaml in the industry. In order to do so, we provide a wide range of services targeted at all stages of typical software projects: we train engineers and we improve the efficiency and usability of the OCaml compiler and tools, we help design new projects, advise on which open-source software components to use and how, we help deliver OCaml software projects and we do custom software development. One extra focus is the increase of the accessibility of OCaml for beginners and students.</p><p>Our customers are well-known industrial users such as <a href="http://www.janestreet.com/">Jane-Street</a>, <a href="http://www.citrix.com/">Citrix</a> and <a href="http://www.lexifi.com/">Lexifi</a> but we also help individual developers lost in the wild of non-OCaml environments inter-operate OCaml with other components. We also believe that collaborative R&amp;D projects are a great opportunity to make existing companies discover OCaml and its benefits to their products and we are involved in several of them (see below).</p><p>Our engineering team is steadily growing (currently 9 full-time engineers in a joint lab between OCamlPro and INRIA) located in Paris and Nice. We gather a wide range of technical skills and industrial world expertise as we are all coming from major academic and industrial actors such as <a href="http://www.inria.fr/">INRIA</a>, <a href="http://www.3ds.com/">Dassaut Systèmes</a>, <a href="http://www.mlstate.com/">MLstate</a> and <a href="http://www.citrix.com/">Citrix</a>. We also love the OCaml open-source ecosystem: we have been participating to the development of <a href="http://ocsigen.org/">ocsigen</a>, <a href="http://www.openmirage.org/">mirage</a>, <a href="http://www.xen.org/products/cloudxen.html">XCP</a>, <a href="http://mldonkey.sourceforge.net/">mldonkey</a>, <a href="http://www.marionnet.org/EN/">marionet</a> and so on. By the way, OCamlPro has some open <a href="http://www.ocamlpro.com/company/jobs.html">positions</a> and we are still looking to hire excellent software engineers!</p><h2>OCaml Distribution</h2><p>The first of our technical activities is related to work on the OCaml distribution itself. We are part of the OCaml compiler development team -- our INRIA members are part of the <a href="http://gallium.inria.fr/">Gallium</a> project which develops OCaml at INRIA -- and we regularly contribute patches to improve the usability and performance of the compiler itself.</p><p>We have recently proposed <a href="http://caml.inria.fr/mantis/view.php?id=5894">a series of patches</a> to improve the performance of functions with float arguments and we have started developing a <a href="https://github.com/chambart/ocp-bench">framework</a> to benchmark the efficiency of compiler optimizations.</p><p>We are also actively exploring the design-space for concurrency and distribution in OCaml, with an implementation of (i) a reentrant runtime; (ii) a way to instantiate different runtimes in separate system threads in the same process, and (iii) an efficient multi-scale communication library, between threads and between processes. We call this <b>multi-runtime OCaml</b> and a prototype is available on <a href="https://github.com/lucasaiu/ocaml/tree/master">github</a>.</p><p>Last, we are also making progress with the memory profiling tools. We work on a modified OCaml runtime which can store the location of each allocated block in the heap, with hooks to dump that heap on demand. External tools can then use that dump to produce useful statistics about memory usage of the program. The good news is that we now have a working and usable bytecode runtime and an external tool that produces basic memory information. We are preparing an alpha release in the next month, so stay tuned!</p><h2>Development Tools</h2><p>Our efforts to make OCaml more usable go further than looking at the compiler. We are improving the development tools already existing in the community, such as the recently released <a href="https://github.com/OCamlPro/ocp-indent">indentation tool</a> which was initially coming from an experiment from <a href="https://bitbucket.org/camlspotter/ocaml-indent">Jun Furuse</a>, and creating new ones when the lack is blatant.</p><p>Most recent news on that front concern <a href="http://opam.ocamlpro.com/">OPAM</a>, the package manager for OCaml that we are developing since mid-2012. For people not familiar with it yet, OPAM is a source-based package manager for OCaml. It supports resolution of complex dependency constraints between packages, multiple simultaneous compiler installations, flexible package constraints, and a Git-friendly development workflow. The beta release was announced in January, and we expect the first official release to happen in the next weeks. The OCaml community has gratefully welcomed OPAM, and the <a href="https://github.com/OCamlPro/opam-repository">repository of its package metadata</a> has already become the most forked OCaml project on github! Interestingly, two meetups have gathered more than fifty OPAM users in <a href="http://meetup.ocaml-lang.fr/">Paris</a> and Cambridge in January. We really hope this kind of meetup can be generalized: if you want to help us organize one in your area, feel free to contact us!</p><p>The other major part of our work around development tools for OCaml is TypeRex. TypeRex is a collection of tools which focus on improving developer efficiency, and lowering the entry barrier for experienced developers who are used to shiny IDEs in other languages. The first version of <a href="http://www.typerex.org/">TypeRex</a>, that was released last year, was a first step in this direction: it provided an enhanced emacs mode for OCaml code, with colorization, indentation, refactoring facilities, completion, code-navigation, documentation tooltips, etc. The next version of TypeRex (simply dubbed <b>typerex2</b>) is underway, with more independent tools (like ocp-indent), less tightly coupled to Emacs, and focused on better integration with various IDEs. If you are interested in following the progress of these tools, you can check the <b>typerex2</b> OPAM packages with 1.99.X+beta version numbers, which we release on a regular basis.</p><h2>R&amp;D projects</h2><p>The idea that OCaml is the right choice to create new innovative products is at the core of OCamlPro. We are very involved in the research community, especially on Functional Languages, with participation into the Program Committees of various conferences such as <a href="http://oud.ocaml.org/">the OCaml User and Developer (OUD)</a> workshop and <a href="http://cufp.org/">the Commercial User of Functional Programming (CUFP)</a> conference. We also joined two collaborative R&amp;D projects in 2012, the <a href="http://www.richelieu.pro/">Richelieu FUI</a> and <a href="http://bware.lri.fr/index.php/BWare_project">BWare ANR</a>. As part of the Richelieu project, we are developing a JIT compiler for the <a href="http://www.scilab.org/">Scilab language</a>. As part of the Bware project, we improve the efficiency of automatic theorem provers, with a specific focus on <a href="http://alt-ergo.lri.fr/">Alt-Ergo</a>, an SMT solver particularly suited to program verification. We are always interested in bringing our expertise in compiler technologies and knowledge of complex and distributed systems to new R&amp;D projects: contact us if you are interested!</p><p>In the Richelieu project, our combined technical and theoretical expertise proved particularly effective. The research consortium is led by <a href="http://www.scilab-enterprises.com/">Scilab Entreprises</a> which needed a safer and more efficient execution engine for Scilab in order to compete with Matlab. We joined the consortium to implement the early analysis required by the JIT compiler. The project started last December, and we have since specified the semantics of the language and implemented a working prototype of an interpreter that is already as fast as the current C++ engine of Scilab 6.</p><h2>Growing the Community</h2><p>Our last important domain of activity is geared towards the OCaml community. It is important to us that the community grows bigger, and to achieve this goal there are some basic blocks that we need to help build, together with the other main actors of the community.</p><p>The first missing block is a good reference documentation. This year will end with (at least) one new important book for the language: <a href="http://www.realworldocaml.org/">Real-World OCaml</a> which targets experienced software engineers who do not know OCaml yet. We collaborate with <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/">OCamlLabs</a> to make the technical experience of this book a success. We also work to improve the general experience of using OCaml for complete beginners by creating a stable <a href="https://github.com/OCamlPro/ocp-edit-simple">replacement</a> to the broken <b>ocamlwin</b>, the simple editor distributed with OCaml on Windows.</p><p>It is also important to us that OCaml uses the web as a platform to attract new users, as is becoming the norm for modern programming languages. We are members of the <a href="http://www.ocaml.org/">ocaml.org</a> building effort and have created <a href="http://try.ocamlpro.com/">tryocaml</a> to let newcomers easily discover the language directly from their browser. TryOcaml has been welcomed as a great tool, already adopted and adapted: see for instance <a href="http://rtt.forge.ocamlcore.org/tryrtt.html">tryrtt</a> or <a href="http://rml.lri.fr/tryrml/">try ReactiveML</a>. We are in the process of simplifying the integration with other compiler variants.</p><p>Last, but not least, we collaborate very closely with OCamlLabs to create the OCaml Plateform: a consistent set of libraries, thoroughly tested and integrated, with a rolling release schedule of 6 months. The platform will be based on <a href="http://opam.ocamlpro.com/">OPAM</a> and we are currently designing and prototyping a testing infrastructure to improve and guarantee the quality of packages.</p><a onclick="switchContent('post6','post5')" class="btn" href="#557480a976edc0ddba3ac135b12b965d">Hide</a></div></span>
<a name="95c68fb5b27ea5ca29bbb054741328e7"></a><span class="rss-header"><span class="rss-title"><a href="http://erratique.ch/software/four"> Four</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Daniel Bünzli</span>, <span class="rss-date">14 Feb 2013</span></span><span class="rss-description"><a href="http://gaspardbuma.org/en">Gaspard Buma</a>'s show <em>Boats to nowhere</em> is now playing at the <a href="http://www.arsenic.ch">Arsenic</a>. I helped with the show's visuals and along the way prototyped <a href="http://erratique.ch/software/four">Four</a> a lightweight modern OpenGL rendering engine for Lua.</span>
<a name="e56033b085d70d0747d47e6fe495078d"></a><span class="rss-header"><span class="rss-title"><a href="http://blog.opalang.org/2013/02/some-great-news-on-opa.html"> Some great news on Opa</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_2">Opa &#9001;noreply<abbr title="(at) &rarr; @">(at)</abbr>blogger.com (HB)&#9002;</span><script type="text/javascript"><!--;
local = "noreply";
h = "blogger.com (HB)";
document.getElementById("ocaml_2").innerHTML = '<a href="mailto:' + local + '@' + h + "\" >Opa<\/a>";
//--></script></span>, <span class="rss-date">12 Feb 2013</span></span><span class="rss-description"><div id="post7"><p>It's been a while since our last post. Like many others, we mainly rely on Twitter to spread the news on Opa.</p><p>This very short post is just an exciting summary on new things that happened in the last couple of months.</p><h1 id="release-of-opa-1.1.0">Release of Opa 1.1.0</h1><p>We released Opa 1.1.0 which as always brings bugfixes, performance enhancement and new feature.</p><p>With Opa 1.1.0, you now can include JavaScript code and Node.js packages easier than ever! We will write about it soon.</p><p>Sadly, we were hit by GitHub decision to halt its download feature. We relied on this and even built a service (in Opa!) that automatically pushed packages. We are still looking at nice hosting alternatives, as the GitHub files should disappear soon.</p><p>From this release, we also support a 32-bit Windows package.</p><h1 id="ongoing-support-of-postgres">Ongoing support of Postgres</h1><p>For a important project that is being built with Opa, we are adding Postgres support.</p><p>Switching your Opa code from MongoDB to Postgres requires almost no code change, and again we will write about it soon.</p><a onclick="switchContent('post7','post8')" class="btn" href="#e56033b085d70d0747d47e6fe495078d">Read more...</a></div><div id="post8" style="display: none"><p>It's been a while since our last post. Like many others, we mainly rely on Twitter to spread the news on Opa.</p><p>This very short post is just an exciting summary on new things that happened in the last couple of months.</p><h1 id="release-of-opa-1.1.0">Release of Opa 1.1.0</h1><p>We released Opa 1.1.0 which as always brings bugfixes, performance enhancement and new feature.</p><p>With Opa 1.1.0, you now can include JavaScript code and Node.js packages easier than ever! We will write about it soon.</p><p>Sadly, we were hit by GitHub decision to halt its download feature. We relied on this and even built a service (in Opa!) that automatically pushed packages. We are still looking at nice hosting alternatives, as the GitHub files should disappear soon.</p><p>From this release, we also support a 32-bit Windows package.</p><h1 id="ongoing-support-of-postgres">Ongoing support of Postgres</h1><p>For a important project that is being built with Opa, we are adding Postgres support.</p><p>Switching your Opa code from MongoDB to Postgres requires almost no code change, and again we will write about it soon.</p><h1 id="big-project-in-opa">Big project in Opa</h1><p>As mentioned earlier, we are working on a pretty big project implemented with Opa. Stay tuned!</p><a onclick="switchContent('post8','post7')" class="btn" href="#e56033b085d70d0747d47e6fe495078d">Hide</a></div></span>
<a name="6cdb7a70631b8b103948bf9782f47600"></a><span class="rss-header"><span class="rss-title"><a href="http://functional-orbitz.blogspot.com/2013/02/ann-ocaml-vclock-000.html"> [ANN] ocaml-vclock - 0.0.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_3">Orbitz &#9001;noreply<abbr title="(at) &rarr; @">(at)</abbr>blogger.com (orbitz)&#9002;</span><script type="text/javascript"><!--;
local = "noreply";
h = "blogger.com (orbitz)";
document.getElementById("ocaml_3").innerHTML = '<a href="mailto:' + local + '@' + h + "\" >Orbitz<\/a>";
//--></script></span>, <span class="rss-date">07 Feb 2013</span></span><span class="rss-description"><p>I ported some Erlang vector clock code to Ocaml for fun and learning.  It's not well tested and it hasn't any performance optimizations.  I'm not ready yet but I have some projects in mind to use it so it will likely get fleshed out more. </p> <p>Vector clocks are a system for determining the partial ordering of events in a distributed environment.  You can determine if one value is the ancestor of another, equal, or was concurrently updated.  It is one mechanism that distributed databases, such as Riak, use to automatically resolve some conflicts in data while maintaining availability. </p> <p>The vector clock implementation allows for user defined site id type.  It also allows metadata to be encoded in the site id, which is useful if you want your vector clock to be prunable by encoding timestamps in it. </p> <p>The repo can be found <a href="https://github.com/orbitz/ocaml-vclock/tree/0.0.0">here</a>.  If you'd like to learn more about vector clocks read the wikipedia page <a href="http://en.wikipedia.org/wiki/Vector_clock">here</a>.  The Riak website also has some content on vector clocks <a href="http://docs.basho.com/riak/latest/references/appendices/concepts/Vector-Clocks/">here</a>. </p></span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
