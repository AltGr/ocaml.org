<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="http://ocaml.org/img/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
    <li><a href="http://gitorious.org/search?page=1&q=ocaml">Gitorious</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings/">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://feeds.feedburner.com/amirmc-ocaml">Amir Chaudhry</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss2">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://blog.bentobako.org/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://jobs.github.com/positions.atom?description=ocaml&location=">Github OCaml jobs</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocaml-book.com/blog?format=rss">OCaml Book</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="2725cd9f1034ea5060a28a7d7d44f03e"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=885"> Expiration of SSL certificate and upcoming forge.ocaml.org</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">13 Sep 2013</span></span><span class="rss-description"><pre class="rss-text">Hi everyone,

The wildcard SSL I bought a couple of years ago for *.ocamlcore.org is about to expire. I have decided to not buy a new commercial certificate. I am still considering my options, but I will probably go back to a free SSL cert from CACert. This is not widely supported but other upcoming changes don't push me to invest a lot in the ocamlcore.org domain name.

I will publish more details about the SSL migration to CACert, but if you have problem with by the end of September, check that you trust CACert.

The other big news is that OCaml Labs and RackSpace have provided me with a new host for the forge. This is a very good news because the current host starts to be unreliable.

I will take advantage of this migration to initiate another migration: changing the name of the forge to forge.ocaml.org ! This is a strong signal that the OCaml community is uniting and I am all for it.

Your forge master
Sylvain Le Gall</pre></span>
<a name="e274d9a66167786d803a222d9d616b9b"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/pub/distrib/ocaml-4.01/"> OCaml 4.01.0 released</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml INRIA</span>, <span class="rss-date">12 Sep 2013</span></span><span class="rss-description"></span>
<a name="9096fd236bdf1bfe00d3eb0975343acc"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/monomorphic_let"> Monomophic let in OCaml?</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">11 Sep 2013</span></span><span class="rss-description"><div id="post1"><p>Since version 7, GHC has decided to treat local let-definitions as monomorphic. We check how such a change would fare with OCaml.</p>




<p>In their 2010 paper <a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/constraints/index.htm">Let should not be generalised</a>, Dimitrios Vytiniotis, Simon Peyton Jones and Tom Schrijvers argue that this allows for simpler type inference, with a very limited impact on the existing code base. Independently of the potential benefit of such a choice, it is interesting to see how much polymorphism is really needed in OCaml.</p>
<p>To check the impact of a monomorphic let, I did a small experiment, modifying the OCaml compiler to only generalize let-definitions when there is an explicit polymorphic-type annotation. (Strictly speaking, this is not full let-monomorphism, as we still generalize implicit parts inside the annotation, but this should not make any difference for our experiment.)</p>
<p>The patch can be found <a href="http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/experimental/garrigue/nongeneral-let.diff?view=markup">here</a>.</p>
<a onclick="switchContent('post1','post2')" class="btn" href="#9096fd236bdf1bfe00d3eb0975343acc">Read more...</a></div><div id="post2" style="display: none"><p>Since version 7, GHC has decided to treat local let-definitions as monomorphic. We check how such a change would fare with OCaml.</p>




<p>In their 2010 paper <a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/constraints/index.htm">Let should not be generalised</a>, Dimitrios Vytiniotis, Simon Peyton Jones and Tom Schrijvers argue that this allows for simpler type inference, with a very limited impact on the existing code base. Independently of the potential benefit of such a choice, it is interesting to see how much polymorphism is really needed in OCaml.</p>
<p>To check the impact of a monomorphic let, I did a small experiment, modifying the OCaml compiler to only generalize let-definitions when there is an explicit polymorphic-type annotation. (Strictly speaking, this is not full let-monomorphism, as we still generalize implicit parts inside the annotation, but this should not make any difference for our experiment.)</p>
<p>The patch can be found <a href="http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/experimental/garrigue/nongeneral-let.diff?view=markup">here</a>.</p>
<p>Then I tried to compile various software with this modified compiler. Namely, the OCaml distribution itself, LablGTK, and Core/Async with their dependencies. At the beginning I was fixing missing polymorphism by adding annotations by hand, but soon I came to just recompile the file with the standard compiler when the modified compiler failed.</p>
<p>The results are summarized in this table:</p>
<table>
<thead>
<tr class="header">
<th align="left">Package</th>
<th align="left">Number of files</th>
<th align="left">Failed files</th>
<th align="left">Ratio</th>
<th align="left">Errors/Line</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">OCaml</td>
<td align="left">488</td>
<td align="left">20</td>
<td align="left">4%</td>
<td align="left">1/7000</td>
</tr>
<tr class="even">
<td align="left">LablGTK</td>
<td align="left">101</td>
<td align="left">7</td>
<td align="left">7%</td>
<td align="left">1/3000</td>
</tr>
<tr class="odd">
<td align="left">Oasis setup.ml</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">100%</td>
<td align="left">1/6000</td>
</tr>
<tr class="even">
<td align="left">Sexplib</td>
<td align="left">12</td>
<td align="left">1</td>
<td align="left">8%</td>
<td align="left">1/3500</td>
</tr>
<tr class="odd">
<td align="left">Variantslib</td>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">50%</td>
<td align="left">1/500</td>
</tr>
<tr class="even">
<td align="left">Core_kernel</td>
<td align="left">170</td>
<td align="left">16</td>
<td align="left">9%</td>
<td align="left">1/1800</td>
</tr>
<tr class="odd">
<td align="left">Core</td>
<td align="left">178</td>
<td align="left">4</td>
<td align="left">2%</td>
<td align="left">1/4000</td>
</tr>
<tr class="even">
<td align="left">Async_core</td>
<td align="left">36</td>
<td align="left">4</td>
<td align="left">11%</td>
<td align="left">1/1600</td>
</tr>
<tr class="odd">
<td align="left">Async_unix</td>
<td align="left">31</td>
<td align="left">7</td>
<td align="left">23%</td>
<td align="left">1/1000</td>
</tr>
<tr class="even">
<td align="left">Async_extra</td>
<td align="left">22</td>
<td align="left">2</td>
<td align="left">9%</td>
<td align="left">1/3000</td>
</tr>
<tr class="odd">
<td align="left"> </td>
<td align="left"> </td>
<td align="left"> </td>
<td align="left"> </td>
<td align="left"> </td>
</tr>
<tr class="even">
<td align="left"><em>Total</em></td>
<td align="left">1041</td>
<td align="left">63</td>
<td align="left">6%</td>
<td align="left">1/1700</td>
</tr>
</tbody>
</table>
<p>Since we did not count the number of polymorphic let-definitions, but just the number of failed files, the results are a bit rough. Still, they tell us that about 6% of files did not compile, and that more than 1 out of 1700 lines must be modified.</p>
<p>A comparison with the GHC distribution may be interesting: according to the <a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/constraints/jfp-outsidein.pdf">OutsideIn paper</a> 20 modules out of 533 had to be modified, which is about 4%. This is a bit less than the results for OCaml, but GHC files tend to be shorter. They also found that 12% of packages on Hackage needed modification, which is not very informative, but seems to be much lower than our results for OCaml (a package is supposed to contain several modules).</p>
<p>More important is how easy it is to fix the errors. Namely, most of polymorphic let-definitions fall in one of three cases:</p>
<ul>
<li>function specialized to some local parameter, but still polymorphic</li>
<li>uses of <code>Obj.magic</code></li>
<li>polymorphic variants</li>
</ul>
<p>The second case is a bit special, and one could actually argue that it is better to annotate all uses of <code>Obj.magic</code>. Still, these were probably cases where there was a better place for annotation.</p>
<p>Most cases actually pertain to the first category. Fixing those is not as easy as one could think. The types involved tend to be large, and sometimes difficult to reconstruct by hand. A solution is to move the function to the toplevel, as it will then be automatically generalized, but this has two drawbacks: first, the enclosing function may be large so that the local definition is moved far away from its use point; second, we have to perform lambda-lifting manually, abtracting over local parameters and pass them explicitly at each use point.</p>
<p>Finally, polymorphic variants are particularly troublesome, because the inferred type can be huge, and we are in a situation where we need it to be polymorphic, so that using type abbreviations may not be so easy.</p>
<h3 id="what-conclusions-can-we-draw">What conclusions can we draw?</h3>
<p>Notice that these figures are comparable to experiments conducted when the value restriction had been introduced. In that case, it was argued that eta-expansion solved most situations at a very low syntactic (and computational) cost. For monomorphic let, it suffices to provide an annotation to recover polymorphism, thus the solution is universal, but its cost for the programmer is higher.</p>
<p>Actually, this discussion is mostly academic, because in OCaml we have no specific reason to make local let-definitions monomorphic. By contrast with Haskell which propagates type information through constraint solving, we instead only perform forward propagation, and actually rely on polymorphism to decide when some type information does not depend on the order of type inference and is safe to use. GADTs create problems of their own, but we handle these through <a href="http://cristal.inria.fr/~remy/gadts/">ambivalent types</a>, a mechanism similar in spirit to the tracking of sharing used for type information, which again relies on local polymorphism rather than forgoes it.</p><a onclick="switchContent('post2','post1')" class="btn" href="#9096fd236bdf1bfe00d3eb0975343acc">Hide</a></div></span>
<a name="3eb62f7b5dd4e17948290ecc87812b7e"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.09.10.html"> Caml Weekly News, 10 Sep 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">10 Sep 2013</span></span><span class="rss-description">Pippo: a pretty interesting pre-processor that uses OCaml / OCaml 4.01.0+rc2 / Uutf 0.9.3 &amp; Xmlm 1.2.0 / OCamlPro Highlights, August 2013 / Other Caml News</span>
<a name="d6c831966663fa2d001ee4356a668fc5"></a><span class="rss-header"><span class="rss-title"><a href="http://le-gall.net/sylvain+violaine/blog/index.php?post/2013/09/06/OUnit-2.0-progress%2C-August-2013"> OUnit 2.0 progress, August 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Sylvain Le Gall</span>, <span class="rss-date">06 Sep 2013</span></span><span class="rss-description"><div id="post3"><p>After a long pause, I have resumed my work on <a href="http://ounit.forge.ocamlcore.org">OUnit2</a>. It is going quite well.</p>


<p>The basic features:</p>
<ul>
<li>better configuration setup
<ul>
<li>environment variable</li>
<li>command line options</li>
<li>configuration files</li>
</ul></li>
<li>systematic logging (verbose always on), but output log in a file</li>
<li>allow vim quickfix to jump in the log file where the error has happened</li>
<li>output HTML report</li>
<li>output JUnit report</li>
<li>choose how to run your test:
<ul>
<li>run tests in parallel using processes (auto-detect number of CPU and run as many worker processes)</li>
<li>run tests concurrently using threads</li>
<li>use the old sequential runner</li>
</ul></li>
<li>refactoring of the bracket, now easier to use</li>
<li>refactoring of OUnit2 interface (remove all useless functions)</li>
<li>non-fatal section: allow to fail inside non-fatal section without quitting immediately the whole test</li>
<li>allow to use OUnit1 test inside OUnit2 (smooth the transition)</li>
</ul>

<p>I still need to do the following:</p>
<a onclick="switchContent('post3','post4')" class="btn" href="#d6c831966663fa2d001ee4356a668fc5">Read more...</a></div><div id="post4" style="display: none"><p>After a long pause, I have resumed my work on <a href="http://ounit.forge.ocamlcore.org">OUnit2</a>. It is going quite well.</p>


<p>The basic features:</p>
<ul>
<li>better configuration setup
<ul>
<li>environment variable</li>
<li>command line options</li>
<li>configuration files</li>
</ul></li>
<li>systematic logging (verbose always on), but output log in a file</li>
<li>allow vim quickfix to jump in the log file where the error has happened</li>
<li>output HTML report</li>
<li>output JUnit report</li>
<li>choose how to run your test:
<ul>
<li>run tests in parallel using processes (auto-detect number of CPU and run as many worker processes)</li>
<li>run tests concurrently using threads</li>
<li>use the old sequential runner</li>
</ul></li>
<li>refactoring of the bracket, now easier to use</li>
<li>refactoring of OUnit2 interface (remove all useless functions)</li>
<li>non-fatal section: allow to fail inside non-fatal section without quitting immediately the whole test</li>
<li>allow to use OUnit1 test inside OUnit2 (smooth the transition)</li>
</ul>

<p>I still need to do the following:</p>
<ul>
<li>a test chooser that does smart selection of tests:
<ul>
<li>run the one that failed in the last run and run them first</li>
<li>before re-running the one that was ok, check that all failing tests are now passing otherwise skip the already passing tests.</li>
</ul></li>
<li>timer that makes tests fail if they take too long</li>
<li>allow to parametrize output filename so that you can use <code>OUNIT_OUTPUT_FILE=ounit-$(name),log</code> and have <code>$(name)</code> replace by the test suite name</li>
<li>create locks to avoid accessing the same resources within a single process or the whole application (typically to avoid doing a <code>chdir</code> while another thread is doing a <code>chdir</code> elsewhere)</li>
<li>better logging when using multiple workers</li>
<li>add more tests for the new runners</li>
<li>introduce a 'cached' state to avoid rerunning a test if you can programmaticaly determine that the result will be the same.</li>
<li>create a <code>in_testdata_dir</code> function to locate test data, if any</li>
<li>sys admin (website, release process)</li>
<li>update the whole documentation</li>
</ul>

<p>There is still a lot of work, but the current results are already quite good. The speed improvement of the processes runner is a good thing to shorten test timing (HINT: tester needed!).</p>


<h2>Focus on: the new bracket.</h2>


<p>In OUnit 1, a bracket was very functional:</p>


<pre> bracket 
    (fun () -&gt; "foo")  (* setup *)
    (fun foo -&gt; ())
    (fun foo -&gt; ())  (* tear down *)</pre>


<p>So for common bracket, like <code>bracket_tmpfile</code></p>


<pre>   bracket_tmpfile
       (fun (fn, chn) -&gt;
             (* Do something with chn and fn *)</pre>


<p>The problem is that if you were using 2 or 3 temporary files, the level of indentation was high. I have decide to switch to a more imperative approach, registering the <code>tear down</code> function inside the test context:</p>


<pre>   let (fn1, chn1) = bracket_tmpfile ctxt in
   let (fn2, chn2) = bracket_tmpfile ctxt in
      ....</pre>


<p>This is shorter and clearer (albeit less functional).</p>


<h2>Focus on: non fatal section</h2>


<p>Sometimes, you want to verify a set of properties but to have a clear vision of what is going wrong, you need to do more than one assert.</p>


<p>In OUnit1, you can do:</p>


<pre> assert_equal exp1 v1;
 assert_equal exp2 v2</pre>


<p>But if <code>exp1 &lt;&gt; v1</code>, you quit immediately and you'll never know for <code>exp2</code> and <code>v2</code>.</p>


<p>In OUnit2, you can do:</p>


<pre> non_fatal ctxt (fun ctxt -&gt; assert_equal exp1 v1);
 non_fatal ctxt (fun ctxt -&gt; assert_equal exp2 v2)</pre>


<p>In this new version, you will test both equality and the result of the test will be the worst failure you get (or success if both of them succeed).</p>


<h2>Help wanted</h2>


<p>If you have a long standing issue with OUnit, this is the time to submit a bug.
<a href="https://forge.ocamlcore.org/tracker/?atid=733&amp;group_id=162&amp;func=browse">OUnit BTS</a></p>


<p>If you want to try the dev version of OUnit:</p>


<pre> $&gt; darcs get http://forge.ocamlcore.org/anonscm/darcs/ounit/ounit</pre>


<p>Patches always welcome.</p>


<p>Special thanks to Thomas Wickham who has entirely written OUnitRunnerThreads and kickstarted the processes runner.</p><a onclick="switchContent('post4','post3')" class="btn" href="#d6c831966663fa2d001ee4356a668fc5">Hide</a></div></span>
<a name="06bf61429abfb4a29b6d1fca28c2cd0d"></a><span class="rss-header"><span class="rss-title"><a href="http://erratique.ch/software"> Uutf 0.9.3 and Xmlm 1.2.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Daniel Bünzli</span>, <span class="rss-date">06 Sep 2013</span></span><span class="rss-description"><p>Release of Uutf 0.9.3 and Xmlm 1.2.0. Consult the individual release notes for details.</p></span>
<a name="084d4489740acd01cf618fd8f8ddb477"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/projects/labltk/"> LablTk</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge Projects</span>, <span class="rss-date">06 Sep 2013</span></span><span class="rss-description">LablTk is an interface to the Tcl/Tk GUI framework. It allows to develop GUI applications in a speedy and type safe way. A legacy Camltk interface is included. The OCamlBrowser library viewer is also part of this project.</span>
<a name="27df2f358de2d91f6750cba25663cb71"></a><span class="rss-header"><span class="rss-title"><a href="http://coherentpdf.com/blog/?p=68"> Community Release of PDF Command Line Tools</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Coherent Graphics</span>, <span class="rss-date">05 Sep 2013</span></span><span class="rss-description"><p>The <code>cpdf</code> tool has been available commercially since 2007, and is widely used in industry and government. The same technology is used in the <a href="http://www.coherentpdf.com/proview.html">Proview PDF Editor</a> for the mac.</p>
<p>Now we’re releasing it for free, under a special not-for-commercial-use license.</p>
<p>Binaries for Windows, Mac and Linux, OCaml source code, and full documentation are all available <a href="http://community.coherentpdf.com/">here</a>.</p>
<p>The Coherent PDF Command Line Tools allow you to manipulate existing PDF files in a variety of ways. For example:</p>
<ul>
<li>Merge PDF files together, or split them apart</li>
<li>Encrypt and decrypt</li>
<li>Scale, crop and rotate pages</li>
<li>Read and set document info and metadata</li>
<li>Copy, add or remove bookmarks</li>
<li>Stamp logos, text, dates, page numbers</li>
<li>Add or remove attachments</li>
</ul>
<p> </p>
&lt;script type="text/javascript"&gt;
  addthis_url    = 'http%3A%2F%2Fcoherentpdf.com%2Fblog%2F%3Fp%3D68';
  addthis_title  = 'Community+Release+of+PDF+Command+Line+Tools';
  addthis_pub    = '';
&lt;/script&gt;&lt;script src="http://s7.addthis.com/js/addthis_widget.php?v=12" type="text/javascript"&gt;&lt;/script&gt;</span>
<a name="34f77640bd5230e8242a0d4f26c7404a"></a><span class="rss-header"><span class="rss-title"><a href="http://www.ocamlpro.com/blog/2013/09/04/monthly-08.html"> OCamlPro Highlights, August 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_1">OCamlPro &#9001;louis.gesbert<abbr title="(at) &rarr; @">(at)</abbr>ocamlpro.com (Louis Gesbert)&#9002;</span><script type="text/javascript"><!--;
local = "louis.gesbert";
h = "ocamlpro.com (Louis Gesbert)";
hq = "ocamlpro.com%20(Louis%20Gesbert)";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >OCamlPro<\/a>";
//--></script></span>, <span class="rss-date">04 Sep 2013</span></span><span class="rss-description"><div id="post5"><p>Here is a short report on the different projects we have been working on in August.</p><h2> News from OCamlPro</h2><h3> Compiler Optimizations</h3><p>After our reports on <a href="http://www.ocamlpro.com/blog/2013/07/11/inlining-progress-report.html">better inlining</a> have raised big expectations, we have been working hard on fixing the few remaining bugs. An enhanced alias/constant analysis was added, to provide the information needed to lift some constraints on the maintained invariants, and simplifying some other passes quite a lot in the process. We are now working on reestablishing cross-module inlining, by exporting the new information between compilation units.</p><h3> Memory Profiling</h3><p>On the memory profiling front, now that the compiler patch is well tested and quite stable, we started some cleanup to make it more modular, easier to understand and extend. We also worked on improving the performance of the profiler (the tool that analyzes the heap snapshots), by caching some expensive computations, such as extracting type information from 'cmt' files associated with each location, in files that are shared between executions. We have started testing the profiler on <a href="http://why3.lri.fr/">the Why3 verification platform</a>, and these optimizations proved very useful to analyze longer traces.</p><h3> OPAM Package Manager</h3><a onclick="switchContent('post5','post6')" class="btn" href="#34f77640bd5230e8242a0d4f26c7404a">Read more...</a></div><div id="post6" style="display: none"><p>Here is a short report on the different projects we have been working on in August.</p><h2> News from OCamlPro</h2><h3> Compiler Optimizations</h3><p>After our reports on <a href="http://www.ocamlpro.com/blog/2013/07/11/inlining-progress-report.html">better inlining</a> have raised big expectations, we have been working hard on fixing the few remaining bugs. An enhanced alias/constant analysis was added, to provide the information needed to lift some constraints on the maintained invariants, and simplifying some other passes quite a lot in the process. We are now working on reestablishing cross-module inlining, by exporting the new information between compilation units.</p><h3> Memory Profiling</h3><p>On the memory profiling front, now that the compiler patch is well tested and quite stable, we started some cleanup to make it more modular, easier to understand and extend. We also worked on improving the performance of the profiler (the tool that analyzes the heap snapshots), by caching some expensive computations, such as extracting type information from 'cmt' files associated with each location, in files that are shared between executions. We have started testing the profiler on <a href="http://why3.lri.fr/">the Why3 verification platform</a>, and these optimizations proved very useful to analyze longer traces.</p><h3> OPAM Package Manager</h3><p>On OPAM, we are still preparing the release of version 1.1. The release date has shifted a little bit -- it is now planned to happen mid-September, before the <a href="http://ocaml.org/meetings/ocaml/2013/">OCaml'2013 meeting</a> -- because we are focusing on getting speed and stability improvements in a very good shape. We are now relying on <a href="https://github.com/OCamlPro/opam-rt">opam-rt</a>, our new regression testing infrastructure, to be sure to get the best level of quality for the release.</p><p>Regarding the package and compiler <a href="https://github.com/OCamlPro/opam-repository">metadata</a>, we are very proud to announce that our community has crossed an important line, with more than 100 contributors and 500 different packages ! In order to ensure that these hours of packaging efforts continue to benefit everyone in the OCaml community in the future, we are (i) clarifying the license for all the metadata in the package repository to use <a href="https://github.com/OCamlPro/opam-repository/issues/955">CC0</a> and (ii) discussing with <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/">OCamlLabs</a> and the different stakeholders to migrate all the metadata to the <a href="http://ocaml.org">ocaml.org</a> infrastructure.</p><h3> Simple Build Manager</h3><p>We also made progress on the design of our simple build-manager for OCaml, <a href="http://www.typerex.org/ocp-build.html">ocp-build</a>. The <a href="https://github.com/OCamlPro/ocp-build/tree/next">next branch in the GIT repository</a> features a new, much more expressive package description language : ocp-build can now be used to build arbitrary files, for example to generate new source files, or to compile files in other languages than OCaml. We successfully used the new language to build <a href="http://try.ocamlpro.com">Try-ocaml</a> and <a href="http://www.typerex.org/ocplib-wxOCaml.html">wxOCaml</a>, completely avoiding the use of "make".</p><p>It can also automatically generate <a href="http://www.typerex.org/ocplib-wxOCaml/doc.0.1/index.html">basic HTML documentation</a> for libraries using ocamldoc with "ocp-build make -doc". There are still some improvements on our TODO list before an official release, for example improving the support of META files, but we are getting very close ! ocp-build is very efficient: compiling <a href="http://www.typerex.org/ocp-build/merlin.ocp">Merlin with ocp-build</a> takes only 4s on a quad-core while ocamlbuild needs 13s in similar conditions and with the same parallelisation settings.</p><h3> Graphics on Try-OCaml</h3><p><a href="http://try.ocamlpro.com">Try-OCaml</a> has been improved with a dedicated implementation of the Graphics module: type "lesson 19", and you will get some fun examples, including a simple game by Sylvain Conchon.</p><h3> Alt-Ergo Theorem Prover</h3><p>We are also happy to welcome Mohamed Iguernelala in the team, starting at the beginning of September. Mohamed is a great OCaml programmer, and he will be working on the Alt-Ergo theorem prover, an SMT-solver in OCaml developed by Sylvain Conchon, and heavily used in the industry for safety-critical software (aircrafts, trains, etc.).</p><h2>News from the INRIA-OCamlPro Lab</h2><h3> Multi-runtime OCaml</h3><p>After thorough testing, the <a href="https://github.com/lucasaiu/ocaml">multi-runtime branch</a> is getting stable enough for being submitted upstream. The build system has been fixed to enable the modified OCaml to run, in single-runtime mode, on architectures for which no multi-runtime port exists yet, while maintaining API compatibility with mainline OCaml. Thanks to some clever preprocessor hacks, the performance impact in single-runtime mode will be negligible.</p><h3> Whole-Program Analysis</h3><p>Our work on <a href="https://github.com/thomasblanc/ocaml-data-analysis/">whole program analysis</a>, while still in the early stages, is quickly getting forward, and we managed to generate well-formed graphs representing a whole OCaml program. The tool can be fed sources and .cmt files, and at each point of the program, will compute all of the plausible values every variable can take, plus the calculations that allowed to get those values. We hope to have it ready for testing the detection of uncaught exceptions soon.</p><h3> Editing OCaml Online</h3><p>We also made a lot of progress in our Online IDE for OCaml, with code generation within the browser. The prototype is now quite robust, and some tricky bugs with the representation of integers and floats in Javascript have been fixed, so that the generated code is always the same as the one generated by a standalone compiler. Also, the interface now allows the user to have a full hierarchy of files and projects in his workspace. There is still some work to be done on improving the design, but we are very exited with the possibility to develop in OCaml without installing anything on the computer !</p><h3> Scilab Code Analysis</h3><p>For the <a href="http://www.richelieu.pro">Richelieu</a> project, after testing some type inference analysis on Scilab code in the last months, we have now started to implement a new tool, <a href="https://github.com/OCamlPro/scilint">Scilint</a>, to perform some of this analysis on whole Scilab projects and report warnings on suspect code. We hope this tool will soon be used by every Scilab user, to avoid wasting hours of computation before reaching an easy-to-catch error, such as a misspelled -- thus undefined -- variable.</p><h2> Meeting with the Community</h2><p>Some of us are going to present part of this work at <a href="http://ocaml.org/meetings/ocaml/2013/program.html">OCaml'2013</a>, the OCaml Users and Developers Workshop in Boston. We expect it to be a good opportunity to get some feedback on these projects from the community!</p><a onclick="switchContent('post6','post5')" class="btn" href="#34f77640bd5230e8242a0d4f26c7404a">Hide</a></div></span>
<a name="b65f7d2c73b245f701bbff2734d6f93c"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.09.03.html"> Caml Weekly News, 03 Sep 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">03 Sep 2013</span></span><span class="rss-description">Ocamlnet-3.7.3 / OCaml 4.01.0 RC1 / Literate (sort-of) programming in OCaml / Pippo: a pretty interesting pre-processor that uses OCaml / Other Caml News</span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
