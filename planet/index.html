<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="https://static.ocamlcore.org/official/images/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="../books.html#manual">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
    <li><a href="http://gitorious.org/search?page=1&q=ocaml">Gitorious</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings/">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://www.ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://feeds.feedburner.com/amirmc-ocaml">Amir Chaudhry</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://blog.bentobako.org/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://jobs.github.com/positions.atom?description=ocaml&location=">Github OCaml jobs</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocaml-book.com/blog?format=rss">OCaml Book</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="1fda0bb0a96f4889699d1189f4eed81d"></a><span class="rss-header"><span class="rss-title"><a href="http://anil.recoil.org/2013/06/17/real-world-ocaml-beta-available"> Phew, Real World OCaml beta now available.</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Anil Madhavapeddy</span>, <span class="rss-date">16 Jun 2013</span></span><span class="rss-description"><div id="post1"><p>When I finished writing my PhD, I swore (as most recent graduates do) to never write a thesis again. Instead, life would be a series of pleasantly short papers, interspersed with the occasional journal article, and lots of not-writing-huge-book-activity in general.</p> <a href="http://realworldocaml.org"><img src="http://anil.recoil.org/images/oreilly-cover.gif" align="right" style="padding-left: 15px;"/></a> <p>Then <a href="http://cufp.org/conference/2011">CUFP 2011</a> happened, and I find myself in a bar in Tokyo with <a href="https://twitter.com/yminsky">Yaron Minsky</a> and <a href="http://monkey.org/~marius">Marius Eriksen</a>, and a dangerous bet ensued. A few short weeks after that, and Yaron and I are chatting with <a href="https://plus.google.com/111219778721183890368">Jason Hickey</a> in California about writing a book about the language we love. I’m still telling myself that this will never actually happen, but then everyone’s favourite Californirishman <a href="http://www.serpentine.com/blog/">Bryan O’Sullivan</a> puts us in touch with O’Reilly, who published his excellent <a href="http://realworldhaskell.org">Haskell</a> tome.</p> <a onclick="switchContent('post1','post2')" class="btn" href="#1fda0bb0a96f4889699d1189f4eed81d">Read more...</a></div><div id="post2" style="display: none"><p>When I finished writing my PhD, I swore (as most recent graduates do) to never write a thesis again. Instead, life would be a series of pleasantly short papers, interspersed with the occasional journal article, and lots of not-writing-huge-book-activity in general.</p> <a href="http://realworldocaml.org"><img src="http://anil.recoil.org/images/oreilly-cover.gif" align="right" style="padding-left: 15px;"/></a> <p>Then <a href="http://cufp.org/conference/2011">CUFP 2011</a> happened, and I find myself in a bar in Tokyo with <a href="https://twitter.com/yminsky">Yaron Minsky</a> and <a href="http://monkey.org/~marius">Marius Eriksen</a>, and a dangerous bet ensued. A few short weeks after that, and Yaron and I are chatting with <a href="https://plus.google.com/111219778721183890368">Jason Hickey</a> in California about writing a book about the language we love. I’m still telling myself that this will never actually happen, but then everyone’s favourite Californirishman <a href="http://www.serpentine.com/blog/">Bryan O’Sullivan</a> puts us in touch with O’Reilly, who published his excellent <a href="http://realworldhaskell.org">Haskell</a> tome.</p> <p>O’Reilly arranged everything incredibly fast, with our editor <a href="http://radar.oreilly.com/andyo">Andy Oram</a> driving us through the process. We decided early on that we wanted to write a book that had opinions based our personal experience: about how OCaml code should be written, about the standard library involved, and generally making functional programming more accessible. Along the way, we’ve been working incredibly hard on the underlying software platform too, with <a href="http://ocaml.janestreet.com">Jane Street</a>, <a href="http://ocamlpro.com">OCamlPro</a> and my own group <a href="http://ocaml.io">OCaml Labs</a> working together on all the pieces. There’s still a lot of work left to do, of course, but we’re right on track to get all this released very soon now.</p> <p>So, without further ado, I was very pleased to send this e-mail this morning. (and once again reaffirm my committment to never writing another book ever again. Until next time!)</p> <blockquote> <p>Yaron Minsky, Jason Hickey and I are pleased to announce the beta release of our forthcoming O’Reilly book, called “Real World OCaml”, available online at <a href="http://realworldocaml.org">http://realworldocaml.org</a></p> <p>The book is split into three parts: language concepts, tools and techniques, and understanding the runtime. As promised last year, we are making a public beta available for community review and to help us hunt down inaccuracies and find areas that need more clarification.</p> <p>We’ve had the book in closed alpha for six months or so and have developed a feedback system that uses Github to record your comments. This lets us follow up to each review with clarifications and keep track of our progress in fixing issues. During alpha, we’ve received over 1400 comments in this fashion (and addressed the vast majority of them!). However, since we anticipate more comments coming in from a public beta, we would request that you read the FAQ to avoid drowning us in repeat comments: <a href="http://www.realworldocaml.org/#faq">http://www.realworldocaml.org/#faq</a>.</p> <p>(TL;DR followup another comment on Github directly if you can instead of creating a new issue via the web interface)</p> <p>This release is available in HTML format online at: <a href="http://realworldocaml.org">http://www.realworldocaml.org</a></p> <p>O’Reilly is currently preparing a Rough Cuts release that will make the beta available as PDF and in popular eBook formats. We anticipate that this will be available later this week, and I’ll send a followup when that happens.</p> <p>Finally, we would especially like to thank our alpha reviewers. Their <a href="https://github.com/ocamllabs/rwo-comments/issues">feedback</a> has been invaluable to the beta release. The book also includes substantial contributions to individual chapters from Jeremy Yallop (FFI), Stephen Weeks (GC) and Leo White (objects).</p> <p>If you have any comments that you’d like to send directly by e-mail, please contact us at <span id="ocaml_1">rwo-authors<abbr title="(at) &rarr; @">(at)</abbr>recoil.org</span><script type="text/javascript"><!--;
local = "rwo-authors";
h = "recoil.org";
hq = "recoil.org";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >" + local + '@' + h + "<\/a>";
//--></script>.</p> <p>Release notes for beta1:</p> <ul> <li>The first-class modules chapter is incomplete, pending some portability improvements to the ocaml-plugins Core library.</li> <li>The binary serialization chapter is also incomplete, but has just enough to teach you about the Async RPC library.</li> <li>The installation chapter will be revised in anticipation of the OCaml 4.1 release, and is currently quite source-based.</li> <li>The packaging and build systems chapter hasn’t been started yet. We’re still deciding whether or not to make this an online pointer rather than a print chapter, since it’s likely to change quite fast.</li> <li>We are preparing exercises per chapter that are not included in this particular beta release, but will be available online as soon as possible.</li> <li>The code examples will all be clonable as a separate repository in beta2.</li> </ul> <p>best, Yaron, Jason and Anil</p> </blockquote><a onclick="switchContent('post2','post1')" class="btn" href="#1fda0bb0a96f4889699d1189f4eed81d">Hide</a></div></span>
<a name="e42a0ef7e88cf0ff8186dbe1c9f44d9b"></a><span class="rss-header"><span class="rss-title"><a href="http://syntaxexclamation.wordpress.com/?p=443"> New draft: Proofs, upside down</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Matthias Puech</span>, <span class="rss-date">17 Jun 2013</span></span><span class="rss-description"><div id="post3"><p>There is a new draft on my <a href="http://www.pps.univ-paris-diderot.fr/~puech/">web page</a>, that should be of interest to those who enjoyed my posts about <a href="http://syntaxexclamation.wordpress.com/2011/08/31/reversing-data-structures/" title="Reversing data structures">reversing data structures</a> and the <a href="http://syntaxexclamation.wordpress.com/2011/09/01/reverse-natural-deduction-and-get-sequent-calculus/" title="Reverse natural deduction and get sequent calculus">relation between natural deduction and sequent calculus</a>. It is an article submitted to <a href="http://aplas2013.soic.indiana.edu/">APLAS 2013</a>, and it is called <em><a href="http://www.pps.univ-paris-diderot.fr/~puech/upside.pdf" title="Proofs, upside down">Proofs, upside down.</a></em> In a nutshell, I am arguing for the use of functional PL tools, in particular classic functional program transformations, to understand and explain proof theory phenomena. Here, I show that there is the same relationship between natural deduction and (a restriction of) the sequent calculus than between this recursive function:</p> <pre class="brush: fsharp; title: ; notranslate">let rec tower_rec = function | [] -&gt; 1 | x :: xs -&gt; x ∗∗ tower_rec xs let tower xs = tower_rec xs </pre> <p>written in “direct style”, and that equivalent, iterative version:</p> <pre class="brush: fsharp; title: ; notranslate">let rec tower_acc acc = function | [] -&gt; acc | x :: xs -&gt; tower_acc (x ∗∗ acc) xs let tower xs = tower_acc 1 (List.rev xs) </pre> <p>written in “accumulator-passing style”. And that relationship is the composition of CPS-transformation, defunctionalization and reforestation, the well-known transformations we all came to know and love!</p> <a onclick="switchContent('post3','post4')" class="btn" href="#e42a0ef7e88cf0ff8186dbe1c9f44d9b">Read more...</a></div><div id="post4" style="display: none"><p>There is a new draft on my <a href="http://www.pps.univ-paris-diderot.fr/~puech/">web page</a>, that should be of interest to those who enjoyed my posts about <a href="http://syntaxexclamation.wordpress.com/2011/08/31/reversing-data-structures/" title="Reversing data structures">reversing data structures</a> and the <a href="http://syntaxexclamation.wordpress.com/2011/09/01/reverse-natural-deduction-and-get-sequent-calculus/" title="Reverse natural deduction and get sequent calculus">relation between natural deduction and sequent calculus</a>. It is an article submitted to <a href="http://aplas2013.soic.indiana.edu/">APLAS 2013</a>, and it is called <em><a href="http://www.pps.univ-paris-diderot.fr/~puech/upside.pdf" title="Proofs, upside down">Proofs, upside down.</a></em> In a nutshell, I am arguing for the use of functional PL tools, in particular classic functional program transformations, to understand and explain proof theory phenomena. Here, I show that there is the same relationship between natural deduction and (a restriction of) the sequent calculus than between this recursive function:</p> <pre class="brush: fsharp; title: ; notranslate">let rec tower_rec = function | [] -&gt; 1 | x :: xs -&gt; x ∗∗ tower_rec xs let tower xs = tower_rec xs </pre> <p>written in “direct style”, and that equivalent, iterative version:</p> <pre class="brush: fsharp; title: ; notranslate">let rec tower_acc acc = function | [] -&gt; acc | x :: xs -&gt; tower_acc (x ∗∗ acc) xs let tower xs = tower_acc 1 (List.rev xs) </pre> <p>written in “accumulator-passing style”. And that relationship is the composition of CPS-transformation, defunctionalization and reforestation, the well-known transformations we all came to know and love!</p> <p>I hope you enjoy it. Of course, any comment will be <i>much</i> appreciated, so don’t hesitate to drop a line below!</p> <blockquote><p> <strong>Proofs, upside down</strong><br/> <strong>A functional correspondence between natural deduction and the sequent calculus</strong><br/> It is well-known in proof theory that sequent calculus proofs differ from natural deduction proofs by “reversing” elimination rules upside down into left introduction rules. It is also well-known that to each recursive, functional program corresponds an equivalent iterative, accumulator-passing program, where the accumulator stores the continuation of the iteration, in “reversed” order. Here, we compose these remarks and show that a restriction of the intuitionistic sequent calculus, LJT, is exactly an accumulator-passing version of intuitionistic natural deduction NJ. More precisely, we obtain this correspondence by applying a series of off-the-shelf program transformations à la Danvy et al. on a type checker for the bidirectional λ-calculus, and get a type checker for the λ-calculus, the proof term assignment of LJT. This functional correspondence revisits the relationship between natural deduction and the sequent calculus by systematically deriving the rules of the latter from the former, and allows to derive new sequent calculus rules from the introduction and elimination rules of new logical connectives. </p></blockquote> <br/> <a href="http://feeds.wordpress.com/1.0/gocomments/syntaxexclamation.wordpress.com/443/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/syntaxexclamation.wordpress.com/443/" alt="" border="0"/></a> <img src="http://stats.wordpress.com/b.gif?host=syntaxexclamation.wordpress.com&amp;blog=14690639&amp;post=443&amp;subd=syntaxexclamation&amp;ref=&amp;feed=1" alt="" height="1" border="0" width="1"/><a onclick="switchContent('post4','post3')" class="btn" href="#e42a0ef7e88cf0ff8186dbe1c9f44d9b">Hide</a></div></span>
<a name="8ccf49635597ab1363c3f17cb2d09cd3"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.06.18.html"> Caml Weekly News, 18 Jun 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">18 Jun 2013</span></span><span class="rss-description">pareto -- OCaml statistics library / Ocamlnet-3.6.5 / Real World OCaml beta1 available / Other Caml News</span>
<a name="5fd81dc737c33dee2a17e142e0ab4623"></a><span class="rss-header"><span class="rss-title"><a href="http://functionaljobs.com/jobs/154-senior-software-developer-functional-programmer-at-vector-fabrics"> Senior software developer/Functional programmer at Vector Fabrics (Full-time)</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Functional Jobs</span>, <span class="rss-date">18 Jun 2013</span></span><span class="rss-description"><div id="post5"><p>Vector Fabrics is hiring: we are looking for a top-notch programmer to extend our program-analysis and parallelization products. You design and implement algorithms to assist the programmer to create a parallel design from a sequential C or C++ program. You work with our international team of world-class computer scientists and experts in the Haskell / OCaml functional programming languages.</p> <p>Your work is at the forefront of technology, giving you the opportunity to publish your work in major conferences and directly cooperate with processor design companies and domain-specific application vendors.</p> <p>As we are a startup company, you will quickly have a major impact on our products and get to know all aspects of product creation. You will be part of a strongly committed development team and contribute to our agile development process and automated test suites. Interested? Send your CV, GitHub account or other proof of what you can do to <span class="spam-protect"><span class="user">jobs</span> [at] <span class="host">vectorfabrics [dot] com</span></span>.</p> <h3>Responsibilities</h3> <a onclick="switchContent('post5','post6')" class="btn" href="#5fd81dc737c33dee2a17e142e0ab4623">Read more...</a></div><div id="post6" style="display: none"><p>Vector Fabrics is hiring: we are looking for a top-notch programmer to extend our program-analysis and parallelization products. You design and implement algorithms to assist the programmer to create a parallel design from a sequential C or C++ program. You work with our international team of world-class computer scientists and experts in the Haskell / OCaml functional programming languages.</p> <p>Your work is at the forefront of technology, giving you the opportunity to publish your work in major conferences and directly cooperate with processor design companies and domain-specific application vendors.</p> <p>As we are a startup company, you will quickly have a major impact on our products and get to know all aspects of product creation. You will be part of a strongly committed development team and contribute to our agile development process and automated test suites. Interested? Send your CV, GitHub account or other proof of what you can do to <span class="spam-protect"><span class="user">jobs</span> [at] <span class="host">vectorfabrics [dot] com</span></span>.</p> <h3>Responsibilities</h3> <ul> <li>Design and implement software optimization (e.g. parallelization) algorithms for CPUs and GPUs;</li> <li>Thoroughly test your code, create automated test suites;</li> <li>Contribute to our agile development planning and process;</li> <li>Analyze complex customer applications for optimization opportunities and translate this to new analysis algorithms.</li> </ul> <h3>Profile</h3> <ul> <li>Your friends and colleagues describe you as a superb programmer; your programming ability is way above average;</li> <li>Demonstrable experience in design and implementation of complex software applications; prior experience in functional programming languages is preferred;</li> <li>You continuously surprise us with your creative yet pragmatic solutions for complex software problems;</li> <li>You are strongly committed to deliver working software as early as possible;</li> <li>You work against very high quality standards. Refactoring is your bread and butter, pair-programming is how you prefer to review your code;</li> <li>Whatever technologies, languages, or development environments you've been using, we expect you have mastered them in depth, and we expect that you will be able to master any technology, language, or development environment that we need in the future;</li> <li>Excellent command of written and spoken English.</li> </ul> <h3>Education</h3> <p>MSc, MEng or PhD in Computer Science or significant relevant experience.</p> <h3>About Vector Fabrics</h3> <p>Vector Fabrics is a high-tech software company, developing tools for embedded multicore programming. Its technology and expertise is getting widespread recognition in the industry as being innovative and unique in their ability to address heterogeneous multicore application-specific silicon platforms. Due to the advanced nature of its tools, Vector Fabrics operates at the forefront of the next generation of embedded platforms for diverse markets ranging from supercomputers to automotive to cell phones.</p> <p>Vector Fabrics puts absolute priority on hiring top class individuals in key positions. Vector Fabrics’ team profile is exceptional and its ambition is to hire only individuals that match or surpass that profile. The company pays top salary and offers a challenging, engaging and stimulating work environment with a high degree of responsibility.</p> <p>Get information on <a href="http://functionaljobs.com/jobs/154-senior-software-developer-functional-programmer-at-vector-fabrics">how to apply</a> for this position.</p><a onclick="switchContent('post6','post5')" class="btn" href="#5fd81dc737c33dee2a17e142e0ab4623">Hide</a></div></span>
<a name="7069e8d84401cf4d60134f65a00da609"></a><span class="rss-header"><span class="rss-title"><a href="http://math.andrej.com/?p=1419"> The HoTT book</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Andrej Bauer</span>, <span class="rss-date">20 Jun 2013</span></span><span class="rss-description"><div id="post7"><p>The HoTT book is finished!</p> <p>Since spring, and even before that, I have participated in a great collaborative effort on writing a book on Homotopy Type Theory. It is finally finished and ready for public consumption. You can get the book freely at <a href="http://homotopytypetheory.org/book/">http://homotopytypetheory.org/book/</a>. Mike Shulman has written <a href="http://golem.ph.utexas.edu/category/2013/06/the_hott_book.html">about the contents of the book</a>, so I am not going to repeat that here. Instead, I would like to comment on the socio-technological aspects of making the book, and in particular about what we learned from open-source community about collaborative research.</p> <p><span id="more-1419"></span></p> <a onclick="switchContent('post7','post8')" class="btn" href="#7069e8d84401cf4d60134f65a00da609">Read more...</a></div><div id="post8" style="display: none"><p>The HoTT book is finished!</p> <p>Since spring, and even before that, I have participated in a great collaborative effort on writing a book on Homotopy Type Theory. It is finally finished and ready for public consumption. You can get the book freely at <a href="http://homotopytypetheory.org/book/">http://homotopytypetheory.org/book/</a>. Mike Shulman has written <a href="http://golem.ph.utexas.edu/category/2013/06/the_hott_book.html">about the contents of the book</a>, so I am not going to repeat that here. Instead, I would like to comment on the socio-technological aspects of making the book, and in particular about what we learned from open-source community about collaborative research.</p> <p><span id="more-1419"></span></p> <p>We are a group of two dozen mathematicians who wrote a 600 page book in less than half a year. This is quite amazing, since mathematicians do not normally work together in large groups. In a small group they can get away with using obsolete technology, such as sending each other source LaTeX files by email, but with two dozen people even Dropbox or any other file synchronization system would have failed miserably. Luckily, many of us are computer scientists disguised as mathematicians, so we knew how to tackle the logistics. We used <a href="http://git-scm.com/">git</a> and <a href="https://github.com/">github.com</a>. In the beginning it took some convincing and getting used to, although it was not too bad. In the end the repository served not only as an archive for our files, but also as a central hub for planning and discussions. For several months I checked github more often than email and Facbook. Github <em>was</em> my Facebook (without the cute kittens). If you do not know about tools like git but you write scientific papers (or you create any kind of digital content) you really, really should learn about <a href="https://en.wikipedia.org/wiki/Revision_control">revision control</a> systems. Even as a sole author of a paper you will profit from learning how to use one, not to mention that you can make <a href="https://vimeo.com/68761218">pretty videos</a> of how you wrote your paper.</p> <p>But more importantly, the spirit of collaboration that pervaded our group at the <a href="http://www.ias.edu/">Institute for Advanced Study</a> was truly amazing. We did not fragment. We talked, shared ideas, <a href="http://video.ias.edu/taxonomy/term/78">explained things</a> to each other, and completely forgot who did what (so much in fact that we had to put some effort into reconstruction of history lest it be forgotten forever). The result was a substantial increase in productivity. There is a lesson to be learned here (other than the fact that the Institute for Advanced Study is the world’s premier research institution), namely that mathematicians benefit from being a little less possessive about their ideas and results. I know, I know, academic careers depend on proper credit being given and so on, but really those are just the idiosyncrasies of our time. If we can get mathematicians to share half-baked ideas, not to worry who contributed what to a paper, or even who the authors are, then we will reach a new and unimagined level of productivity. Progress is made by those who dear the break rules.</p> <p>Truly open research habitats cannot be obstructed by copyright, profit-grabbing publishers, patents, commercial secrets, and funding schemes that are based on faulty achievement metrics. Unfortunately we are all caught up in a system which suffers from all of these evils. But we made a small step in the right direction by making the <a href="https://github.com/HoTT/book">book source code freely available</a> under a permissive Creative Commons license. Anyone can take the book and modify it, send us improvements and corrections, translate it, or even sell it without giving us any money. (If you twitched a little bit when you read that sentence then the system has gotten to you.)</p> <p>We decided not to publish the book with an academic publisher at present because we wanted to make it available to everyone fast and at no cost. The book can be freely downloaded, as well as bought cheaply in <a href="http://www.lulu.com/shop/univalent-foundations-project/homotopy-type-theory-hardcover/hardcover/product-21076997.html">hardcover</a> and <a href="http://www.lulu.com/shop/univalent-foundations-project/homotopy-type-theory-paperback/paperback/product-21077021.html">paperback</a> versions from <a href="http://lulu.com/">lulu.com</a>. (When was the last time you paid under $30 for a 600 page hardcover academic monograph?) Again, I can feel some people thinking “oh but a real academic publisher bestows quality”. This sort of thinking is reminiscent of Wikipedia vs. Britannica arguments, and we all know how that story ended. Yes, good quality of research must be ensured. But once we accept the fact that anyone can publish anything on the Internet for the whole world to see, and make a cheap professionally looking book out of it, we quickly realize that censure is not effective anymore. Instead we need a decentralized system of endorsments which cannot be manipulated by special interest groups. Things are moving in this direction with the recently established <a href="https://selectedpapers.net/">Selected Papers Network</a> and similar efforts. I hope these will catch on.</p> <p>However, there is something else we can do. It is more radical, but also more useful. Rather than letting people only evaluate papers, why not give them a chance to participate and improve them as well? Put all your papers on github and let others discuss them, open issues, fork them, improve them, and send you corrections. Does it sound crazy? Of course it does, open source also sounded crazy when <a href="https://groups.google.com/group/net.unix-wizards/msg/4dadd63a976019d7?dmode=source&amp;hl=en">Richard Stallman announced</a> his manifesto. Let us be honest, who is going to steal your LaTeX source code? There are much more valuable things to be stolen. If you are tenured professor you can afford to lead the way. Have your grad student teach you git and put your stuff somewhere publicly. Do not be afraid, they tenured you to do such things.</p> <p>So we are inviting everyone to help us improve the book by participating on github. You can leave comments, point out errors, or even better, make corrections yourself! We are not going to worry who you are, how much you are contributing, and who shall take credit. The only thing that matters is whether your contributions are any good.</p> <p>My last observation is about formalization of mathematics. Mathematicians like to imagine that their papers could in principle be formalized in set theory. This gives them a feeling of security, not unlike the one experienced by a devout man entering a venerable cathedral. It is a form of faith professed by logicians. Homotopy Type Theory is an alternative foundation to set theory. We too claim that ordinary mathematics can in principle be formalized in homotopy type theory. But guess what, you do not have to take our word for it! We have formalized the hardest parts of the HoTT book and verified the proofs with computer proof assistants. Not <a href="https://github.com/HoTT/HoTT">once</a> but <a href="https://github.com/HoTT/HoTT-Agda">twice</a>. And we formalized <em>first</em>, then we wrote the book because it was easier to formalize. We win on all counts (if there is a race).</p> <p>I hope you like the book, it contains an amazing amount of new mathematics.</p><a onclick="switchContent('post8','post7')" class="btn" href="#7069e8d84401cf4d60134f65a00da609">Hide</a></div></span>
<a name="cd0e580577c7fb67e6d4b8833cebf547"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/making-it-easier-for-beginners-to-learn-ocaml"> Making it easier for beginners to learn OCaml</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">21 Jun 2013</span></span><span class="rss-description"><div id="post9"><p>This blog post is from Arthur Charguéraud, whom we recently had the pleasure to see again in Rocquencourt. It comes from a recent submission to the <a href="http://ocaml.org/meetings/ocaml/2013/">OCaml 2013 Workshop</a>, and is a discussion of some things that could be improved to make OCaml a better teaching language.</p> <p>Of course, while everyone agrees in principle that tooling is good and that making the language simple to learn (and teach) is a noble cause, the details of the proposal are controversial. We hope that our dear readers will understand this as a first position statement to stimulate discussion and contribution, rather than a cause for outrage – although some here would agree that suggesting <code>!r</code> as a lvalue is somewhat heretic.</p> <hr/> <h3 id="making-it-easier-for-beginners-to-learn-ocaml">Making it easier for beginners to learn OCaml</h3> <a onclick="switchContent('post9','post10')" class="btn" href="#cd0e580577c7fb67e6d4b8833cebf547">Read more...</a></div><div id="post10" style="display: none"><p>This blog post is from Arthur Charguéraud, whom we recently had the pleasure to see again in Rocquencourt. It comes from a recent submission to the <a href="http://ocaml.org/meetings/ocaml/2013/">OCaml 2013 Workshop</a>, and is a discussion of some things that could be improved to make OCaml a better teaching language.</p> <p>Of course, while everyone agrees in principle that tooling is good and that making the language simple to learn (and teach) is a noble cause, the details of the proposal are controversial. We hope that our dear readers will understand this as a first position statement to stimulate discussion and contribution, rather than a cause for outrage – although some here would agree that suggesting <code>!r</code> as a lvalue is somewhat heretic.</p> <hr/> <h3 id="making-it-easier-for-beginners-to-learn-ocaml">Making it easier for beginners to learn OCaml</h3> <p>Unless having a private tutor, learning OCaml as a first programming language can be extremely frustrating at first, if not completely discouraging. Based on a long experience of teaching OCaml, based on the analysis of a large database of failing-to-compile OCaml source code, and based on the recent arguments put forward for justifying the use of Python instead of OCaml for teaching programming, we argue that it would be possible, with relatively little effort, to make OCaml significantly more accessible to beginners. More precisely, we describe parsing tools, minor syntax extensions, type-checking tools and libraries that, altogether, should make OCaml much easier to learn.</p> <h3 id="problems">Problems</h3> <p>We have observed that OCaml is really hard for beginners to learn without help. The main cause is the terribly poor reporting of static and dynamic errors. We describe a few striking examples below.</p> <ul> <li><p>Syntax errors are often reported near the end of a top-level definition although the error is actually located in the middle of the definition. This situation occurs in particular when replacing a <code>in</code> keyword with a semicolon, a very frequent mistake.</p></li> <li><p>The instruction contained in the <code>then</code> branch of a conditional cannot be followed by a semicolon, contrary to the instruction in the <code>else</code> branch (and to instructions in regular sequences). The logic of semicolon being a separator and not a terminator is totally incomprehensible for beginners.</p></li> <li><p>Very early in their OCaml programming experience, beginners face type errors of the form "foo has type <code>int -&gt; int -&gt; int</code> whereas it is expected to be of type <code>int</code>", as a consequence of typos or missing parentheses. The problem is that they encounter this kind of error messages at a point where they do not know anything about arrow types or even about functions.</p></li> <li><p>Exceptions such as "array index out of bounds" are reported without a mention of the index involved, nor of the size of the array, nor of the line at which the incorrect array access has been performed. This lack of details slows down debugging. (Using a full-featured debugger is often not an option at this stage.)</p></li> </ul> <p>Besides our in-situ teaching experience, we have been teaching OCaml through a (French-speaking) website that features online evaluation of exercises (<a href="http://gallium.inria.fr/blog/www.france-ioi.org">www.france-ioi.org</a>).</p> <p>Our analysis of submitted programs confirms that the kind of issues reported above are extremely frequent and very time-consuming for beginners to solve on their own. We observed that a significant number of beginners ended up giving up the OCaml tutorial, especially when they were not in a position to obtain help from a nearby OCaml guru.</p> <p>In addition to the issues described above, which are well-known to everyone who has taught programming using OCaml, we can also learn about the limitations of OCaml from teachers who have introduced their students to programming using other languages. In particular, we have observed a recent and significant trend to use Python as a first programming language. When told about the Python trend, OCaml experts usually express their disappointment through a sentence of the kind: "What!? Python?! But it does not even have static types! Not to mention that variable scoping is broken!". Despite the wiseness captured by this comment, a number of qualified teachers and researchers have put forwards a collection of arguments to justify the choice of Python over OCaml.</p> <ul> <li><p>Python provides a simple way to execute a program (<code>python source.py</code>), avoiding the need to first compile the program and then execute it. OCaml supports a somewhat similar feature (<code>ocaml source.ml</code>), however this feature is not advertised and, even worse, it executes top-level definitions one by one before type-checking the entire source file.</p></li> <li><p>Python, unlike OCaml, features a generic printing function, which is very handy for debugging. Similarly, Python features a very-simple-to-use function that one can call to print a backtrace.</p></li> <li><p>Python avoids the awkward floating point operators such as <code>(+.)</code> instead of <code>(+)</code>, which is the conventional mathematical notation and is used by nearly all other programming languages.</p></li> <li><p>Python has a traditional treatment of variables that are mutable by default, avoiding beginners to be confused as to when to use an <code>int</code> or an <code>int ref</code>, and to face unclear type error messages when forgetting the <code>(!)</code> operator.</p></li> <li><p>Python features unbounded integers, which saves the need to introduce beginners very early (too early) in the programming course to the notion of fixed-size representation and overflows.</p></li> <li><p>Python offers simple-to-use implementations of maps, whereas in OCaml, obtaining a structure more efficient than lists requires a "black-magic" instantiation of the Map functor.</p></li> <li><p>Python has excellent and numerous bindings to plotting and mathematical libraries. These libraries are particularly useful for teaching "programming for scientists" courses. However, there is no equivalent in OCaml, and it currently involves a lot of hard work to develop bindings for Python libraries.</p></li> </ul> <h3 id="proposals">Proposals</h3> <p>There are a number of things that we can do to make life significantly easier for OCaml beginners — and for OCaml teachers.</p> <h4 id="syntax-of-semicolons">Syntax of semicolons</h4> <p>In OCaml, instructions (expressions of type <code>unit</code>) can usually be terminated by an optional semicolon. For example, a semicolon is accepted in front of the <code>end</code> keyword, in front of the <code>done</code> keyword, in front of the vertical bar separator (<code>|</code>) in pattern matching... but is rejected in front of the <code>else</code> keyword! This lack of consistence in the language is particularly problematic because it forces one to explain very early in an OCaml course that the semicolon is not a <em>terminator</em> but a <em>separator</em> for expressions. Moreover, it makes is hard for beginners to rearrange the lines of a program. We suggest that the semicolon should be accepted in front of the <code>else</code> keyword. This change should not introduce any backward compatibility issue, since we are only relaxing the syntax.</p> <h4 id="syntax-of-reference-updates">Syntax of reference updates</h4> <p>To increment the content of a reference <code>r</code>, one can write <code>r.contents &lt;- r.contents + 1</code>. This formulation makes perfect sense: <code>r</code> denotes the name of a box (the reference), <code>r.contents</code> denotes the contents of this box, and <code>r.contents &lt;- v</code> is the syntax to update the contents. Because writing <code>.contents</code> all the time is very cumbersome, we introduce the OCaml notation <code>!r</code> as a shorthand for <code>r.contents</code>. However, beginners then expect to be able to write <code>!r &lt;- !r + 1</code>.</p> <p>Unfortunately, the operator <code>(!)</code> is defined as a function and not as a primitive construction for <code>.contents</code>. So, we have to teach the form <code>r := !r + 1</code>, which appears to be very confusing for students, who tend to write either <code>!r := !r + 1</code> or <code>r := r + 1</code>, but never the right form. The reason is that they —rightfully— expect to refer to the content of the reference on both sides of the affectation operator.</p> <p>There is a simple way to address this problem: extend the syntax in order to parse <code>!r &lt;- v</code> as a primitive construction. This would be no more ad-hoc than the current parsing of <code>t.(i) &lt;- v</code>, and would allow teachers to simply say that <code>&lt;-</code> is the affectation operator both for references and for arrays, and that <code>!r</code> is the way to refer to the contents of a box. Beginners would be able to write the symmetric form <code>!r &lt;- !r + 1</code>, until they become ready to appreciate the more elaborated forms <code>r := !r + 1</code> and <code>incr r</code>.</p> <p>Remark: the ambiguous form <code>!t.(i) &lt;- v</code> should be resolved as <code>(!t).(i) &lt;- v</code>, to be consistent with the parsing of <code>!t.(i)</code>.</p> <h4 id="the-pre-parser">The pre-parser</h4> <p>The purpose of the pre-parser is to reject any program that is not reasonably indented, thereby anticipating on potentially complicated syntax and type errors that the OCaml compiler would report. Moreover, it would impose good coding style to students, a "feature" valued by many teachers using Python. Note that the pre-parser is not enforcing very strict rules about the indentation (unlike an automatic-indentation tool would do). Instead, it is designed to accept all reasonable OCaml styles.</p> <p>For example, the pre-parser would impose the body of loops, of function bodies, and of cases of pattern matching to be consistently indented. For let bindings, it would impose</p> <ol style=""> <li>that a <code>let</code> be at the beginning of a line where it appears,</li> <li>that a <code>in</code> be the last word of the line where it appears,</li> <li>that, if the body of a <code>let</code> spans over more than one line, then there is a line return immediately after the <code>=</code> sign.</li> </ol> <p>Moreover, to detect missing parentheses in arithmetic expressions, the pre-parser would impose infix arithmetic operators to be surrounded by the same number of spaces on each side (e.g. <code>x-1</code> and <code>x - 1</code> are accepted, but not <code>x -1</code>).</p> <h4 id="the-pre-typechecker">The pre-typechecker</h4> <p>The pre-typechecker is able to typecheck code written in the core fragment of OCaml (the fragment used for teaching to beginners). Its purpose is to report easier-to-understand error messages. One key ingredient is the error message associated with function applications. If a call of the form <code>f x y</code> fails to typecheck, the tool would report a message of the form "the application does not type-check because <code>f</code> has type <code>'a -&gt; 'a -&gt; int</code> and <code>x</code> has type <code>int</code> and <code>y has type float</code>". Note that the pre-typechecker does not need to be as efficient as the real OCaml type-checker, so we can easily keep track of additional information (e.g. all unifications pairs) that may be useful to reporting conflicts.</p> <h4 id="the-easy-library">The Easy library</h4> <p>We propose a module called <code>Easy</code> to be added to the standard library in order to provide beginners with several useful functions.</p> <ol style=""> <li><p>A function <code>print</code> of type <code>'a -&gt; unit</code>, that recurses in data structures except functions and cyclic structures, limiting the depth in order to avoid overflow of the standard output.</p></li> <li><p>A function <code>backtrace</code> of type <code>unit -&gt; unit</code>, that prints an easy-to-read backtrace.</p></li> <li><p>Polymorphic arithmetic operators <code>(+)</code>, <code>(-)</code>, <code>(*)</code> and <code>(/)</code> of type <code>'a -&gt; 'a -&gt; 'a</code>, and unary negation of type <code>'a -&gt; 'a</code>. For types others than <code>int</code> and <code>float</code>, an error could either be produced at runtime (requires representation of types at runtime), or an error could be produced by the (pre-)type-checker if it sees that the polymorphic type was not instantiated with a numeric type (this would preclude polymorphic definitions such as <code>let sq x = x * x</code>);</p></li> <li><p>Pre-instantiated versions of the <code>Set</code> and <code>Map</code> functors using the built-in comparison operator. For example <code>Set.add</code> would be exported as a function of type <code>'a -&gt; 'a Set.t -&gt; 'a Set.t</code>.</p></li> </ol> <h4 id="the--bigint-flag">The -bigint flag</h4> <p>We propose to extend <code>ocamlc</code> and <code>ocamlopt</code> with a flag called <code>-bigint</code>, whose purpose is to replace fixed-size integers with arbitrary-precision integers in the compilation chain. This feature would avoid the need for premature discussions about overflows. (Besides, it would be very useful in the context of producing mechanically-verified software.) Implementing the <code>-bigint</code> flag requires only minor modifications to the compiler for 64-bit architectures. For string and array accesses, we need to check a single bit to make sure that the index provided indeed is an acceptable index. For indices of for-loops, we need to generate slightly different code for the manipulation of the loop index.</p> <h4 id="the--easy-flag">The -easy flag</h4> <p>We propose the introduction of an option <code>-easy</code> to the tools <code>ocamlc</code> and <code>ocamlopt</code>. The purpose of this flag is to:</p> <ol style=""> <li>run the pre-parser,</li> <li>run the pre-typechecker,</li> <li>automatically open the <code>Easy</code> library,</li> <li>activate the <code>-bigint</code> compilation flag,</li> <li>ensure that the compiled program reports locations, index and size parameters on out-of-bounds errors.</li> </ol> <h4 id="the-ocamleasy-tool">The ocamleasy tool</h4> <p>We propose the introduction of a tool called <code>ocamleasy</code> whose purpose is to</p> <ol style=""> <li><p>run of <code>ocamldep</code> and the automatic inclusion of all the dependencies and libraries that are required by the source file provided,</p></li> <li><p>compile the program using either <code>ocamlc -easy</code>, or <code>ocamlopt -easy</code>, depending on whether the option <code>-opt</code> is provided to {ocamleasy},</p></li> <li><p>execute the program.</p></li> </ol> <h3 id="conclusion">Conclusion</h3> <p>Many of the proposals can be implemented in just a few hours of work. Others require a several days of work, but this investment will certainly be negligible compared with the amount of time saved by people learning OCaml. We encourage people teaching using OCaml to give feedback on the proposals and complete the list with their own suggestions. We encourage the OCaml experts to report any incompatibility they can think of between the "easy" mode proposed and the advanced features of the language. Finally, we encourage the OCaml developers to help us implement and release the proposals, so that they become available to the world before people give up completely on the idea of using OCaml for teaching programming languages.</p><a onclick="switchContent('post10','post9')" class="btn" href="#cd0e580577c7fb67e6d4b8833cebf547">Hide</a></div></span>
<a name="c8bff6a15d688b05044267e6d085b265"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=879"> Forge downtime on 22/06 19:16 to 23/06 14:00 (UTC+0200)</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">23 Jun 2013</span></span><span class="rss-description"><pre class="rss-text">Hi all, We had an unexpected failure on the forge for 19h. This has happen in the middle of a week-end and it is only after some of you send me a mail that I was able to see the failure. The problem seems to be that we run out of memory (at least OOM killer was involved in the take down). This is unfortunately normal when running this kind of website with only 1GB of RAM. I don't think we lost any data, but if you were working on the forge yesterday around 19:00 UTC, double check the consistency of your VCS. Regards Sylvain</pre></span>
<a name="711c72db80362ff629c305c1380e0401"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.06.25.html"> Caml Weekly News, 25 Jun 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">25 Jun 2013</span></span><span class="rss-description">0.3 release of dolog / The HoTT book / Anonymous sum types in functors / Ocaml on windows / Other Caml News</span>
<a name="8279cbbb65276d847fd5a12d54530cb9"></a><span class="rss-header"><span class="rss-title"><a href="http://scattered-thoughts.net/blog/2013/06/25/flowing-faster-lein-gnome"> Flowing faster: lein-gnome</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Jamie Brandon</span>, <span class="rss-date">25 Jun 2013</span></span><span class="rss-description"><p>After several weeks of banging my head against the empty space where the gnome-shell documentation should be, I’ve finally revived technomancy’s <a href="https://github.com/jamii/lein-gnome">lein-gnome</a>. It can build, package, deploy and reload gnome-shell extensions and includes a hello-world template. I’ve also added a unified log watcher that hunts down all the various places gnome-shell might choose to put your stack-traces and a cljs repl server that runs inside your extension so you can trial-and-error your way to victory.</p> <p>Future plans for a rainy day include:</p> <ul> <li><p>Writing a proper nrepl server for cljs so you can <code>C-x e</code> directly from emacs (this is non-trivial for projects with crossover code).</p></li> <li><p>Figure out how dynamic loading of bindings works in gjs so I can support tab-completion</p></li> <li><p>Clone the Looking Glass picker tool</p></li> </ul> <p>In the meantime I’m going to start work on <a href="https://github.com/jamii/golem">golem</a>. Until cljs has true nrepl support my hack for live interaction in emacs is the following:</p> <ul> <li><p>Save all extension state to disk on <code>disable</code></p></li> <li><p>Load all extension state from disk on <code>enable</code></p></li> <li><p>Hook <code>lein gnome install</code> into <code>lein cljsbuild auto</code></p></li> </ul></span>
<a name="15aa8b6782b0ab6fe5b10e3acb7c6035"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/typestate-in-mezzo-mutable-list-iterators"> Typestate in Mezzo? Starting with list iterators.</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">26 Jun 2013</span></span><span class="rss-description"><div id="post11"><p>I (Armaël Guéneau) am currently doing an internship with François Pottier, working on <a href="http://gallium.inria.fr/~protzenk/mezzo-lang/">Mezzo</a>, which has been introduced by Jonathan in two previous blog posts (<a href="http://gallium.inria.fr/blog/introduction-to-mezzo/">the first</a>, <a href="http://gallium.inria.fr/blog/introduction-to-mezzo-2/">the second</a>).</p> <p>Since the beginning of my internship, I have been playing with Mezzo, writing some code, and, more specifically, trying to see how the notion of <em>typestate</em> could be expressed with Mezzo's permissions. As an application, I tried to write in Mezzo an iterator on lists. What I call an iterator is here more like Scala's <em>Iterator</em> , or a bit like what Gabriel called generators in a <a href="http://gallium.inria.fr/blog/generators-iterators-control-and-continuations/">previous blog post</a>.</p> <p>This example turned out to be subtle enough to write in Mezzo: in this post, I'll try to show you the details of the implementation, leading to a fully working implementation of list iterators. I think it's a good opportunity to see an implementation of a (very simple) typestate, and also some funny tricks with Mezzo's permissions.</p> <a onclick="switchContent('post11','post12')" class="btn" href="#15aa8b6782b0ab6fe5b10e3acb7c6035">Read more...</a></div><div id="post12" style="display: none"><p>I (Armaël Guéneau) am currently doing an internship with François Pottier, working on <a href="http://gallium.inria.fr/~protzenk/mezzo-lang/">Mezzo</a>, which has been introduced by Jonathan in two previous blog posts (<a href="http://gallium.inria.fr/blog/introduction-to-mezzo/">the first</a>, <a href="http://gallium.inria.fr/blog/introduction-to-mezzo-2/">the second</a>).</p> <p>Since the beginning of my internship, I have been playing with Mezzo, writing some code, and, more specifically, trying to see how the notion of <em>typestate</em> could be expressed with Mezzo's permissions. As an application, I tried to write in Mezzo an iterator on lists. What I call an iterator is here more like Scala's <em>Iterator</em> , or a bit like what Gabriel called generators in a <a href="http://gallium.inria.fr/blog/generators-iterators-control-and-continuations/">previous blog post</a>.</p> <p>This example turned out to be subtle enough to write in Mezzo: in this post, I'll try to show you the details of the implementation, leading to a fully working implementation of list iterators. I think it's a good opportunity to see an implementation of a (very simple) typestate, and also some funny tricks with Mezzo's permissions.</p> <p>A word of warning, though: while the theory and implementation of Mezzo are starting to fit in nicely, the library-land is very much unknown territory so far. We are trying new things, and expect them to be easier in the future. As always, practice and teaching will surely yield substantial improvements, leading us to see in retrospect how we could have simplified things. Expect the code examples in this post to look <em>complicated</em>, and probably not representative of the Mezzo code we expect to write in the future.</p> <h3 id="briefing">Briefing</h3> <p>What I want as an iterator is an object that let us iterate on a collection, giving one new element each time we call a function <code>next</code>, that makes the iterator go a step forward. Note that such an iterator is mutable, its internal state being modified by <code>next</code>. It would be possible to consider functional iterators, returning a value corresponding to the next position in the list; but to study the relation with typestate systems we decide to study <em>mutable</em> iterators here.</p> <p>We have to handle the case where the iterator has no more elements. In Java or Scala, you have to check if there are more elements available with <code>hasNext</code>, and if you call <code>next</code> on an empty iterator, an exception is raised. In Mezzo we don't have exceptions. Moreover, we want to statically express the protocol that the operations on an iterator must follow, in the types themselves. It's the idea of typestate. By achieving that, the user is prevented <em>at compilation time</em> of using <code>next</code> on an empty iterator.</p> <p>The application to (simply linked) lists seems straightforward: you just have to follow the <code>tail</code> link of each <code>Cons</code> cell, starting with the head of the list. What is not so trivial is how to express that with Mezzo's permissions.</p> <h3 id="the-silent-iterator">The silent iterator</h3> <p>Let's start with a very stupid iterator: it traverses the list, but without giving its elements to the user.</p> <h4 id="from-the-outside-signatures">From the outside: signatures</h4> <h5 id="an-iterator-has-exclusive-access-on-the-list">An iterator has exclusive access on the list</h5> <p>First, to be able to iterate on a list, the iterator will need the permission to access the list and its contents. A solution is to <strong>consume</strong> the permission <code>l @ list a</code> when you create an iterator on the list <code>l</code> (of elements of type <code>a</code>), and <strong>give it back</strong> when the iteration is finished (or when you stop the iterator manually).</p> <p>This gives us the following signatures for the <code>new</code> and <code>stop</code> functions:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> <span class="kw">new</span>: [a] (consumes l: <span class="dt">list</span> a) -&gt; iterator a (l @ <span class="dt">list</span> a) <span class="kw">val</span> stop: [a, post: perm] (consumes iterator a post) -&gt; (| post)</code></pre> <p>In case you're not familiar with Mezzo syntax yet, you can find more details in <a href="http://gallium.inria.fr/blog/introduction-to-mezzo/">the first post</a> cited above, but let me just do a quick reminder here. The bracket notation <code>[post:perm]</code> is parametric polymorphism on a type of kind <code>perm</code> (a permission), and that <code>(consumes foo)</code> indicates that type <code>foo</code> is not given back to the type environment after the functional call. Finally, <code>(foo | bar)</code> is a conjunction of the type <code>foo</code> and the permission <code>bar</code>, which may be a purely static information, not associated to any runtime value; in particular, <code>(| post)</code> is an empty tuple that is only useful as the carrier of the permission <code>post</code>.</p> <h5 id="expressing-iterator-typestate">Expressing iterator typestate</h5> <p>We also need a <code>next</code> function, that takes an iterator in input. To handle the fact that <code>next</code> may lead to an empty iterator, we say that <code>next</code> consumes the fact that the input argument is an iterator, and returns a variant of <code>option a</code>:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">data offer (post: perm) a = | <span class="dt">None</span> {| post } | <span class="dt">Some</span> { x: a }</code></pre> <p>In the first case, the iteration is finished: the <code>post</code> permission (in practice equal to <code>l @ list a</code> for a given <code>a</code> and <code>l</code>) is returned. In the second case, an element is returned. Note that we could have used the sum type of the standard library, <code>choice a b</code>, but this specific datatype allows us to give more explicit constructor names (than <code>Left</code> and <code>Right</code>).</p> <p>We now have the <code>next</code> signature:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> next: [a, post: perm] (consumes it: iterator a post) -&gt; offer post (| it @ iterator a post)</code></pre> <p>For now, because our iterator is silent, in the <code>Some</code> case, we return no value of type <code>a</code>, only the fact that <code>it</code> is still an iterator, so we can continue the iteration. On the contrary, after a <code>None</code> answer, it is statically not possible to call <code>next</code> again: the permission <code>it @ iterator a post</code> has been consumed and was not returned through the offer.</p> <div class="figure"> <img src="http://gallium.inria.fr/blog/ts1.png" alt="Typestate of the iterator"/><p class="caption">Typestate of the iterator</p> </div> <p>A small code example using this iterator:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="co">(* Loop calls [next] on the iterator until it is empty *)</span> <span class="kw">val</span> <span class="kw">rec</span> loop [a, post: perm] (consumes it: iterator a post): (| post) = <span class="kw">match</span> next it <span class="kw">with</span> | <span class="dt">None</span> -&gt; () | <span class="dt">Some</span> { x } -&gt; loop it end</code></pre> <h4 id="diving-into-the-internals-implementation">Diving into the internals: implementation</h4> <h5 id="a-first-attempt">A first attempt</h5> <p>To be able to go forward, the iterator must store the elements that will be explored in the future. With a list, it's easy: initially, it consists in the list itself, and each call to <code>next</code> just takes the tail of the current internal list.</p> <p>This gives us:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">data <span class="kw">mutable</span> iterator a (post: perm) = <span class="dt">Iterator</span> { xs: <span class="dt">list</span> a } data offer (post: perm) a = | <span class="dt">None</span> { | post } | <span class="dt">Some</span> { x: a } <span class="kw">val</span> <span class="kw">new</span> [a] (consumes l: <span class="dt">list</span> a): iterator a (l @ <span class="dt">list</span> a) = <span class="dt">Iterator</span> { xs = l } <span class="kw">val</span> next [a, post: perm] (consumes it: iterator a post): offer post (| it @ iterator a post) = <span class="kw">match</span> it.xs <span class="kw">with</span> | <span class="dt">Nil</span> -&gt; <span class="dt">None</span> | <span class="dt">Cons</span> { head; tail } -&gt; it.xs &lt;- tail; <span class="dt">Some</span> { x = () } end</code></pre> <p>Sadly, this example doesn't typecheck: in the match case where <code>it.xs</code> is <code>Nil</code>, we return <code>None</code>, and the permission <code>post</code>. However, we don't have <code>post</code>!</p> <p>Formally, at the beginning of <code>next</code>, the only available permissions are <code>it @ iterator a post</code>, and in the first match case, <code>it.xs @ Nil</code>. Nothing here gives us <code>post</code>.<br/>Intuitively, even if we had <code>post</code> at the beginning, <code>next</code> here doesn't preserves the knowledge of the cons cells we have already explored: we have to store in the iterator the permissions of the previous cons cells, to be able to finally merge them back into <code>post</code>.</p> <h5 id="storing-the-old-permissions">Storing the old permissions</h5> <p>We introduce a new permission, <code>p</code>, that describes the permission for the consumed cons cells. The iterator contains <code>p</code>, and a function, <code>rewind</code>, that consumes <code>p</code>, and the permission on the tail, and merge them into <code>post</code>.</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">data <span class="kw">mutable</span> iterator a (p: perm) (post: perm) = <span class="dt">Iterator</span> { content: ( xs: <span class="dt">list</span> a, rewind: (| consumes (p * xs @ <span class="dt">list</span> a)) -&gt; (| post) | p ) }</code></pre> <p>With this definition of <code>iterator</code>, the signature of <code>next</code> would be:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> next: [a, p: perm, post: perm] ( consumes it: <span class="dt">Iterator</span> { content: ( xs: <span class="dt">list</span> a, rewind: (| consumes (p * xs @ <span class="dt">list</span> a)) -&gt; (| post) | p ) } -&gt; offer post (| it @ iterator a (p * xs @ <span class="dt">Cons</span> { head: a; tail: unknown }) post)</code></pre> <p>The idea is that before the call to <code>next</code>, the iterator stores in <code>xs</code> the permission on the non-traversed part of the list, <code>xs</code>, and <code>rewind</code> requests the permission on the already-traversed part of the list, represented by <code>p</code>, upto <code>xs</code> excluded. If <code>xs</code> is itself a cons cell (and only in this case), we can call <code>next</code>; the iterator will then store only the tail of <code>xs</code>, and its rewind function request the permission for <code>p</code>, plus the first cell of <code>xs</code> -- which at this point as been traversed.</p> <p>Concretely, imagine we have the following list construction, for some list <code>lb @ list int</code>.</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> la = <span class="dt">Cons</span> { head=1; tail=lb }</code></pre> <p>and are now iterating on this list. Assuming we have already called <code>next</code> once, have traversed the first cell of <code>la</code>, the <code>rewind</code> function of the iterator would have a type equivalent to the following:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">rewind: (| consumes ( la @ <span class="dt">Cons</span> { head:int; tail=lb } * lb @ <span class="dt">list</span> <span class="dt">int</span>) ) -&gt; (| post )</code></pre> <p>If we pattern-match on <code>lb</code>, in the <code>Cons</code> case, the typing environment will learn that <code>lb</code> has type <code>Cons { head : int; tail = lc }</code> for some tail <code>lc @ list int</code>. So rewind has the refined type</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">rewind: (| consumes ( la @ <span class="dt">Cons</span> { head:int; tail=lb } * lb @ <span class="dt">Cons</span> { head:int; tail=lc }) ) -&gt; (| post )</code></pre> <p>The already-traversed part of the list, <code>la</code>, has the same type, but the not-yet-traversed part has been refined to a cons type. Note that with the additional hypothesis <code>lc @ int</code> of our context, this is equivalent to the following type:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">rewind: (| consumes ( (la @ <span class="dt">Cons</span> { head:int; tail=lb } * lb @ <span class="dt">Cons</span> { head:int; tail=lc }) * lc @ <span class="dt">list</span> <span class="dt">int</span> ) -&gt; (| post )</code></pre> <p>which is precisely the type of the <code>rewind</code> function of the iterator <em>returned</em> by <code>next</code>. So after pattern-matching, the type of the <code>rewind</code> function passed to <code>next</code> becomes exactly the same as the type of the <code>rewind</code> function expected as a return value. We can return this function, unchanged: it has just been <em>transtyped</em>.</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> next it <span class="co">(* lengthy type annotation that we won't repeat here *)</span> = <span class="kw">let</span> (xs, rewind) = it.content <span class="kw">in</span> <span class="kw">match</span> xs <span class="kw">with</span> | <span class="dt">Nil</span> -&gt; <span class="co">(* p * xs @ list a *)</span> rewind (); <span class="co">(* post *)</span> <span class="dt">None</span> | <span class="dt">Cons</span> { head; tail } -&gt; it.content &lt;- (tail, rewind); <span class="dt">Some</span> end</code></pre> <p>As we described, in the <code>Cons</code> case, the value of the <code>xs</code> field of <code>it</code> is changed to <code>tail</code>, but the <code>rewind</code> field is unchanged.</p> <p>Remark: we can still shorten this definition by quantifying <code>p</code> existentially in the definition of <code>iterator</code>, and the typechecker will be able to pack and unpack the quantification to do implicitly what we've done explicitly previously (the conversion <code>p</code> → <code>p * xs @ Cons { head: a; tail: unknown }</code>).</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">data <span class="kw">mutable</span> iterator a (post: perm) = <span class="dt">Iterator</span> { content: { p: perm } ( xs: <span class="dt">list</span> a, rewind: (| consumes (p * xs @ <span class="dt">list</span> a)) -&gt; (| post) | p ) }</code></pre> <p>The type for <code>next</code> becomes much more readable. In fact, it is exactly the one we hoped to get <a href="http://gallium.inria.fr/blog/index.rss#expressing-iterator-typestate">at the very beginning</a> of the post.</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> next [a, post: perm] (consumes it: iterator a post): offer post (| it @ iterator a post)</code></pre> <p>For the function <code>new</code>, the permission <code>p</code> is the neutral permission <code>empty</code>, and <code>rewind</code> needs to do nothing at all:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> <span class="kw">new</span> [a] (consumes l: <span class="dt">list</span> a): iterator a (l @ <span class="dt">list</span> a) = <span class="dt">Iterator</span> { content = ( l, <span class="kw">fun</span> (| consumes l @ <span class="dt">list</span>): (| l @ <span class="dt">list</span> a) = () )}</code></pre> <p>We can also write a <code>stop</code> function that stops the iteration:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> stop [a, post: perm] (consumes (it: iterator a post)): (| post) = <span class="kw">let</span> _, rewind = it.content <span class="kw">in</span> rewind ()</code></pre> <p>Note that the <code>rewind</code> function never does anything; it is just used for its effect on the typing environment.</p> <h3 id="the-chatty-and-useful-iterator">The chatty (and useful) iterator</h3> <p>This is great, we can traverse a list using our iterator. But it would be even more great if we could actually get the contents of the list!</p> <p>This is a bit more complicated: while giving an element to the user, we have to give him also the permission on it. This breaks the invariant "the iterator always can have <code>post</code> by applying <code>rewind</code>". Now, our iterator can have a <em>hole</em> in it: when giving an element to the user, a hole appears. To continue the iteration, the user <em>must</em> give the permission on the element back to the iterator.</p> <p>Consequently, the definition of <code>iterator</code> changes a bit: an <code>iterator</code> is now also parametrized by a permission <code>hole</code>, which in fact means "what does the iterator need to fill its hole and be able to generate <code>post</code>".</p> <p>Here is the new definition of <code>iterator</code>. Note that it doesn't contains <code>hole</code>, but we need it to generate <code>post</code>:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml">data <span class="kw">mutable</span> iterator a (hole: perm) (post: perm) = <span class="dt">Iterator</span> { content: { p: perm } ( xs: <span class="dt">list</span> a, rewind: (| p * hole * l @ <span class="dt">list</span> a) -&gt; (| post) | p ) }</code></pre> <p>Thus, an iterator without a hole is an <code>iterator a empty post</code>, while an iterator that has given away <code>x @ a</code> to the user is a <code>iterator a (x @ a) post</code>.</p> <p>We can now write <code>next</code>. It takes an iterator parametrized by any permission <code>hole</code>, the permission <code>hole</code> itself, and implicitly fills the hole by merging <code>hole</code> into <code>p</code>. It finally returns the next element (if any).</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> next [a, hole: perm, post: perm] (consumes (it: iterator a hole post | hole)): offer post (x: a | it @ iterator a (x @ a) post) = <span class="kw">let</span> xs, rewind = it.content <span class="kw">in</span> <span class="kw">match</span> xs <span class="kw">with</span> | <span class="dt">Nil</span> -&gt; rewind (); <span class="dt">None</span> | <span class="dt">Cons</span> { head; tail } -&gt; s.content &lt;- tail, rewind <span class="dt">Some</span> { x = head } end</code></pre> <p>And we can now use this iterator:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="co">(* [nth] takes an iterator [it] and an integer [n], makes him go forward of [n]</span> <span class="co"> steps, and then returns it (if it hasn't been consumed) *)</span> <span class="kw">val</span> <span class="kw">rec</span> nth [a, hole: perm, post: perm] (consumes (it: iterator a hole post | hole), n: <span class="dt">int</span>): offer (x: a | it @ iterator a (x @ a) post) post = <span class="kw">match</span> next [hole = hole] it <span class="kw">with</span> | <span class="dt">None</span> -&gt; <span class="dt">None</span> | <span class="dt">Some</span> { x } -&gt; <span class="kw">if</span> n &lt;= 0 <span class="kw">then</span> ( <span class="dt">Some</span> { x = x } ) <span class="kw">else</span> ( nth [a = a, hole = (x @ a)] (it, n<span class="dv">-1</span>) ) end </code></pre> <p>You can note that we have sometimes to instantiate by hand the polymorphic parameters when calling a function. For example, here, when calling recursively <code>nth</code>, we have to say that a previous call to <code>next</code> has created a hole of "shape" <code>x @ a</code> we want to merge back to continue the iteration.</p> <h3 id="the-cherry-on-top">The cherry on top</h3> <p>So, here it is, an iterator on lists!<br/>However, this needs a little cleaning: we store in our iterator a rewind function, which is the same for every iterator, that doesn't change over time, and is just present to <em>convert</em> permissions.</p> <p>A way to clean up a bit is to declare a toplevel identity function, named <code>convert</code>:</p> <pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> convert (): () = () alias convertible (p: perm) (q: perm): perm = convert @ (| consumes p) -&gt; (| q) data <span class="kw">mutable</span> iterator a (hole: perm) (post: perm) = <span class="dt">Iterator</span> { content: {p: perm} ( l: <span class="dt">list</span> a | p * convertible (p * hole * l @ <span class="dt">list</span> a) post ) }</code></pre> <p>I find that piece of code cute, and I think it enlightens the way the transtyping of <code>rewind</code> works: if rewind can have type <code>(| consumes p) -&gt; (| q)</code> it's because this is a subtype of <code>() -&gt; ()</code>, which means we have convinced the typechecker that <code>p</code> is convertible into <code>q</code>.</p> <h3 id="i-want-the-code">I want the code!</h3> <p>I doubt so, but just in case, the complete code, with some dummy examples of applications, <a href="http://gallium.inria.fr/blog/listiterator.mz.src.html">can be found there</a>.</p><a onclick="switchContent('post12','post11')" class="btn" href="#15aa8b6782b0ab6fe5b10e3acb7c6035">Hide</a></div></span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
