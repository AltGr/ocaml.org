<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="https://static.ocamlcore.org/official/images/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="../books.html#manual">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings.html">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://www.ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://bentobako.org/david/blog/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://www.blogger.com/feeds/8964007124326996693/posts/default/-/ocaml">Fayssal Martani</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="http://www.elehack.net/michael/blog/tags/ocaml?format=rss">Michael Ekstrand</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="1baa6448b2dd1e3f032ae60ada757540"></a><span class="rss-header"><span class="rss-title"><a href="http://ocsigen.org/"> Try Besport! The new Ocsigen based social network about sport</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Ocsigen project</span>, <span class="rss-date">28 Feb 2013</span></span><span class="rss-description"><p>A beta version of Besport is available for testing. Besport is a social network developed using Ocsigen Eliom in California. Besport helps you connect and share sport with the world.
</p>
<h2>Links:</h2>
<ul>
<li><a href="http://www.besport.com">Besport</a></li>
<li><a href="http://vimeo.com/60686363">A video presenting Besport</a></li>
</ul></span>
<a name="3fdb78ea245bf6552bd15729f332b967"></a><span class="rss-header"><span class="rss-title"><a href="http://y-node.com/blog/2008/oct/30/noreversematch"> Mysterious NoReverseMatch Error</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">y-node</span>, <span class="rss-date">27 Feb 2013</span></span><span class="rss-description"><p>
A couple of days ago we have faced quite a creepy issue: a
Django-based site with tens of thousands hits/day has been throwing
NoReverseMatch errors with no particular pattern. Basically, any url
on the site could be found in the error emails. These emails were
flowing in at a very worrysome rate, and user complaints started to
arrive as well.</p></span>
<a name="f80c1f9af11678e3e7c087237e73f2ce"></a><span class="rss-header"><span class="rss-title"><a href="http://y-node.com/blog/2008/oct/23/objectdetection"> Computer Vision: the evolution of one object detection approach</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">y-node</span>, <span class="rss-date">27 Feb 2013</span></span><span class="rss-description"><div id="post1"><p style="margin-bottom: 0in;">In
the course of my recent work I've been investigating Computer Vision
field, and more specifically, object detection and tracking problem.
Object detection is a classic problem in computer vision, with
applications in many areas. In this post I'm going to share my
findings about the latest research advances in this area.</p>
<p style="margin-bottom: 0in;">Everyone
who is familiar by hearsay with it, knows the great paper “Robust
Real-Time Face Detection” by Paul Viola and Michael J. Jones.
Following their approach it is possible to detect faces at 15 frames
per second on a conventional Intel Pentium III (as they did). Our
task is to achieve the same results on some conventional embedded
processor. Also, their learning algorithm
<a href="http://en.wikipedia.org/wiki/Machine_learning">http://en.wikipedia.org/wiki/Machine_learning</a>
may be running days or even weeks. Our goal is to try to reduce this
time.</p>
<a onclick="switchContent('post1','post2')" class="btn" href="#f80c1f9af11678e3e7c087237e73f2ce">Read more...</a></div><div id="post2" style="display: none"><p style="margin-bottom: 0in;">In
the course of my recent work I've been investigating Computer Vision
field, and more specifically, object detection and tracking problem.
Object detection is a classic problem in computer vision, with
applications in many areas. In this post I'm going to share my
findings about the latest research advances in this area.</p>
<p style="margin-bottom: 0in;">Everyone
who is familiar by hearsay with it, knows the great paper “Robust
Real-Time Face Detection” by Paul Viola and Michael J. Jones.
Following their approach it is possible to detect faces at 15 frames
per second on a conventional Intel Pentium III (as they did). Our
task is to achieve the same results on some conventional embedded
processor. Also, their learning algorithm
<a href="http://en.wikipedia.org/wiki/Machine_learning">http://en.wikipedia.org/wiki/Machine_learning</a>
may be running days or even weeks. Our goal is to try to reduce this
time.</p>
<p style="margin-bottom: 0in;">There
are three main contributions of their paper: an <i>integral image
</i><a href="http://en.wikipedia.org/wiki/Summed_Area_Table"><i>http://en.wikipedia.org/wiki/Summed_Area_Table</i></a><span style="font-style: normal;">,
a simple and efficient classifier (at that time) and an approach for
combining more complex classifiers.</span></p>
<p style="margin-bottom: 0in;"><span style="font-style: normal;">The
integral image allows for extremely fast feature evolution. Viola and
Michael used a set of Haar-like features
</span><a href="http://en.wikipedia.org/wiki/Haar-like_features"><span style="font-style: normal;">http://en.wikipedia.org/wiki/Haar-like_features</span></a><span style="font-style: normal;">.
Using the integral image any Haar-like feature can be computed at any
scale or location in </span><i>constant</i><span style="font-style: normal;">
time. Haar features are similar to Haar wavelets
</span><a href="http://en.wikipedia.org/wiki/Haar_wavelet"><span style="font-style: normal;">http://en.wikipedia.org/wiki/Haar_wavelet</span></a><span style="font-style: normal;">.
The feature set considers rectangular regions of image and sums up
the pixels in this region. The results are used to classify images.
The Haar wavelets are a natural set basis functions which encode
differences in average intensities between different regions.</span></p>
<p style="margin-bottom: 0in;"><span style="font-style: normal;">Face
detection is a </span><i>rare event binary classification </i><span style="font-style: normal;">problem,
in the sense that among millions of sub-windows, only a few contain
faces. The classifier introduced by those guys filters out over 50%
of the image while preserving 99% of the faces. As we will see later,
 we could go far beyond this limits. This classifier is built using
AdaBoost learning algorithm </span><a href="http://en.wikipedia.org/wiki/AdaBoost"><span style="font-style: normal;">http://en.wikipedia.org/wiki/AdaBoost</span></a><span style="font-style: normal;">
to select a small number of critical visual features from a very
large set of potential features. The basic idea of AdaBoost is to
train an ensemble of </span><i>M</i><span style="font-style: normal;">
weak classifiers</span><span style="font-style: normal;"><img src="http://y-node.com/static/od_static/object_detection_html_m1fb65c63.gif" name="Object3" align="ABSMIDDLE" height="20" width="49" hspace="8"/></span><span style="font-style: normal;">in
the form:</span></p>
<p align="CENTER" style="margin-bottom: 0in;"><img src="http://y-node.com/static/od_static/object_detection_html_m484d812e.gif" name="Object4" align="ABSMIDDLE" height="43" width="148" hspace="8"/><span style="font-style: normal;">,</span></p>
<p align="LEFT" style="margin-bottom: 0in;"><span style="font-style: normal;">where
<img src="http://y-node.com/static/od_static/object_detection_html_61da7f54.gif" name="Object5" align="ABSMIDDLE" height="20" width="24" hspace="8"/>are
voting coefficients. This is done by training<img src="http://y-node.com/static/od_static/object_detection_html_m1782adef.gif" name="Object6" align="ABSMIDDLE" height="20" width="84" hspace="8"/>,
for </span><i>m</i><span style="font-style: normal;"> from 1 to </span><i>M</i><span style="font-style: normal;">.
However, at </span><i>m</i><span style="font-style: normal;">-th
stage, the training examples are weighted differently using a
weighting function<img src="http://y-node.com/static/od_static/object_detection_html_e6b2875.gif" name="Object7" align="ABSMIDDLE" height="20" width="110" hspace="8"/>,
based on performance of the previous stage. The idea is to increase
the weights of those correctly classified examples, so that
subsequent weak classifiers focus more on the wrongly classified
examples.</span></p>
<p style="margin-bottom: 0in; font-style: normal;">
With each feature is associated one weak classifier, which classifies
a sub-window by first integrating the sub-window with the feature
using integral images, and then thresholding the value with a
properly chosen threshold. Then they are combined into a “cascade”
which allows useless regions to be quickly discarded. Those
sub-windows which are not rejected by initial classifier of the
cascade are processed by a sequence of classifiers, each slightly
more complex than the last.</p>
<p style="margin-bottom: 0in; font-style: normal;">
We finished with Viola and Michael's paper. Now let us examine some
ideas to improve  performance of the learning algorithm and detector.</p>
<p style="margin-bottom: 0in;"><span style="font-style: normal;">Minh-Tri
Pham and Tat-Jen Cham brought a new real insight into the
aforementioned method </span><span style="font-style: normal;">with
their paper “Fast training and selection of Haar features using
statistics in boosting-based face detection”. It is extremely fast
and comparable in accuracy. They claim that “traditional techniques
for training a weak classifier usually run in</span><span style="font-style: normal;"><img src="http://y-node.com/static/od_static/object_detection_html_1276bb50.gif" name="Object1" align="ABSMIDDLE" height="18" width="87" hspace="8"/></span><span style="font-style: normal;">,
with N examples... and T features” And they present a novel
approach to train a weak classifier in time</span><span style="font-style: normal;"><img src="http://y-node.com/static/od_static/object_detection_html_f92403c.gif" name="Object2" align="ABSMIDDLE" height="21" width="84" hspace="8"/></span><span style="font-style: normal;">,
where d is the number of pixels of the probed image sub-window, by
using only the statistics of the weighted input data. Did you see
it?! Rather than trying to reduce either </span><i>N</i><span style="font-style: normal;">
or </span><i>T</i><span style="font-style: normal;">, they break up
the </span><i>NT</i><span style="font-style: normal;"> factor. I do
not want to reprint that exciting paper because it contains a lot of
math, so just go and read the paper. By the way, this is currently
the world's fastest method for training a face detector. So it is
worth the reader's attention. If you need help in statistics, I
strongly advise to read first chapters of “Pattern classification”
by R.O. Duda, P. E. Hart, and D. G. Stork.</span></p>
<p style="margin-bottom: 0in; font-style: normal;">
Let us look in another direction. The main limitations of the
aforementioned detectors is to gather a representative training set.
To overcome that limitation we should resort to the help of
H.Grabner, P. M. Roth, and H.Bischof. They have published an
“inspiring” piece of work: “Is Pedestrian Detection Really a
Hard Task?”.</p>
<p style="margin-bottom: 0in; font-style: normal;">
The basic idea is to train a separate classifier for each image
location which has only to discriminate the object from background at
a specific location. For the complexity is reduced “we can use a
simple update strategy that requires only a few positive samples and
is stable by design”. And some limitations arise there: fixed
cameras looking always at the same  scene. This approach uses on-line
unsupervised learning methods
<a href="http://en.wikipedia.org/wiki/Unsupervised_learning">http://en.wikipedia.org/wiki/Unsupervised_learning</a>
which usually tend to wrong updates which reduces the performance of
the detector. The detector might start to drift and would end in an
unreliable state. There are variations of the on-line learning
algorithm which are suffering from the drifting problem:</p>
<ul>
	<li><p style="margin-bottom: 0in;"><b><span style="font-style: normal;">Self-training.
	</span></b><span style="font-style: normal;"><span style="font-weight: medium;">In
	a self-training framework the current classifier evaluates an input
	sample and predicts a label which is then directly used to update
	the classifier.</span></span></p>
	</li><li><p style="margin-bottom: 0in;"><b><span style="font-style: normal;">Co-training.</span></b><span style="font-style: normal;"><span style="font-weight: medium;">
	In a co-training framework two classifiers are trained in parallel
	using different views of data. The confident predicted labels are
	used to update the other classifier, respectively.</span></span></p>
	</li><li><p style="margin-bottom: 0in;"><b><span style="font-style: normal;">Autonomous
	supervision. </span></b><span style="font-style: normal;"><span style="font-weight: medium;">The
	results obtained by the classifier are verified by an analyzer and
	if the obtained labels are confident the samples are used for
	updating the classifier.</span></span></p>
	<p style="margin-bottom: 0in; font-style: normal; font-weight: medium;">
	</p>
</li></ul>
<p style="margin-bottom: 0in; font-style: normal;">
And again, authors overcome these problems and proved that whether
the false positive rate is increased nor that recall is decreased if
the system is running for a longer period of time. Their method does
not take into account the classifier response for delivering update.</p>
<p style="margin-bottom: 0in;"><span style="font-style: normal;">For
practical implementation a fixed highly overlapping grid (both in
location and scale) is placed in the image. Each grid element
<img src="http://y-node.com/static/od_static/object_detection_html_m4bca1708.gif" name="Object8" align="ABSMIDDLE" height="18" width="67" hspace="8"/>corresponds
to a classifier 
<img src="http://y-node.com/static/od_static/object_detection_html_3b11cc7b.gif" name="Object9" align="ABSMIDDLE" height="20" width="22" hspace="8"/>,
which is responsible only for its underlying image patch.</span></p>
<p style="margin-bottom: 0in; font-style: normal;">
To be continued...</p>
<p style="margin-bottom: 0in; font-style: normal;">
<br/>
</p>
<p style="margin-bottom: 0in; font-style: normal;">
<b>References:</b></p>
<ol>
	<li><p style="margin-bottom: 0in; font-style: normal;">Paul
	Viola, Michael Jones. Robust Real-Time Face Detection. 2004</p>
	</li><li><p style="margin-bottom: 0in; font-style: normal;">Mihn-Tri
	Phan, Tat-Jen Cham. Fast training and selection of Haar features
	using statistics in boosting-based face detection. 2007</p>
	</li><li><p style="margin-bottom: 0in; font-style: normal;">R.
	O. Duda, P. E. Hart, and D. G. Stork. Pattern classification.
	Wiley-interscience. 2000</p>
	</li><li><p style="margin-bottom: 0in; font-style: normal;">H.
	Grabner, P. M. Roth, and H. Bischof. Is Pedestrian Detection Really
	a Hard Task. 2007</p>
</li></ol><a onclick="switchContent('post2','post1')" class="btn" href="#f80c1f9af11678e3e7c087237e73f2ce">Hide</a></div></span>
<a name="a21986b497e300802f880aeb17491d60"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.02.26.html"> Caml Weekly News, 26 Feb 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">26 Feb 2013</span></span><span class="rss-description">llpp v13 / Beta-release of Merlin / Extracting information from HTML documents / strange typechecking result / What is triggering a lot of GC work? / Other Caml News</span>
<a name="a494eb80efb947027c13c6bae4637ff9"></a><span class="rss-header"><span class="rss-title"><a href="http://newblog.0branch.com/posts/2013-02-24-batteries-v2-composition.html"> Batteries 2.0: Composition and application</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Marc Simpson</span>, <span class="rss-date">24 Feb 2013</span></span><span class="rss-description"><div id="post3"><a onclick="switchContent('post3','post4')" class="btn" href="#a494eb80efb947027c13c6bae4637ff9">Read more...</a></div><div id="post4" style="display: none"><div id="blog_post">
  <div class="span-20">
    <div id="post_title" class="span-10"><h1>Batteries 2.0: Composition and application</h1></div>
    <div style="text-align: right; font-style: italic;" id="post_date" class="span-10 last"><a href="http://newblog.0branch.com/index.html">Posted</a> on February 24, 2013</div>
  </div>

  <hr/>

  <div id="post_body">
    <p>A <a href="http://newblog.0branch.com/posts/2012-04-17-haskell-application-ocaml.html">while back</a>, I discussed an implementation of the application operator (Haskell’s <code>$</code>) in OCaml. In the closing section of that post, a couple of problems were raised regarding treatment of associativity and composition in <em>OCaml Batteries</em>. These issues have been addressed in <em>Batteries</em> 2.0, released in January 2013; the improvements are outlined here.</p>
<h2 id="quick-recap">Quick recap</h2>
<p>Batteries <a href="http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatPervasives.html">1.x</a> defines the following operators for composition and application:</p>
<ul>
<li><code>val ( -| ) : ('a -&gt; 'b) -&gt; ('c -&gt; 'a) -&gt; 'c -&gt; 'b</code>
<ul>
<li>“Function composition. <code>f -| g</code> is <code>fun x -&gt; f (g x)</code>. Mathematically, this is operator <code>o</code>.”</li>
</ul></li>
<li><code>val ( **&gt; ) : ('a -&gt; 'b) -&gt; 'a -&gt; 'b</code>
<ul>
<li>“Function application. <code>f **&gt; x</code> is equivalent to <code>f x</code>. This [operator] may be useful for composing sequences of function calls without too many parenthesis.”</li>
</ul></li>
</ul>
<p>The problem pointed out in the comments section (now the closing <em>Update</em>) of the <a href="http://newblog.0branch.com/posts/2012-04-17-haskell-application-ocaml.html">post</a> was that</p>
<blockquote>
<p>the precedence you’d expect coming from Haskell is inverted. We’d need to define a new application operator to address this problem as the commenter suggested…</p>
</blockquote>
<p>Specifically, the following code sample was shown to exhibit surprising behaviour for anyone familiar with Haskell’s <code>.</code> and <code>$</code>,</p>
<pre><code># print_endline -| string_of_int **&gt; succ **&gt; sum [1; 2; 3];;
Error: This expression has type string but an expression was expected of type 'a -&gt; string</code></pre>
<h2 id="whats-up-doc">What’s up, doc?</h2>
<p>In Batteries <a href="http://ocaml-batteries-team.github.com/batteries-included/hdoc2/BatPervasives.html">2.0</a>, both operators have been renamed:</p>
<ul>
<li>Composition:
<ul>
<li><code>(-|)</code> is now <code>(%)</code></li>
</ul></li>
<li>Application:
<ul>
<li><code>(**&gt;)</code> is now <code>(@@)</code></li>
</ul></li>
</ul>
<p>To appreciate the behaviour of the new operators, we can once again consult (a subsection of) the operator associativity table from the <a href="http://caml.inria.fr/pub/docs/manual-ocaml/expr.html">language manual</a>:</p>
<table>
<thead>
<tr class="header">
<th align="left">Construction or operator</th>
<th align="left">Associativity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>*...</code> <code>/...</code> <code>%...</code> <code>mod</code> <code>land</code> <code>lor</code> <code>lxor</code></td>
<td align="left">left</td>
</tr>
<tr class="even">
<td align="left"><code>+...</code> <code>-...</code></td>
<td align="left">left</td>
</tr>
<tr class="odd">
<td align="left"><code>::</code></td>
<td align="left">right</td>
</tr>
<tr class="even">
<td align="left"><code>@...</code> <code>^...</code></td>
<td align="left">right</td>
</tr>
<tr class="odd">
<td align="left"><code>=...</code> <code>&lt;...</code> <code>&gt;...</code> <code>|...</code> <code>&amp;...</code> <code>$...</code></td>
<td align="left">left</td>
</tr>
</tbody>
</table>
<p>A couple of things are worth noting:</p>
<ul>
<li>The associativity of the application operator has changed.
<ul>
<li><code>(**&gt;)</code> is left associative, <code>(@@)</code> right.</li>
<li>As discussed in the original post, right associativity is an integral feature of the application operator.</li>
</ul></li>
<li>In Batteries 1.x, application had higher precedence than composition.
<ul>
<li><code>(**&gt;)</code> is covered by the first row of the table, <code>(-|)</code> by the second.</li>
<li>As of Batteries 2.0, this precedence has been inverted.</li>
</ul></li>
</ul>
<h2 id="no-surprises">No surprises</h2>
<p>Reworking the above code sample for Batteries 2.0 is trivial—simply substitute <code>(%)</code> for <code>(-|)</code> and <code>(@@)</code> for <code>(**&gt;)</code>. With these changes in place, the code behaves as follows:</p>
<pre><code># print_endline % string_of_int @@ succ @@ sum [1; 2; 3];;
7
- : unit = ()</code></pre>
<p>Crucially, the application operator has lower precedence than the composition operator and is right associative.</p>
<p>Returning to the <a href="http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Prelude.html#v:-36-">definition</a> of <code>$</code> referenced at the outset of the original post,</p>
<blockquote>
<p>This operator is redundant, since ordinary application <code>(f x)</code> means the same as <code>(f $ x)</code>. However, <code>$</code> has low, right-associative binding precedence, so it sometimes allows parentheses to be omitted.</p>
</blockquote>
<p>it should be apparent that these new operators closely conform to Haskell’s treatment of application and composition (in particular, associativity and precedence), allowing for a straightforward translation of the above expression:</p>
<pre><code>Prelude&gt; putStrLn . show $ succ $ sum [1, 2, 3]
7</code></pre>
  </div>
</div>

<hr/>

<div id="disqus_thread"></div>
&lt;script type="text/javascript"&gt;
  var disqus_shortname = '0branch'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
&lt;/script&gt;
&lt;noscript&gt;Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>&lt;/noscript&gt;
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><a onclick="switchContent('post4','post3')" class="btn" href="#a494eb80efb947027c13c6bae4637ff9">Hide</a></div></span>
<a name="eb5f3e93ab87a2e7e16b88def1b1fdfb"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/on-the-nary-cartesian-product"> On the n-ary cartesian product</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">23 Feb 2013</span></span><span class="rss-description"><div id="post5"><p>The n-ary cartesian product (on lists) returns the cartesian product of a list of list, rather than just two lists: <code>product [[1]; [2;3]; [4;5]]</code> is <code>[[1;2;4]; [1;2;5]; [1;3;4]; [1;3;5]]</code>. The result is the empty list as soon of one of the input lists is empty. But what is the product of the empty list of lists?</p>
<p>I first answered this question with mathematical considerations that, while working on set theory, will fell familiar to anyone having worked with dependent types. But there is a direct, much simpler answer <em>in the code</em>.</p>




<p>The motivation for this post was a <a href="https://github.com/ocaml-batteries-team/batteries-included/issues/359">bug report</a> on the bugtracker of the Batteries library project, in which user wistery-k noticed the <code>BatList.n_cartesian_product</code> function incorrectly failed on empty lists.</p>
<h3 id="a-view-from-the-theory">A view from the theory</h3>
<a onclick="switchContent('post5','post6')" class="btn" href="#eb5f3e93ab87a2e7e16b88def1b1fdfb">Read more...</a></div><div id="post6" style="display: none"><p>The n-ary cartesian product (on lists) returns the cartesian product of a list of list, rather than just two lists: <code>product [[1]; [2;3]; [4;5]]</code> is <code>[[1;2;4]; [1;2;5]; [1;3;4]; [1;3;5]]</code>. The result is the empty list as soon of one of the input lists is empty. But what is the product of the empty list of lists?</p>
<p>I first answered this question with mathematical considerations that, while working on set theory, will fell familiar to anyone having worked with dependent types. But there is a direct, much simpler answer <em>in the code</em>.</p>




<p>The motivation for this post was a <a href="https://github.com/ocaml-batteries-team/batteries-included/issues/359">bug report</a> on the bugtracker of the Batteries library project, in which user wistery-k noticed the <code>BatList.n_cartesian_product</code> function incorrectly failed on empty lists.</p>
<h3 id="a-view-from-the-theory">A view from the theory</h3>
<p>What is the n-ary cartesian product? In the result list of the product of <code>[[1]; [2;3]; [4;5]]</code>, each list corresponds to a choice, in each of the input lists, of one element. For example the result list <code>[1;3;4]</code> corresponds to taking the only element of the first list, the second element of the second list, and the first element of the third list. All such possible choices of one element in each list is represented in the output.</p>
<p>To reason about this function, we should therefore model those element choices. A natural choice is to represent lists as <em>families</em> over a set of indices. For example, <code>[3;4]</code> could be modeled by a function from the parameter set <code>{0,1}</code> to the elements, mapping <code>0</code> to <code>3</code> and <code>1</code> to <code>4</code>.</p>
<p>In order to prevent using an index into a list as an index into another list by mistake, we will rather use <em>abstract</em> sets of indices -- the usual technique of type abstraction. We will designate the input lists by a parameter in an abstract index set, <code>I</code>, and each element of the <code>i</code>-th input list by an index in another abstract index set, <code>J i</code>. Notice that <code>J</code> is here an indexed family of index sets. Finally, to each pair of an index <code>i</code> in <code>I</code> (we'll write <code>i : I</code>) in the outer list and <code>j : J i</code> in the <code>i</code>-th inner list corresponds an element <code>elem i j</code> (if we really see lists as functions from indices to elements, <code>elem</code> is just the input list of lists). All list elements have the same type <code>A</code> -- a finer-grained choice would not help us here.</p>
<p>In this context, a "choice" of an element for each lists of the input can be represented as a function from the index (<code>i : I</code>) of a list to the index (in <code>J i</code>) of its chosen element: they live in the dependent function space <code>(i : I) -&gt; J i</code>. The n-ary cartesian product is a list with one element for such a choice; in other terms, it is a list indexed by <code>(i : I) -&gt; J i</code> taken as an index set. For each such choice function, we return a list of elements, one per list of the input list of lists, that a family of type <code>I -&gt; A</code>.</p>
<p>Putting it all together: if we represent lists as indexed families, the n-ary cartesian product has the following type and formal implementation (I'm using parenthesis and braces interchangeably to make it easier to see the delimiter nesting).</p>
<pre><code>product : ((i : I) -&gt; {J i -&gt; A})
       -&gt; ({(i : I) -&gt; J i} -&gt; (I -&gt; A))
product elem = (fun choice -&gt; (fun i -&gt; elem i (choice i))</code></pre>
<p>We take a family over <code>I</code> of families over <code>J</code> of elements of type <code>A</code> (a list of lists), and return a family over choice functions <code>(i:I) -&gt; J i</code> of families over <code>I</code> (a lists of lists).</p>
<p>This gives us a firm formal standing to understand the behavior of the n-ary cartesian product on lists. We can first check that it coincides with our intuition in two well-understood edge cases, namely the product of a list of singletons, and the product of a list of a single list. We'll then see what this tells us of the n-ary product of no lists at all.</p>
<p>A singleton list can be modeled as being indexed by a singleton index set, which we will write <code>{*}</code> (<code>*</code> is an unnamed and un-interesting element). If we pass as input to <code>product</code> an <code>I</code>-indexed list of singleton, this means that each <code>J i</code> is <code>{*}</code>: we start from a value of type <code>I -&gt; ({*} -&gt; A)</code>, and return a <code>({(I -&gt; {*}) -&gt; (I -&gt; A)</code>. As there is only one function from <code>I</code> to <code>{*}</code>, that constantly returns <code>*</code>, there is only one possible choice, so our return list has to have only one element, which is indexed over <code>I</code>: it is the list of elements of our input singleton lists. <code>product [[1]; [2]; [3]]</code> is <code>[1; 2; 3]</code>.</p>
<p>The motivated reader can check that the return type corresponding to a single input list, that is <code>{*} -&gt; (J * -&gt; A)</code>, conversely tells us that we will get as return a <code>J*</code>-indexed list of singletons: <code>product [[1;2;3]]</code> is <code>[[1]; [2]; [3]]</code>.</p>
<p>Finally, a product of no list should take an input with type <code>(x : ∅) → ((j : J x) -&gt; A)</code>, with one family <code>J x</code> for each element <code>x</code> of the empty set, that is no <code>J</code> families at all. Correspondingly, the return value should map choice functions <code>(x : ∅) -&gt; J x</code> into lists of the form <code>∅ -&gt; A</code>. There is exactly one such choice function: it is a function whose graph is the empty set, that maps no element from its input type to elements of its output type (or, as a list of chosen indices, the empty list). And the list returned for this choice, of the form <code>∅ -&gt; A</code>, can only be the empty list. So <code>product []</code> should return <code>[[]]</code>.</p>
<h3 id="a-simpler-counting-argument">A simpler counting argument</h3>
<p>The length of the n-ary cartesian product is the product of the length of all input lists. Our example with input lists of sizes 1, 2 and 2 returned 4 lists as output. The length of the n-ary product of no lists should be the 0-ary product of sizes, namely the neutral element for multiplication, 1.</p>
<p>Finally, taking an empty <code>'a list list</code> as input, there is only one way to return a value of type <code>'a list list</code> that has one element: this element has to be the empty list <code>[]</code>, so the complete result must be <code>[[]]</code> -- enforced by parametricity.</p>
<p>(I'm not fond of those counting arguments, because they are fundamentally based on forgetting which kind of objects we're really working with, studying only cardinality rather than the actual lists. This can often set our intuition on the right track, but can also be misleading in some edge cases where different fields would make different choices of simplifications, such as the much-debated question of how should exponentiation be extended to define <code>0^0</code>.)</p>
<h3 id="the-view-from-the-code">The view from the code</h3>
<p>The buggy implementation was the following:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> <span class="kw">rec</span> n_cartesian_product = <span class="kw">function</span>
| [] -&gt; <span class="kw">assert</span> <span class="kw">false</span>
| [l] -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; [i]) l
| h :: t -&gt;
    <span class="kw">let</span> rest = n_cartesian_product t <span class="kw">in</span>
    List<span class="kw">.</span>concat
      (List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> r -&gt; i :: r) rest) h)</code></pre>
<p>A correct implementation (which was provided by wistery-k) should be of the following form:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> <span class="kw">rec</span> n_cartesian_product = <span class="kw">function</span>
| [] -&gt; <span class="co">(* ? *)</span>
| h :: t -&gt;
    <span class="kw">let</span> rest = n_cartesian_product t <span class="kw">in</span>
    List<span class="kw">.</span>concat
      (List<span class="kw">.</span>map (<span class="kw">fun</span> i -&gt; List<span class="kw">.</span>map (<span class="kw">fun</span> r -&gt; i :: r) rest) h)</code></pre>
<p>The key point is that the value returned for <code>[]</code> should allow to express the former base case <code>[l]</code> as an instance of the general case <code>h :: t</code>. There is only one choice with this property, and it is <code>[[]]</code>.</p>
<p>No theoretical considerations make as strong an argument as this one: the <em>right</em> answer is the one that makes the code <em>elegant</em>.</p><a onclick="switchContent('post6','post5')" class="btn" href="#eb5f3e93ab87a2e7e16b88def1b1fdfb">Hide</a></div></span>
<a name="5faed7c033c8c4479a9024de0dc1bbbd"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=785"> Piqi 0.6.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">21 Feb 2013</span></span><span class="rss-description">Protocol Buffers, JSON and XML serialization".</span>
<a name="8bbd270a14fe70e04c0fc3ce452093ba"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=848"> Merlin</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">21 Feb 2013</span></span><span class="rss-description">Merlin is a tool
which providessmart completion, among other things, in your favorite editor.
As of today, Vim and Emacs are supported.</span>
<a name="6419d96eea6ef544d4299561d836c7cd"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/quick-tip-the-ocamlbuild-documentation-option"> Quick tip: the ocamlbuild -documentation option</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">20 Feb 2013</span></span><span class="rss-description"><div id="post7"><p>A quick and dirty blog post about the <code>-documentation</code> option of <code>ocamlbuild</code>, how to use and understand its output.</p>




<p>I've been overloaded since returning from POPL, and all the nice and interesting blog posts I planned to polish and publish are still in the drawers. In the meantime, I'm recycling emails that may be of interest to some of our beloved readers.</p>
<p>This post comes from a conversation with Cedric Cellier, which was wondering how to tell ocamlbuild to use the <code>-custom</code> option to (bytecode) compile his OCaml program.</p>
<h4 id="the-ocamlbuild--documentation-option">The ocamlbuild <code>-documentation</code> option</h4>
<a onclick="switchContent('post7','post8')" class="btn" href="#6419d96eea6ef544d4299561d836c7cd">Read more...</a></div><div id="post8" style="display: none"><p>A quick and dirty blog post about the <code>-documentation</code> option of <code>ocamlbuild</code>, how to use and understand its output.</p>




<p>I've been overloaded since returning from POPL, and all the nice and interesting blog posts I planned to polish and publish are still in the drawers. In the meantime, I'm recycling emails that may be of interest to some of our beloved readers.</p>
<p>This post comes from a conversation with Cedric Cellier, which was wondering how to tell ocamlbuild to use the <code>-custom</code> option to (bytecode) compile his OCaml program.</p>
<h4 id="the-ocamlbuild--documentation-option">The ocamlbuild <code>-documentation</code> option</h4>
<p>The command <code>ocamlbuild ... -documentation</code> explains the set of rules and tags understood by this particular ocamlbuild invocation (which can depend on the plugin, other options passed to <code>ocamlbuild</code>, etc..). It returns a very long output, that contains information about both all <em>rules</em> known by ocamlbuild (which tells him how to dynamically look for the dependencies of a given target) and all <em>tags</em> (which add flags to the compilation command for a given target). Some representative examples on my system:</p>
<pre><code>...

rule
  "ocaml: cmx* &amp; o* -&gt; native"
  ~deps:[ %.cmx; %.o ]
  ~prods:[ %.native ]
  &lt;fun&gt;

rule
  "ocaml: mllib &amp; d.cmo* -&gt; d.cma"
  ~deps:[ %.mllib ]
  ~prods:[ %.d.cma ]
  &lt;fun&gt;

...

flag {. byte, debug, link, ocaml, program .} "-g"

flag {. byte, compile, debug, ocaml .} "-g"

flag {. link, native, ocaml, use_camlp4_bin .} "+camlp4/Camlp4Bin.cmx"

flag {. byte, link, ocaml, use_camlp4_bin .} "+camlp4/Camlp4Bin.cmo"

flag {. compile, ocaml, use_camlp4_full .}
  "-I +camlp4/Camlp4Parsers -I +camlp4/Camlp4Printers -I +camlp4/Camlp4Filters"</code></pre>
<p>While it won't tell you everything (you don't know which <code>&lt;fun&gt;</code> is hiding under the <code>.d.cma</code> rule above, so you'll need to look at the manual or try it to what this extension means), grepping this output is a good way to find about ocamlbuild tags you didn't know about, and look for specific features. So for our <code>-custom</code> question:</p>
<pre><code>$ ocamlbuild -documentation | grep custom
flag {. byte, custom, library, link, ocaml .} "-custom"
flag {. byte, custom, link, ocaml, program .} "-custom"</code></pre>
<p>This tells us that <code>-custom</code> will be added to the compilation command when either one of this list of flags is present for the target being compiled -- this is similar to the predicate system of <code>ocamlfind</code>.</p>
<h4 id="knowing-which-flags-are-present-thats-what-_build_log-is-for">Knowing which flags are present: that's what <code>_build/_log</code> is for</h4>
<p>In this simple case it's enough to just try to add the <code>custom</code> tag to your ocamlbuild invocation (either in the <code>_tags</code> or on the command line directly) and check that it works. But in general you may want to know about precisely which of those flags are already present under your current compilation settings, and which should be added. For that, the log is your friend.</p>
<pre><code>$ cd /tmp
$ mkdir ocamlbuild-test; cd ocamlbuild-test
$ touch test.ml
$ ocamlbuild test.byte
Finished, 3 targets (0 cached) in 00:00:00.
$ cat _build/_log 
### Starting build.
# Target: test.ml.depends, tags: { extension:ml, file:test.ml, ocaml, ocamldep, quiet }
.../bin/ocamldep.opt -modules test.ml &gt; test.ml.depends
# Target: test.cmo, tags: { byte, compile, extension:cmo, extension:ml, file:test.cmo, file:test.ml, implem, ocaml, quiet }
.../bin/ocamlc.opt -c -o test.cmo test.ml
# Target: test.byte, tags: { byte, dont_link_with, extension:byte, file:test.byte, link, ocaml, program, quiet }
.../bin/ocamlc.opt test.cmo -o test.byte
# Compilation successful.</code></pre>
<p>There you are: ocamlbuild called <code>ocamldep</code> to look for dependencies, then compiled the module, then linked it. And you have the list of all flag presents at each step in the process. You can check that besides <code>custom</code>, the necessary <code>byte, link, ocaml, program</code> are all present during the linking phase.</p>
<pre><code>$ ocamlbuild -tag custom test.byte
Finished, 3 targets (2 cached) in 00:00:00.
scherer@jurancon:/tmp/ocamlbuild-test $ cat _build/_log 
### Starting build.
# Target: test.ml.depends, tags: { custom, extension:ml, file:test.ml, ocaml, ocamldep, quiet }
.../bin/ocamldep.opt -modules test.ml &gt; test.ml.depends # cached
# Target: test.cmo, tags: { byte, compile, custom, extension:cmo, extension:ml, file:test.cmo, file:test.ml, implem, ocaml, quiet }
.../bin/ocamlc.opt -c -o test.cmo test.ml # cached
# Target: test.byte, tags: { byte, custom, dont_link_with, extension:byte, file:test.byte, link, ocaml, program, quiet }
.../bin/ocamlc.opt -custom test.cmo -o test.byte
# Compilation successful.</code></pre>
<p>The <code>custom</code> tag was added to all compilation phases (we may have been more precise by adding it in <code>_tags</code> as a tag on <code>test.byte</code> only, so that it gets added only during the linking step), and resulted to the addition of the <code>-custom</code> flag. Job done. Notice that ocamlbuild only runs the linking command again, as the output of the others are already cached.</p><a onclick="switchContent('post8','post7')" class="btn" href="#6419d96eea6ef544d4299561d836c7cd">Hide</a></div></span>
<a name="13687fd2f726142a177153db4ec36e32"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.02.19.html"> Caml Weekly News, 19 Feb 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">19 Feb 2013</span></span><span class="rss-description">ocp-indent 1.0.0 release / Old and new OCaml installed on same machine? / Sequence 0.3.1 / Other Caml News</span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
