<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="https://static.ocamlcore.org/official/images/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/latest.html">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="../books.html#manual">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings.html">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://www.ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://blog.mestan.fr/feed/?cat=16">Alp Mestan</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://unnali.com/tag/ocaml/feed/">Arlen Cuss</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://procrastiblog.com/category/ocaml/feed/">Christopher Conway</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://blog.dbpatterson.com/rss">Daniel Patterson</a></li><li><a href="http://nleyten.com/atom.aspx">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://bentobako.org/david/blog/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/?feed=rss2&cat=4">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/CodeHacking/Ocaml/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/FP-Syd/index.rss20">FP-Sydney</a></li><li><a href="http://www.blogger.com/feeds/8964007124326996693/posts/default/-/ocaml">Fayssal Martani</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/comments/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/rss?tag=ocaml">Jamie Brandon</a></li><li><a href="http://ocaml.janestcapital.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://savonet.sourceforge.net/liquidsoap.rss">Liquidsoap</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="http://eigenclass.org/R2/feeds/rss2/all">Mauricio Fernandez</a></li><li><a href="http://www.elehack.net/michael/blog/tags/ocaml?format=rss">Michael Ekstrand</a></li><li><a href="http://www.rktmb.org:82/feed/category/work/ocaml/atom">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocamlhackers.ning.com/profiles/blog/feed?tag=ocaml&xn_auth=no">OCaml Hackers</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://redlizards.com/blog/feed/?tag=ocaml">Red Lizard Software</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://www.nicollet.net/toroidal/ocaml/feed/">Victor Nicollet</a></li><li><a href="http://y-node.com/blog/feeds/tag/ocaml/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="14157a6ff510a7115b1195580c0b23fd"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/introduction-to-mezzo-2"> Introduction to Mezzo, continued</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">30 Jan 2013</span></span><span class="rss-description"><div id="post1"><p>In the previous blog post, I introduced a new framework for reasoning about programs: permissions, a sort of hybrid between a type system and a program logic. The main selling point is that it allows one to reason in a finer-grained manner about programs. The current incarnation of the permission mechanism is <a href="http://gallium.inria.fr/~protzenk/mezzo-lang/"><em><strong>Mezzo</strong></em></a>, a language in the tradition of ML.</p>
<p>The first question that comes fairly naturally is: why are we going such great lengths trying to design such a complex reasoning framework? Here are some answers:</p>
<ul>
<li>since mutable portions of the heap have a unique owner, programs written in <em><strong>Mezzo</strong></em> enjoy the property that they are data-race free, that is, we may never have two people trying to access a writable location at the same time;</li>
<li>thus, we are allowed to perform strong updates, that is, updates that change the type of a variable.</li>
</ul>
<a onclick="switchContent('post1','post2')" class="btn" href="#14157a6ff510a7115b1195580c0b23fd">Read more...</a></div><div id="post2" style="display: none"><p>In the previous blog post, I introduced a new framework for reasoning about programs: permissions, a sort of hybrid between a type system and a program logic. The main selling point is that it allows one to reason in a finer-grained manner about programs. The current incarnation of the permission mechanism is <a href="http://gallium.inria.fr/~protzenk/mezzo-lang/"><em><strong>Mezzo</strong></em></a>, a language in the tradition of ML.</p>
<p>The first question that comes fairly naturally is: why are we going such great lengths trying to design such a complex reasoning framework? Here are some answers:</p>
<ul>
<li>since mutable portions of the heap have a unique owner, programs written in <em><strong>Mezzo</strong></em> enjoy the property that they are data-race free, that is, we may never have two people trying to access a writable location at the same time;</li>
<li>thus, we are allowed to perform strong updates, that is, updates that change the type of a variable.</li>
</ul>
<p>The latter item may seem of dubious usefulness; indeed, the <code>mswap</code> example that I used seems artificial, and I have never needed it in practice. However, the example of <code>concat</code> at the end of the <a href="http://gallium.inria.fr/blog/introduction-to-mezzo/">previous post</a> is much more useful: it is emblematic of a more general concept of “destination-passing-style” algorithms that allow one to write functions in a safe, tail-recursive way, without resorting to unsafe hacks.</p>
<p>However, as I hinted in the conclusion of the previous blog post, with the elements I have presented so far, there are some serious limitations.</p>
<p>In this blog post, I will introduce a novel mechanism called <em>adoption</em> and <em>abandon</em>, which allows one to safely alias mutable data, while remaining inside the permission framework; in particular, this means we'll continue to guarantee the unique-owner property for mutable blocks. Of course, there's no free lunch: this <em>adoption</em> and <em>abandon</em> mechanism incurs a dynamic cost at runtime.</p>




<h3 id="a-story-of-adoption-and-abandon">A story of adoption and abandon</h3>
<h4 id="meet-the-fifo-our-favorite-example">Meet the fifo, our favorite example</h4>
<p>The running example in this section will be a first-in first-out structure, that is, a fifo. Cells are appended at the end, and popped from the front of the fifo. The loop at the end of the fifo is just a trick to avoid making the <code>next</code> field an <code>option</code> type.</p>
<div class="figure">
<img src="http://gallium.inria.fr/blog/fifo.svg" alt="The pointer structure of the fifo"/><p class="caption">The pointer structure of the fifo</p>
</div>
<ul>
<li>The type <code>cell</code> is mutable: we need to rewire the pointers when we we call either <code>retrieve</code> or <code>insert</code> on the fifo.</li>
<li>The type <code>fifo</code> is also mutable, since its <code>head</code> and <code>tail</code> fields change over time.</li>
</ul>
<h4 id="an-aliasing-problem">An aliasing problem</h4>
<p>One can see already that there is a problem with this aliasing pattern. If there's only one element in the fifo, and the user does:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">let</span> x = fifo.head <span class="kw">in</span>
<span class="kw">let</span> y = fifo.tail <span class="kw">in</span>
<span class="co">(* x @ cell ∗ y @ cell *)</span></code></pre>
<p>...then the user has aliased the same cell, and has two exclusive permissions for it. This is a violation of our rules, and the permission system definitely won't allow that! So we can't declare the <code>head</code> and <code>tail</code> field to be <code>cell</code>s...</p>
<h4 id="getting-back-an-ownership-tree">Getting back an ownership tree</h4>
<p>In essence, the problem is that the ownership graph is not a forest, and the permission system can only express forest-like ownership patterns. We need to move back to a forest-like ownership pattern. We achieve this through the <em>adoption</em> mechanism.</p>
<p>We say that the fifo can now <em>adopt the cells</em>. That is, the permission for the cells is “hidden” under the permission for the fifo; in other words, if you own the fifo, you own the cells. Once adopted, the type of a cell changes to reflect the fact that it may be owned by someone else.</p>
<h5 id="some-data-types">Some data types</h5>
<p>Let us first take a look at the definition of type <code>fifo a</code> and <code>cell a</code>, respectively fifo and cells holding elements of type <code>a</code>.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">mutable</span> data fifo a =
  | <span class="dt">Empty</span> { head: (); tail: () }
  | <span class="dt">NonEmpty</span> { head: dynamic; tail: dynamic }
adopts cell a

<span class="kw">mutable</span> data cell a =
  | <span class="dt">Cell</span> { contents: a; next: dynamic }</code></pre>
<p>The important point here is the <code>adopts</code> clause that's attached to the definition of <code>fifo</code>; this clause refers to the whole type. We will see in a minute the meaning of type <code>dynamic</code>.</p>
<h5 id="adoption">Adoption</h5>
<p>The first operation consists in giving up our ownership of a cell, and transferring it to the fifo object.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="co">(* x @ cell a ∗ f @ fifo a *)</span>
give x <span class="kw">to</span> f;
<span class="co">(* x @ dynamic ∗ f @ fifo a *)</span></code></pre>
<p>After we've given up our knowledge of <code>x</code>, we no longer know that it is a cell. The only thing that remains for us to know about <code>x</code> is that it has type <code>dynamic</code>: it means that <code>x</code> may be currently adopted by someone.</p>
<p>What is the point, then, of giving up our knowledge of <code>x</code>? The key difference is that, unlike <code>cell a</code>, <code>dynamic</code> is a duplicable type, which means we can alias <code>x</code>.</p>
<h5 id="abandon">Abandon</h5>
<p>The converse operation, abandon, works as follows; it allows one to regain the whole knowledge about a variable; in our case, regain the permission <code>x @ cell a</code>.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="co">(* x @ dynamic ∗ f @ fifo a *)</span>
take x from f;
<span class="co">(* x @ cell a ∗ f @ fifo a *)</span></code></pre>
<p>How do we know that the type that <code>x</code> should regain is <code>x @ cell a</code>? This is achieved by doing a lookup on the definition of <code>f</code>, and seeing that fifos adopt elements of type <code>cell a</code>.</p>
<p>An element, in order to be an adopter, must be mutable. Moreover, adopters can only adopt one type of elements.</p>
<p>The safety of the whole thing depends on the fact that the <em>take</em> operation must never succeed twice, otherwise we could have <code>x @ cell a ∗ x @ cell a</code>: this would be a definite breach of soundness.</p>
<p>The general idea is that when you <code>give</code> an element, you become free to alias it, but it is your responsibility to make sure you never <code>take</code> it twice, that is, to make sure you never call <code>take x from f; take y from f</code> with <code>x</code> and <code>y</code> being aliases. In the case of the fifo, it is easy to make mistakes: if the fifo only has one element, the following code will fail:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml">take fifo.head from fifo;
take fifo.tail from fifo;</code></pre>
<h5 id="making-sure-the-code-fails">Making sure the code fails</h5>
<p>The last point that we need to address is how to make sure that the <em>take</em> operation cannot succeed twice for the same element. This is achieved using a hidden field and dynamic tests.</p>
<p>Each mutable object has a hidden field; the hidden field contains the address of the adopter if the object is currently adopted, <code>null</code> otherwise.</p>
<ul>
<li>When <code>give</code>'ing <code>x</code> to <code>f</code>, we set the hidden field of <code>x</code> to be the address of <code>f</code>.</li>
<li>When taking <code>x</code> from <code>f</code>, we check that the hidden field of <code>x</code> and the address of <code>f</code> match; if this is the case, we can safely assume that <code>x</code> has the type to be found in the <code>adopts</code> clause in the definition of the type of <code>f</code>; then, we null out the field.</li>
</ul>
<p>In the example of the one-element fifo, after taking <code>head</code>, the hidden field would be nulled out, and the second attempt to take <code>tail</code> would fail, since the value in the hidden field (<code>null</code>) and the address of the adopter would fail to match.</p>
<h4 id="illustrating-all-these-concepts">Illustrating all these concepts</h4>
<p>In order to better understand how we use all these mechanisms to type-check a program, we have a step-by-step animation explaining how a given piece of code is type-checked. We chose the <code>insert</code> function that inserts an element into the fifo.</p>
<p><a href="http://gallium.inria.fr/blog/insert-full.raw.html" class="fancybox fancybox.iframe">See the <code>insert</code> example</a> (use the "step forward" and "step back" links).</p>
<p>Some notes about this example:</p>
<ul>
<li>the <code>dynamic</code> permission is always available on-demand for <code>x</code>, as long as we know that there is an exclusive permission for <code>x</code>;</li>
<li>we use the <code>tag of &lt;-</code> instruction; it allows one to <em>change the tag</em> of a value; the definition for the new tag must have the same number of fields;</li>
<li>structural types feature an <code>adopts</code> clause – without it, the system would be unsound;</li>
<li>when we enter the function, the permissions we gain are those brought to us through the arguments;</li>
<li>when we exit the function, we must make sure <code>f @ fifo a</code> is still available; however, because <code>x</code> is consumed, we don't have anything to ensure about <code>x</code>.</li>
</ul>
<h4 id="the-power-of-adoptionabandon">The power of adoption/abandon</h4>
<p>Adoption and abandon provide an easy escape hatch to make sure you can write your program, even if the aliasing pattern is too complex to be expressed in the pure permission mechanism. The <code>give</code> and <code>take</code> operations are thread-safe; they incur no race conditions, that is, <code>give</code> cannot succeed in two separate threads simultaneously.</p>
<p>Of course, there is a penalty, both in terms of memory space (hidden field) and runtime tests (<code>give</code> and <code>take</code> operations). Time will tell whether this is something that we can live with, or if it is too expensive. A short-term goal is to allow one to declare a data type is being “slim” (no hidden field) or “fat” (with a hidden field). A long-term goal is to allow one to plug in a proof that the extra dynamic tests are not needed, so that the compiler can skip the tests altogether.</p>
<h3 id="what-is-the-state-of-mezzo">What is the state of <em><strong>Mezzo</strong></em>?</h3>
<p>If you've reached that stage of the blog post, you have my entire gratitude, as this was quite a technical topic and I'm afraid it has been fairly long.</p>
<h4 id="the-prototype">The prototype</h4>
<p>We currently have a prototype type-checker that is available on our <a href="http://gallium.inria.fr/~protzenk/mezzo-lang/">web page</a>, along with several examples of programs that the type-checker currently accepts. There is a fairly long to-do list, and the type-checker is currently unsound in many corners, but this is something that we're aware of and that we know how to fix.</p>
<h4 id="concurrency">Concurrency</h4>
<p>Of course, if we are to go such great lengths, we might as well have concurrency built into the language. <a href="http://gallium.inria.fr/~balabons/">Thibaut Balabonski</a> is currently tackling the problem. Here is an example of how we could leverage the permission mechanism:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml">abstract lock (p: perm)
fact duplicable (lock p)
<span class="kw">val</span> create @ [p :: <span class="dt">PERM]</span> () -&gt; lock p
<span class="kw">val</span> acquire @ [p :: <span class="dt">PERM]</span> lock p -&gt; (| p)
<span class="kw">val</span> release @ [p :: <span class="dt">PERM]</span> (lock p | consumes p) -&gt; ()</code></pre>
<p>A lock simply protects access to a permission (think of <code>p</code> as <code>x @ ref int</code> where <code>x</code> is a variable in scope). You can copy the lock around, pass it to other threads, and try to <code>acquire</code> it: when you succeed, you obtain the permission. When you want to <code>release</code> the lock, you must give up the permission from your context.</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml">data outcome (p :: <span class="dt">PERM</span>) =
  | <span class="dt">Success</span> { | p }
  | <span class="dt">Failure</span> { }

<span class="kw">val</span> try_acquire @ [p :: <span class="dt">PERM]</span> lock p -&gt; outcome p</code></pre>
<p>If we were to implement <code>try_acquire</code>, we could write a data type that expresses the fact that in case the operation succeeds, you obtain <code>p</code> in the corresponding <code>match</code> branch.</p>
<p>The signature for a <code>spawn</code> function could be as follows:</p>
<pre class="sourceCode ocaml"><code class="sourceCode ocaml"><span class="kw">val</span> spawn (f: (|p) -&gt; () | p) -&gt; ()</code></pre>
<p>...where <code>f</code> requires a set of permissions <code>p</code> to execute, and <code>spawn</code> takes <code>p</code> from its caller, and uses it to launch <code>p</code>.</p>
<h4 id="compilation">Compilation</h4>
<p>We had an intern, Henri Chataing, work on a very prototype-ish implementation of a compilation scheme emitting OCaml code with calls to <code>Obj.magic</code> sprinkled in the right places. We're unsure as to whether that's the right direction; we're also considering emitting CIL code, or C# code directly to take advantage of the real multithreaded capabilities of the CLR...</p>
<h4 id="i-want-to-participate">I want to participate!</h4>
<p>We have many opportunities for internships, do contact us if you feel like you want to work on designing an exciting new language!</p><a onclick="switchContent('post2','post1')" class="btn" href="#14157a6ff510a7115b1195580c0b23fd">Hide</a></div></span>
<a name="f81fa2e6263500a46851e7258409c210"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=869"> ocurl 0.5.4 released</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">29 Jan 2013</span></span><span class="rss-description"><pre class="rss-text">ocurl is the set of bindings to libcurl - URL transfer library, supporting HTTP and many other protocols.

This project is the fork of http://ocurl.sourceforge.net/ and accumulates many bugfixes and enhancements which didn't make it to the original version, including the multi API wrappers and pluggable asynchronous interface (which makes it possible to inject curl transfers in your event loop of choice). This is the first release for the fork, that incorporates all the bugfixes and new features from 3 years of its history, except the asynchronous api. Next release will merge branch event.

I would like to thank Lars Nilsson, the original author of ocurl, who brought this project to existence.</pre></span>
<a name="f8948c49e20787054d82ce6dd7144808"></a><span class="rss-header"><span class="rss-title"><a href="http://blog.elehack.net/tagged/ocaml?format=rss/9d1ead73e678fa2f51a70a933b0bf017"> Not Found</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Michael Ekstrand</span>, <span class="rss-date">29 Jan 2013</span></span><span class="rss-description"><p>The URL you requested could not be found.</p></span>
<a name="4c4775ee631d70b703ad0f029d59c21b"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.01.29.html"> Caml Weekly News, 29 Jan 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">29 Jan 2013</span></span><span class="rss-description">beta-release of OPAM / Portable timeout function / omonad-0.0.1 / OCaml 4.00.1 for Android: OPAM packages / Working Group: the future of syntax extensions in OCaml, after camlp4 / If I wanted to write SWIG in OCaml, what library would I need? / Datalog-0.1 / CWN archive links / Other Caml News</span>
<a name="c8cb9f4fd1ec2a3d96ba66274368ae69"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/projects/ocurl/"> ocurl</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge Projects</span>, <span class="rss-date">28 Jan 2013</span></span><span class="rss-description">bindings to libcurl &lt;http://curl.haxx.se/libcurl/&gt;. This is a fork of &lt;http://ocurl.sourceforge.net/&gt;, with multi API wrappers and pluggable asynchronous interface.</span>
<a name="4500c6dfee297759b237d6b0101e99f5"></a><span class="rss-header"><span class="rss-title"><a href="http://bentobako.org/david/blog/index.php?post/2013/01/28/The-failures-of-Debian-%28and-its-derivatives%29"> The failures of Debian (and its derivatives)</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">David Mentré</span>, <span class="rss-date">27 Jan 2013</span></span><span class="rss-description"><div id="post3"><p>I am a long term Debian user. I have used Debian since probably the mid 90' up to now. I use latest Debian stable on my personal server or at work, and Ubuntu on my desktop and laptop machines at home. Using it does not mean I am entirely satisfied with it to say the least. I think the distribution is not making enough efforts for its users and I'll try to explain why. Of course, YYMV. ;-)</p>

<a onclick="switchContent('post3','post4')" class="btn" href="#4500c6dfee297759b237d6b0101e99f5">Read more...</a></div><div id="post4" style="display: none"><p>I am a long term Debian user. I have used Debian since probably the mid 90' up to now. I use latest Debian stable on my personal server or at work, and Ubuntu on my desktop and laptop machines at home. Using it does not mean I am entirely satisfied with it to say the least. I think the distribution is not making enough efforts for its users and I'll try to explain why. Of course, YYMV. ;-)</p>

<ul>
<li><strong>Debian packaging is made for developers, not users</strong>. Debian has too many packages. To take just one example, the OCaml compiler is packaged into the main compiler, its libraries, the native compiler and the byte code one, etc. Why so many packages? If I am an OCaml developer, I want all of them so why do I need to manually find (the naming is far from being obvious, at least for beginners) and install so many packages? I have heard of several reasons: it allows to factorise common parts between the different binary architectures, it allows to install the command line only parts without the graphics parts, it allows to install only what the user wants, etc. For me, those reasons are just plain wrong. We have more and more disk capacity on our machines so disk usage is no longer a limitation. The package should be able to dynamically activate the graphic parts automatically if the X server is available. And the factorisation of shared parts between Debian architectures should be done on the servers storing the packages, not trough the packaging system.</li>
</ul>
<ul>
<li><strong>Debian has out-dated software</strong>. Debian Wheezy is about to be released and it will have GNOME 3.4. But GNOME 3.6 is already out and GNOME 3.8 is on its way. And I am taking GNOME as an example, it is the same issue for lot of software within Debian. I have heard this is for stability issues. But software packaged in Debian is already stable! It should take 10 or 15 days to integrate a new software into Debian stable, not months or even years (the time between successive stable releases). I acknowledge that some packages have complex interdependencies between each others. For example, when a new release of the OCaml compiler is out, one needs to recompile all OCaml packages. But this constraint is only for OCaml packages. Why should I wait for a new stable version of Debian to get the newly released OCaml compiler? For me this sounds just plain wrong.</li>
</ul>
<ul>
<li><strong>Nobody uses plain Debian stable</strong>. Debian developers are using unstable. Debian users are using Debian stable, but enriched with backports because of out-dated software. Or derivatives like Ubuntu. The fact the Debian developers are not using what they recommend to users is bogus. I know they do that for technical reasons, but that should not be a good reason. Debian developers should use what they are providing to their users, except maybe for a few packages they are working on.</li>
</ul>
<ul>
<li><strong>There are too many dependencies between packages</strong>. The dependency system of Debian is a nice piece of work, it was ahead of its time when it was created. But the use of dependencies has been perverted. The dependencies are manually computed (thus source of errors and bugs) and at the same time any software can write to about any part of the file system. Due to too many dependencies and lack of clean interfaces between sub-systems, the installation of a recent user software can trigger a ton of packages down to a new kernel or libc. Why is it so? I think the sub-systems of Debian (e.g. the X graphical infrastructure, the kernel and base C libraries, the OCaml system, ...) should be isolated the one from the others. It would allow them to be updated without waiting for the others. Having dependencies between 29,000 packages is just not scalable. It is even more true if those dependencies are manually computed.</li>
</ul>
<ul>
<li><strong>Debian packaging is lacking automation</strong>. I am a developer. Debian packagers are developers. It always astonished me how much manual work should be done to make and maintain a Debian package. All developers know that if they want to be efficient, they need to automate their work as much as possible, so as to be able to focus their manpower on the complex parts. Everything should be automated in Debian packages, starting from a minimal description file. Automation should be the default (package creation, test, static analysis, ...), not the exception.</li>
</ul>
<ul>
<li><strong>One cannot install simultaneously several versions of the same software</strong>. As a user or developer, I want to use the stable version of a piece of software and maybe the latest stable version that just have been released in order to do a few tests or check that my software still compiles with the new shiny compiler. Debian does not allow me to do that. And if I install a newer package, downgrading to the previous version is complex and error prone.</li>
</ul>
<ul>
<li><strong>Debian is undocumented</strong>. I am not talking about the installation guide which is nice, I am talking about the modifications made to software by Debian developers. Doing modification on the "standard" (for the software) way of configuring or using it has always seemed suspect to me, even if I agree that having harmonized configuration is a real advantage (all configuration files in /etc for example). But all of those modifications should be documented in README.Debian file. To take an example, the last time I tried to install the dokuwiki Debian package, I was unable to configure it! The way to add new users had been changed compared to a regular dokuwiki (the web interface was disabled), and those changes were undocumented. It should be a release critical bug! Without proper documentation, the user cannot use the software. And, of course, the reason behind those changes should be questioned, even for security reasons (a very secure but unusable software is superfluous. Security is a trade-off).</li>
</ul>

<p>So, why I am complaining? Why I do not become a Debian Developer, so I can fix it? Because a single developer is not going to change the root causes of those issues. They need a massive development effort, or at least a massive acknowledgement by the Debian Developers. And I don't have ready-made answers to those issues (even if I have some ideas to solve them).</p>


<p>Is the grass greener in the other fields? I don't think so, or at least I am not aware of it. I like Debian for is community approach, its focus on Free Software (even if it is sometimes imperfect) and the wide range of software packaged in it (the OCaml packages are numerous for example). I just hope that the whole Debian community will focus on more user related issues in the future.</p><a onclick="switchContent('post4','post3')" class="btn" href="#4500c6dfee297759b237d6b0101e99f5">Hide</a></div></span>
<a name="424619e247ac889e3831cad027ca6cea"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=868"> Batteries 2.0 released</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">25 Jan 2013</span></span><span class="rss-description"><pre class="rss-text">Get it here: https://forge.ocamlcore.org/frs/download.php/1096/batteries-2.0.tar.gz

Detailed interface changes: https://forge.ocamlcore.org/frs/download.php/1096/batteries-2.0.tar.gz

API Docs: http://ocaml-batteries-team.github.com/batteries-included/hdoc2/index.html</pre></span>
<a name="04575a20f97416d0bb3e0e4c8838006c"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=842"> Odoc_xref 4.00</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">23 Jan 2013</span></span><span class="rss-description">Custom ocamldoc html generator with the capability to cross-reference material from libraries.</span>
<a name="b03d054bf8056f3b9f28f2b490e2b194"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=418"> odoc_check 4.00</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">23 Jan 2013</span></span><span class="rss-description">A generator which performs some controls on the collected information. For example: all values are commented, all types are commented, all exceptions have a version tag, ... All the possible controls are turned on/off with command line options.</span>
<a name="b25c698da96c0469a4d77c4a5a113fce"></a><span class="rss-header"><span class="rss-title"><a href="http://lpw25.net/2013/01/23/camlp4-alternative-part-1.html"> An alternative to camlp4 - Part 1</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_1">Leo White &#9001;leo<abbr title="(at) &rarr; @">(at)</abbr>lpw25.net (Leo White)&#9002;</span><script type="text/javascript"><!--;
local = "leo";
h = "lpw25.net (Leo White)";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + h + "\" >Leo White<\/a>";
//--></script></span>, <span class="rss-date">23 Jan 2013</span></span><span class="rss-description"><div id="post5"><p>Since its creation camlp4 has proven to be a very useful tool. People have used
it to experiment with new features for OCaml and to provide interesting
meta-programming facilities. However, there is general agreement that camlp4 is
too powerful and complex for the applications that it is most commonly used for,
and there is a growing movement to provide a simpler alternative.</p>

<p>The <a href="http://lists.ocaml.org/listinfo/wg-camlp4">wg-camlp4@lists.ocaml.org</a>
mailing list has been created to discuss implementing this simpler
alternative. This blog post is a way of kick-starting the discussion on this
list, by explaining my thoughts on what needs to be done.</p>

<a onclick="switchContent('post5','post6')" class="btn" href="#b25c698da96c0469a4d77c4a5a113fce">Read more...</a></div><div id="post6" style="display: none"><p>Since its creation camlp4 has proven to be a very useful tool. People have used
it to experiment with new features for OCaml and to provide interesting
meta-programming facilities. However, there is general agreement that camlp4 is
too powerful and complex for the applications that it is most commonly used for,
and there is a growing movement to provide a simpler alternative.</p>

<p>The <a href="http://lists.ocaml.org/listinfo/wg-camlp4">wg-camlp4@lists.ocaml.org</a>
mailing list has been created to discuss implementing this simpler
alternative. This blog post is a way of kick-starting the discussion on this
list, by explaining my thoughts on what needs to be done.</p>

<p>Personally, I think that providing a real alternative to camlp4 involves two
phases. The first phase is to provide support for implementing the most popular
camlp4 extensions without camlp4. Since the people who have implemented these
extensions already require good knowledge of the OCaml grammar it is not
unreasonable to expect a similar level of expertise to use the alternative. This
phase can easily be implemented before the next OCaml release, and I will
discuss what I think that will involve in the remainder of this post.</p>

<p>The second phase involves extending this support to allow general OCaml
programmers to write extensions, and to include such extensions within the
language itself rather than as part of a pre-processor. I will discuss my
thoughts on this phase in a later blog post.</p>

<h4>Camlp4 in the wild</h4>

<p>Camlp4 works by producing pre-processors that parse an OCaml file and then output
a syntax tree directly into the compiler. Extensions are written by extending
the default OCaml parser and converting any new syntax tree nodes into existing
OCaml nodes. Most of the complexity in camlp4 comes from its extensible
grammars, which gives camlp4 the ability to extend the OCaml syntax
arbitrarily. However, most applications do not need this ability.</p>

<p>From an ad-hoc survey of camlp4 extensions in the OPAM repository, most of the
popular camlp4 extensions seem to fall into one of three categories:</p>

<ul>
<li>
Type-conv style extensions such as 
<a href="https://bitbucket.org/yminsky/ocaml-core/wiki/Home">sexplib</a>, 
<a href="https://github.com/mirage/orm">ORM</a> and 
<a href="https://github.com/mirage/dyntype">dyntype</a>. 
These extend the syntax to allow code such as:

<div class="highlight"><pre><code class="ocaml"><span class="k">type</span> <span class="n">t</span> <span class="o">=</span>
<span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="kt">int</span> <span class="k">with</span> <span class="n">default</span><span class="o">(</span><span class="mi">42</span><span class="o">);</span>
  <span class="n">y</span> <span class="o">:</span> <span class="kt">int</span> <span class="k">with</span> <span class="n">default</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="n">sexp_drop_default</span><span class="o">;</span>
  <span class="n">z</span> <span class="o">:</span> <span class="kt">int</span> <span class="k">with</span> <span class="n">default</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="n">sexp_drop_if</span><span class="o">(</span><span class="n">z_test</span><span class="o">);</span> 
<span class="o">}</span> <span class="k">with</span> <span class="n">sexp</span>
</code></pre></div>

</li>
<li>
Extensions using camlp4's quotations syntax such as 
<a href="https://github.com/mirage/ocaml-cow">COW</a>. These look like:

<div class="highlight"><pre><code class="ocaml"><span class="o">&lt;:</span><span class="n">html</span><span class="o">&lt;</span> <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span> <span class="nc">Hello</span> <span class="n">world</span> <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>  <span class="o">&gt;&gt;</span>
</code></pre></div>

</li>
<li>
Other syntax extensions that could be expressed using existing syntax or the
camlp4 quotation syntax. For example, 
<a href="http://ocsigen.org/js_of_ocaml/">js_of_ocaml</a> provides a
<code>##</code> operator for accessing javascript objects. This could easily be replaced by
a valid operator such as <code>%%</code>.
</li>
</ul>


<p>By providing support for these specific kinds of extension, we can provide an
alternative to camlp4 for the majority of its applications.</p>

<h4>AST transformers, attributes and quotations</h4>

<p>A much simpler alternative to allowing arbitrary syntax extensions is to use
<em>AST transformers</em>, <em>attributes</em> and <em>quotations</em>.</p>

<p>AST transformers are simply functions that perform transformations on the OCaml
syntax tree. These can already be implemented using the new
"<a href="http://www.lexifi.com/blog/syntax-extensions-without-camlp4-lets-do-it">-ppx</a>"
command line option that has been included on the OCaml development trunk by
Alain Frisch. This option accepts a program as an argument, and pipes the syntax
tree through that program after parsing and before type checking.</p>

<p>Attributes are places in the grammar where generic data can be attached to the
syntax tree. This data is simply ignored by the main OCaml compiler, but it can
used be AST transformers to control transformations.</p>

<p>Quotations are any construct that is not lexed or parsed by the compiler. These
can be attributes, expressions, patterns etc. The contents of a quotation can be
lexed and parsed by an AST transformer and converted into a regular AST node.</p>

<p>Before support for attributes and quotations can be added to the compiler
decisions need to be made about what kinds of attributes and quotations to
support. Personally I prefer quotation attributes to attributes that are parsed
by the compiler because they are more flexible. However there is no reason that
both kinds cannot be supported by the compiler using different syntax.</p>

<p>I think that it is important to support at least the following kinds of attribute:</p>

<ul>
<li>
Simple named quotations for expressions, patterns and type expressions:

<div class="highlight"><pre><code class="ocaml"><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="o">&lt;:</span><span class="nn">Foo</span><span class="p">.</span><span class="n">foo</span> <span class="o">&lt;</span> <span class="n">some</span> <span class="n">random</span> <span class="n">text</span> <span class="o">&gt;&gt;</span>
</code></pre></div>

</li>
<li>
Type constructor quotation attributes:

<div class="highlight"><pre><code class="ocaml"><span class="k">let</span> <span class="n">x</span><span class="o">:</span> <span class="kt">int</span> <span class="o">%</span><span class="n">foo</span><span class="o">,</span> <span class="kt">float</span> <span class="o">%</span><span class="n">bar</span><span class="o">(</span> <span class="n">some</span> <span class="n">random</span> <span class="n">text</span><span class="o">)</span> <span class="o">=</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">.</span><span class="mi">5</span><span class="o">)</span>
</code></pre></div>

</li>
<li>
Type-conv style definition attributes:

<div class="highlight"><pre><code class="ocaml"><span class="k">type</span> <span class="n">t</span> <span class="o">=</span> 
<span class="o">{</span> <span class="n">x</span><span class="o">:</span> <span class="kt">int</span><span class="o">;</span>
  <span class="n">y</span><span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="o">}</span>
<span class="k">with</span> <span class="n">foo</span><span class="o">,</span> <span class="n">bar</span><span class="o">(</span> <span class="c">(* some valid expression *)</span> <span class="o">)</span>
</code></pre></div>

</li>
<li>
Annotating types with syntactically valid expressions:

<div class="highlight"><pre><code class="ocaml"><span class="k">let</span> <span class="n">x</span><span class="o">:</span> <span class="kt">string</span> <span class="o">@@</span> <span class="c">(* some valid expression *)</span> <span class="o">=</span> <span class="bp">()</span>
</code></pre></div>

</li>
</ul>


<p>Once support for these attributes and quotations is added to OCaml I think that
the majority of camlp4 applications could be easily converted into AST
transformers.</p>

<p>In order to make this transition easy, work must also be done to provide tools
for manipulating OCaml's AST and parsing quotations. It would also be worthwhile
trying to normalise some of the stranger corners of the OCaml syntax tree. This
will make writing AST transformers simpler and more robust</p>

<p>Finally, the "-ppx" option must be integrated into the many OCaml build
systems.</p>

<h4>Join the discussion</h4>

<p>The above suggestions are just the attributes and quotations that I think will
be necessary to provide a viable alternative to camlp4. However, I suspect that
they are not sufficient. It would be very useful to hear from anyone who has
written camlp4 extensions about what kind of extensions they have written, and
what they think would be necessary to support their extensions without
camlp4. So please join the
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">wg-camlp4@lists.ocaml.org</a> list and post
your thoughts.</p><a onclick="switchContent('post6','post5')" class="btn" href="#b25c698da96c0469a4d77c4a5a113fce">Hide</a></div></span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
