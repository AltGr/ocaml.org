<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="https://static.ocamlcore.org/official/images/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="../books.html#manual">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings.html">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://www.ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://bentobako.org/david/blog/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://www.blogger.com/feeds/8964007124326996693/posts/default/-/ocaml">Fayssal Martani</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="http://www.elehack.net/michael/blog/tags/ocaml?format=rss">Michael Ekstrand</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="4dc81c1e1a3ae1c0cc9d8c57fae067dc"></a><span class="rss-header"><span class="rss-title"><a href="http://functional-orbitz.blogspot.com/2013/03/ann-riakc-000.html"> [ANN] Riakc 0.0.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_1">Orbitz &#9001;noreply<abbr title="(at) &rarr; @">(at)</abbr>blogger.com (orbitz)&#9002;</span><script type="text/javascript"><!--;
local = "noreply";
h = "blogger.com (orbitz)";
hq = "blogger.com%20(orbitz)";
document.getElementById("ocaml_1").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >Orbitz<\/a>";
//--></script></span>, <span class="rss-date">17 Mar 2013</span></span><span class="rss-description"><div id="post1"><p>Riakc is a Riak Protobuf client for Ocaml.  Riakc uses Jane St Core/Async for concurrency.  Riakc is in early development and so far supports a subset of the Riak API.  The supported methods are: </p> <p></p><ul><li>ping</li><li>client_id</li><li>server_info</li><li>list_buckets</li><li>list_keys</li><li>bucket_props</li><li>get</li><li>put</li><li>delete</li></ul><p></p> <h2>A note on GET</h2><p>Links are currently dropped all together in the implementation, so if you read a value with links and write it back, you will have lost them.  This will be fixed in the very near future. </p> <p>As with anything, please feel free to submit issues and pull requests. </p> <p>The source code can be found <a href="https://github.com/orbitz/ocaml-riakc/tree/0.0.0">here</a>.  Riakc is in opam and you can install it by doing <code>opam install riakc</code>. </p> <h1>Usage</h1><p>There are two API modules in Riakc.  Examples of all existing API functions can be found <a href="https://github.com/orbitz/ocaml-riakc/tree/0.0.0/examples">here</a>. </p> <h2>Riakc.Conn</h2><p><code>Riakc.Conn</code> provides the API for performing actions on the database.  The module interface can be read <a href="https://github.com/orbitz/ocaml-riakc/blob/0.0.0/lib/riakc/conn.mli">here</a>.   </p> <h2>Riakc.Robj</h2><a onclick="switchContent('post1','post2')" class="btn" href="#4dc81c1e1a3ae1c0cc9d8c57fae067dc">Read more...</a></div><div id="post2" style="display: none"><p>Riakc is a Riak Protobuf client for Ocaml.  Riakc uses Jane St Core/Async for concurrency.  Riakc is in early development and so far supports a subset of the Riak API.  The supported methods are: </p> <p></p><ul><li>ping</li><li>client_id</li><li>server_info</li><li>list_buckets</li><li>list_keys</li><li>bucket_props</li><li>get</li><li>put</li><li>delete</li></ul><p></p> <h2>A note on GET</h2><p>Links are currently dropped all together in the implementation, so if you read a value with links and write it back, you will have lost them.  This will be fixed in the very near future. </p> <p>As with anything, please feel free to submit issues and pull requests. </p> <p>The source code can be found <a href="https://github.com/orbitz/ocaml-riakc/tree/0.0.0">here</a>.  Riakc is in opam and you can install it by doing <code>opam install riakc</code>. </p> <h1>Usage</h1><p>There are two API modules in Riakc.  Examples of all existing API functions can be found <a href="https://github.com/orbitz/ocaml-riakc/tree/0.0.0/examples">here</a>. </p> <h2>Riakc.Conn</h2><p><code>Riakc.Conn</code> provides the API for performing actions on the database.  The module interface can be read <a href="https://github.com/orbitz/ocaml-riakc/blob/0.0.0/lib/riakc/conn.mli">here</a>.   </p> <h2>Riakc.Robj</h2><p><code>Riakc.Robj</code> provides the API for objects stored in Riak.  The module interface can be read <a href="https://github.com/orbitz/ocaml-riakc/blob/0.0.0/lib/riakc/robj.mli">here</a>.  <code>Riakc.Conn.get</code> returns a <code>Riakc.Robj.t</code> and <code>Riakc.Conn.put</code> takes one.  <code>Robj.t</code> supports representing siblings, however <code>Riakc.Conn.put</code> cannot PUT objects with siblings, this is enforced using phantom types.  A value of <code>Riakc.Robj.t</code> that might have siblings is converted to one that doesn't using <code>Riakc.Robj.set_content</code>. </p><a onclick="switchContent('post2','post1')" class="btn" href="#4dc81c1e1a3ae1c0cc9d8c57fae067dc">Hide</a></div></span>
<a name="10d12e77b837ececa6666cfdb0c9aa91"></a><span class="rss-header"><span class="rss-title"><a href="http://functional-orbitz.blogspot.com/2013/03/ann-protobuf-002.html"> [ANN] Protobuf 0.0.2</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_2">Orbitz &#9001;noreply<abbr title="(at) &rarr; @">(at)</abbr>blogger.com (orbitz)&#9002;</span><script type="text/javascript"><!--;
local = "noreply";
h = "blogger.com (orbitz)";
hq = "blogger.com%20(orbitz)";
document.getElementById("ocaml_2").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >Orbitz<\/a>";
//--></script></span>, <span class="rss-date">17 Mar 2013</span></span><span class="rss-description"><div id="post3"><p>Protobuf is an Ocaml library for communicating with Google's protobuf format.  It provides a method for writing parsers and builders.  There is no protoc support, yet and writing it is not a top goal right now.  Protobuf is meant to be fairly lightweight and straight forward to use.  The only other Protobuf support for Ocaml I am aware of is through <a href="http://piqi.org/">piqi</a>, however that was too heavy for my needs. </p> <p>Protobuf is meant to be very low level, mostly dealing with representation of values and not semantics.  For example, the <code>fixed32</code> and <code>sfixed32</code> values are both parsed as <code>Int32.t</code>'s.  Dealing with being signed or not is left up to the user. </p> <p>The source code can be viewed <a href="https://github.com/orbitz/ocaml-protobuf/tree/0.0.2">here</a>.  Protobuf is in opam, to install it <code>opam install protobuf</code>. </p> <a onclick="switchContent('post3','post4')" class="btn" href="#10d12e77b837ececa6666cfdb0c9aa91">Read more...</a></div><div id="post4" style="display: none"><p>Protobuf is an Ocaml library for communicating with Google's protobuf format.  It provides a method for writing parsers and builders.  There is no protoc support, yet and writing it is not a top goal right now.  Protobuf is meant to be fairly lightweight and straight forward to use.  The only other Protobuf support for Ocaml I am aware of is through <a href="http://piqi.org/">piqi</a>, however that was too heavy for my needs. </p> <p>Protobuf is meant to be very low level, mostly dealing with representation of values and not semantics.  For example, the <code>fixed32</code> and <code>sfixed32</code> values are both parsed as <code>Int32.t</code>'s.  Dealing with being signed or not is left up to the user. </p> <p>The source code can be viewed <a href="https://github.com/orbitz/ocaml-protobuf/tree/0.0.2">here</a>.  Protobuf is in opam, to install it <code>opam install protobuf</code>. </p> <p>The hope is that parsers and builders look reasonably close to the <code>.proto</code> files such that translation is straight forward, at least until protoc support is added.  This is an early release and, without a doubt, has bugs in it please submit pull requests and issues. </p> <p><a href="https://github.com/orbitz/ocaml-protobuf/tree/0.0.2/">https://github.com/orbitz/ocaml-protobuf/tree/0.0.2/</a></p> <h1>Examples</h1><p>The best collection of examples right now is the <a href="https://github.com/orbitz/ocaml-protobuf/blob/0.0.2/lib/protobuf/protobuf_test.ml">tests</a>.  An example from the file: </p> <p></p><pre><code><b></b></code></pre><font color="#0000FF">let</font> simple <font color="#990000">=</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font><font color="#009900">int32</font> <font color="#993399">1</font> <font color="#990000">&gt;&gt;=</font> <b><font color="#000080">P</font></b><font color="#990000">.</font>return<br/><br/><b><font color="#0000FF">let</font></b> complex <font color="#990000">=</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font><font color="#009900">int32</font> <font color="#993399">1</font>           <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> num <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font><font color="#009900">string</font> <font color="#993399">2</font>          <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> s <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font>embd_msg <font color="#993399">3</font> simple <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> emsg <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font>return <font color="#990000">(</font>num<font color="#990000">,</font> s<font color="#990000">,</font> emsg<font color="#990000">)</font><br/><br/><b><font color="#0000FF">let</font></b> run_complex str <font color="#990000">=</font><br/>  <b><font color="#0000FF">let</font></b> <b><font color="#000080">open</font></b> <b><font color="#000080">Result</font></b><font color="#990000">.</font><font color="#009900">Monad_infix</font> <b><font color="#0000FF">in</font></b><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font><b><font color="#000080">State</font></b><font color="#990000">.</font>create <font color="#990000">(</font><b><font color="#000080">Bitstring</font></b><font color="#990000">.</font>bitstring_of_string str<font color="#990000">)</font><br/>  <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> s <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">P</font></b><font color="#990000">.</font>run complex s<br/><p></p> <p>The builder for this message looks like: </p> <p></p><pre><code><b></b></code></pre><font color="#0000FF">let</font> build_simple i <font color="#990000">=</font><br/>  <b><font color="#0000FF">let</font></b> <b><font color="#000080">open</font></b> <b><font color="#000080">Result</font></b><font color="#990000">.</font><font color="#009900">Monad_infix</font> <b><font color="#0000FF">in</font></b><br/>  <b><font color="#0000FF">let</font></b> b <font color="#990000">=</font> <b><font color="#000080">B</font></b><font color="#990000">.</font>create <font color="#990000">()</font> <b><font color="#0000FF">in</font></b><br/>  <b><font color="#000080">B</font></b><font color="#990000">.</font><font color="#009900">int32</font> b <font color="#993399">1</font> i <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> <font color="#990000">()</font> <font color="#990000">-&gt;</font><br/>  <font color="#009900">Ok</font> <font color="#990000">(</font><b><font color="#000080">B</font></b><font color="#990000">.</font>to_string b<font color="#990000">)</font><br/><br/><b><font color="#0000FF">let</font></b> build_complex <font color="#990000">(</font>i1<font color="#990000">,</font> s<font color="#990000">,</font> i2<font color="#990000">)</font> <font color="#990000">=</font><br/>  <b><font color="#0000FF">let</font></b> <b><font color="#000080">open</font></b> <b><font color="#000080">Result</font></b><font color="#990000">.</font><font color="#009900">Monad_infix</font> <b><font color="#0000FF">in</font></b><br/>  <b><font color="#0000FF">let</font></b> b <font color="#990000">=</font> <b><font color="#000080">B</font></b><font color="#990000">.</font>create <font color="#990000">()</font> <b><font color="#0000FF">in</font></b><br/>  <b><font color="#000080">B</font></b><font color="#990000">.</font><font color="#009900">int32</font> b <font color="#993399">1</font> i1                 <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> <font color="#990000">()</font> <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">B</font></b><font color="#990000">.</font><font color="#009900">string</font> b <font color="#993399">2</font> s                 <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> <font color="#990000">()</font> <font color="#990000">-&gt;</font><br/>  <b><font color="#000080">B</font></b><font color="#990000">.</font>embd_msg b <font color="#993399">3</font> i2 build_simple <font color="#990000">&gt;&gt;=</font> <b><font color="#0000FF">fun</font></b> <font color="#990000">()</font> <font color="#990000">-&gt;</font><br/>  <font color="#009900">Ok</font> <font color="#990000">(</font><b><font color="#000080">B</font></b><font color="#990000">.</font>to_string b<font color="#990000">)</font><br/><p></p><a onclick="switchContent('post4','post3')" class="btn" href="#10d12e77b837ececa6666cfdb0c9aa91">Hide</a></div></span>
<a name="175d5661f0dbe68962e4cbd84fded38c"></a><span class="rss-header"><span class="rss-title"><a href="http://www.ocamlpro.com/blog/2013/03/14/opam-1.0.0.html"> OPAM 1.0.0 Released</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_3">OCamlPro &#9001;thomas<abbr title="(at) &rarr; @">(at)</abbr>ocamlpro.com (Thomas Gazagnaire)&#9002;</span><script type="text/javascript"><!--;
local = "thomas";
h = "ocamlpro.com (Thomas Gazagnaire)";
hq = "ocamlpro.com%20(Thomas%20Gazagnaire)";
document.getElementById("ocaml_3").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >OCamlPro<\/a>";
//--></script></span>, <span class="rss-date">14 Mar 2013</span></span><span class="rss-description"><div id="post5"><p>We have previously <a href="http://www.ocamlpro.com/blog/2013/01/17/opam-beta.html">announced</a> the beta-release of <a href="http://opam.ocamlpro.com/">OPAM</a>. After two intense months of work, we are now very proud to announce the <b>first official</b> release of OPAM!</p><p>This release fixes many bugs and adds few new features to the previously announced beta-release.</p><p>The most visible new feature, which should be useful for beginners with OCaml and OPAM, is an auto-configuration tool. This tool easily enables all the features of OPAM (auto-completion, fix the loading of scripts for the toplevel, opam-switch-eval alias, etc). This tool runs interactively on each <code>opam init</code> invocation. If you don't like OPAM to change your configuration files, use <code>opam init --no-setup</code>. If you trust the tool blindly, use <code>opam init --auto-setup</code>.</p><pre><code>opam init                 # Interactive setup
opam init --no-setup      # No configuration change
opam init --auto-setup    # Automatic setup
</code></pre><p>You can later change the setup by doing:</p><a onclick="switchContent('post5','post6')" class="btn" href="#175d5661f0dbe68962e4cbd84fded38c">Read more...</a></div><div id="post6" style="display: none"><p>We have previously <a href="http://www.ocamlpro.com/blog/2013/01/17/opam-beta.html">announced</a> the beta-release of <a href="http://opam.ocamlpro.com/">OPAM</a>. After two intense months of work, we are now very proud to announce the <b>first official</b> release of OPAM!</p><p>This release fixes many bugs and adds few new features to the previously announced beta-release.</p><p>The most visible new feature, which should be useful for beginners with OCaml and OPAM, is an auto-configuration tool. This tool easily enables all the features of OPAM (auto-completion, fix the loading of scripts for the toplevel, opam-switch-eval alias, etc). This tool runs interactively on each <code>opam init</code> invocation. If you don't like OPAM to change your configuration files, use <code>opam init --no-setup</code>. If you trust the tool blindly, use <code>opam init --auto-setup</code>.</p><pre><code>opam init                 # Interactive setup
opam init --no-setup      # No configuration change
opam init --auto-setup    # Automatic setup
</code></pre><p>You can later change the setup by doing:</p><pre><code>opam config setup --list  # show your current setup
opam config setup --all   # Enable all the features of OPAM
</code></pre><p>You can of course manually review and modifye the changes made b by editing your <code>~/.profile</code> (or <code>~/.zshrc</code> for zsh users), <code>~/.ocamlinit</code> and the <code>~/.opam/opam-init/*</code> init scripts.</p><h2>Contribute</h2><p>Please report:</p><ul> <li> <p>Bug reports and feature requests for the OPAM tool <a href="http://github.com/OCamlPro/opam/issues">here</a>.</p> </li><li> <p>Packaging issues or requests for a new package <a href="http://github.com/OCamlPro/opam-repository/issues">here</a>.</p> </li><li> <p>General queries to the <a href="http://lists.ocaml.org/listinfo/platform">platform list</a>.</p> </li><li> <p>More specific queries about the internals of OPAM to the <a href="http://lists.ocaml.org/listinfo/opam-devel">OPAM devel list</a>.</p> </li> </ul><h2>Install</h2><p>Packages for Debian and OSX (at least homebrew) should follow shortly and I'm looking for volunteers to create and maintain rpm packages. The binary installer is up-to-date for Linux and Darwin 64-bit architectures, the 32-bit version for Linux should arrive shortly.</p><p>If you want to build from sources, the full archive (including dependencies) is available at:</p><p><a href="http://www.ocamlpro.com/pub/opam-full-latest.tar.gz">http://www.ocamlpro.com/pub/opam-full-latest.tar.gz</a></p><h2>Upgrade</h2><p>If you are upgrading from 0.9.* (eg. if you have at least installed the beta release announced in January) you won't have anything special to do apart installing the new binary. You can then update your package metadata by running <code>opam update</code>. If you want to use the auto-setup feature, remove the "eval <code>opam config env</code> line you have previously added in your <code>~/.profile</code> and run <code>opam config setup --all</code>.</p><p>So everything should be fine. But you never know ... so if something goes horribly wrong in the upgrade process (of if your are upgrading from an old version of OPAM) you can still trash your <code>~/.opam</code>, manually remove what OPAM added in your <code>~/.profile</code> (<code>~/.zshrc</code> for zsh users) and <code>~/.ocamlinit</code>, and start again from scratch.</p><h2>Random Statistics</h2><p>The OPAM project on Github is very pleasantly active. We have got lot of contribution from a lot of different people, and I am very pleased to regularly discover new and interesting OCaml projects pushed to the OPAM repository. So thanks everybody for the great contributions!</p><p>We have worked hard to deliver OPAM and we are very delighted to get a warm welcome from the community. This give us a lot of motivation to continue improving OPAM!</p><h3>Repositories</h3><ul> <li> <p><a href="https://github.com/OCamlPro/opam">https://github.com/OCamlPro/opam</a>: +2000 commits, 26 contributors</p> </li><li> <p><a href="https://github.com/OCamlPro/opam-repository">https://github.com/OCamlPro/opam-repository</a>: +1700 commits, 75 contributors, 370+ packages</p> </li> </ul><h3>Usage</h3><p>On <a href="http://opam.ocamlpro.com/">http://opam.ocamlpro.com/</a></p><ul> <li> <p>+400 unique visitor per week, 15k <code>opam update</code> per week</p> </li><li> <p>+1300 unique visitor per month, 55k <code>opam update</code> per month</p> </li><li> <p>3815 unique visitor since the alpha release</p> </li> </ul><h2>Changelog</h2><p>The full change-log is available <a href="https://github.com/OCamlPro/opam/blob/master/CHANGES">here</a></p><a onclick="switchContent('post6','post5')" class="btn" href="#175d5661f0dbe68962e4cbd84fded38c">Hide</a></div></span>
<a name="0115a8e5838e2168af30a5dedfe7ee44"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.03.12.html"> Caml Weekly News, 12 Mar 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">12 Mar 2013</span></span><span class="rss-description">Commercial Users of Functional Programming 2013 / OPAM mailing-lists ERRATUM / Barista 2.0-beta release / A brief guide to a bit of the OCaml type checker / llpp v15 / [ocamlgraph] Johnson's algo, C-bindings, GraphML reader, edge dominators / If you distribute oasis' setup.ml with your software, please use a recent (&gt;= 0.3.0) version of Oasis / OpenGL Ocaml mailing-list / Other Caml News</span>
<a name="c3f4de345dacff845f985e402cced3c6"></a><span class="rss-header"><span class="rss-title"><a href="http://lpw25.net/2013/03/10/ocaml-namespaces.html"> Adding namespaces to OCaml</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author"><span id="ocaml_4">Leo White &#9001;leo<abbr title="(at) &rarr; @">(at)</abbr>lpw25.net (Leo White)&#9002;</span><script type="text/javascript"><!--;
local = "leo";
h = "lpw25.net (Leo White)";
hq = "lpw25.net%20(Leo%20White)";
document.getElementById("ocaml_4").innerHTML = '<a href="mailto:' + local + '@' + hq + "\" >Leo White<\/a>";
//--></script></span>, <span class="rss-date">10 Mar 2013</span></span><span class="rss-description"><div id="post7"><a onclick="switchContent('post7','post8')" class="btn" href="#c3f4de345dacff845f985e402cced3c6">Read more...</a></div><div id="post8" style="display: none"><div class="well well-small">
<h4>Contents</h4>
<div class="toc">
   <ul>

   </ul><ul>

   </ul><ul>
   <li><a href="http://www.lpw25.net/rss.xml#Problems+with+pack">Problems with pack</a>   </li>
   <li><a href="http://www.lpw25.net/rss.xml#Formal+semantics">Formal semantics</a>   </li>
   <li><a href="http://www.lpw25.net/rss.xml#Design+goals">Design goals</a>   </li>
   <li><a href="http://www.lpw25.net/rss.xml#Design+choices">Design choices</a>
    <ul>
    <li><a href="http://www.lpw25.net/rss.xml#Flat+or+hierarchical?">Flat or hierarchical?</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#Should+namespaces+be+opened+explicitly+in+source+code?">Should namespaces be opened explicitly in source code?</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#How+should+the+compiler+find+modules+in+the+presence+of+namespaces?">How should the compiler find modules in the presence of namespaces?</a>
     <ul>
     <li><a href="http://www.lpw25.net/rss.xml#Using+filenames">Using filenames</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Checking+multiple++.cmi++files">Checking multiple “.cmi” files</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Using+namespace+description+files">Using namespace description files</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Using+environment+description+files">Using environment description files</a>     </li>
    </ul>
    </li><li><a href="http://www.lpw25.net/rss.xml#How+should+namespaces+specified?">How should namespaces specified?</a>
     <ul>
     <li><a href="http://www.lpw25.net/rss.xml#Explicitly+in+the+source+files">Explicitly in the source files</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Through+command-line+arguments">Through command-line arguments</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Through+filenames">Through filenames</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Through+namespace+description+files">Through namespace description files</a>     </li>
     <li><a href="http://www.lpw25.net/rss.xml#Through+environment+description+files">Through environment description files</a>     </li>
    </ul>
    </li><li><a href="http://www.lpw25.net/rss.xml#How+rich+should+a+description+language+be?">How rich should a description language be?</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#Should+namespaces+support+automatically+opened+members?">Should namespaces support automatically opened members?</a>    </li>
   </ul>
   </li><li><a href="http://www.lpw25.net/rss.xml#Proposal">Proposal</a>
    <ul>
    <li><a href="http://www.lpw25.net/rss.xml#Simple+namespaces+through+filenames">Simple namespaces through filenames</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#An+alternative+to+search+paths">An alternative to search paths</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#The++-name++argument">The “-name” argument</a>    </li>
    <li><a href="http://www.lpw25.net/rss.xml#The++-open++argument">The “-open” argument</a>    </li>
    </ul>
   </li>
   </ul>
  
  
 
 

</div>
</div>


<p>Recently there has been a lot of discussion on
<a href="http://lists.ocaml.org/listinfo/platform">platform@lists.ocaml.org</a> about
proposals for adding namespaces to OCaml. I’ve written this post to summarise
the design decisions for such a proposal and to make my own proposal.</p>

<p>Before discussing what namespaces are and the issues surrounding their
implementation, it is important to explain why they are needed in the first
place.</p>

<p>The most important reason for adding namespaces is to provide some means for
grouping the components of a library together. Up to now this has been
achieved using the OCaml module system. Since the components of an OCaml
library are modules, a module can be created that contains all the components
of the library as sub-modules. The “-pack” option for the compiler was created
to allow this module to be created while still keeping each component of the
library in its own file.</p>

<h3 id="Problems+with+pack">Problems with pack</h3>

<p>There are some critical problems with using “-pack” to create a single module
containing the whole library:</p>

<ul>
<li><p>The packed module is a single unit that has to be linked or not as a
unit. This means that any program using part of the library must include the
entire library.</p></li>
<li><p>The packed module is a choke-point in the dependency graph.  If a file
depends on one thing in the packed module then it needs to be recompiled if
anything in the packed module changes.</p></li>
<li><p>Opening a large packed module is very slow and can seriously affect build
performance.</p></li>
</ul>


<p>These problems are all caused by the fact that pack creates an OCaml
module. To understand this consider the run-time semantics of the module
system.</p>

<p>At run-time a module is a record. Initialising a module involves initialising
every component of the module and placing them in this record.  Initialising
these components can involve executing arbitrary code; in fact the execution
of an OCaml program is simply the initialisation of all its modules.</p>

<p>The problems with pack are related to these dynamic semantics. In order to
be a module pack must create a record to represent this module. This means
that it must initialise all of its components. It is this (rather than any
detail of pack’s implementation) that causes the problems identified above.</p>

<p>Access to the components of a top-level module could proceed without the
existence of this record. However, the record is required in order to “alias”
the module, use the module as a first-class value or use it as the argument to
a functor.</p>

<p>Any attempt to overcome the problems with pack, whilst still maintaining
the illusion that the “pack” is a normal module, would result (at the very
least) in one of the following unhealthy situations:</p>

<ul>
<li><p>The module type of the “packed module” would depend on which of its
components were accessed by the program.</p></li>
<li><p>Any use of the “packed module” other than as a simple container
(e.g.
<span class="highlight"><code><span class="k">module</span>
<span class="nc">CS</span>
<span class="o">=</span>
<span class="nn">Core</span><span class="p">.</span><span class="nc">Std</span></code></span>
) could have a dramatic effect on what was
linked into the program and potentially on the semantics of the program.</p></li>
</ul>


<p>Namespaces are basically modules that can only be used as a simple
container. This means that they do not need a corresponding record at
run-time (or any other run-time representation). This avoids the problems
with pack as well as enabling other useful features.</p>

<h3 id="Formal+semantics">Formal semantics</h3>

<p>Following the semantics and description language for namespaces described by
<a href="http://gallium.inria.fr/~scherer/namespaces/spec.pdf">Gabriel Scherer et al</a>,
I will consider namespaces to be name-labelled trees whose leaves are
compilation units. I will use
<span class="highlight"><code><span class="o">#</span></code></span>
to represent projection on namespaces, so the
<span class="highlight"><code><span class="nc">Bar</span></code></span>
member of the
<span class="highlight"><code><span class="nc">Foo</span></code></span>
namespace will be referred to as
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>.</p>

<h3 id="Design+goals">Design goals</h3>

<p>Some design goals that we might want from a proposal for adding namespaces to
OCaml include:</p>

<ul>
<li><p><strong>Allow library components to be grouped together without creating a module
containing them.</strong></p></li>
<li><p><strong>Allow users to group together modules from different libraries as they see
fit.</strong> This means letting people change which namespace a library module is
in.</p></li>
<li><p><strong>Allow library components to be given multiple names.</strong> For example
<span class="highlight"><code><span class="nc">Lib</span><span class="o">#</span><span class="nc">Foo</span></code></span>
and
<span class="highlight"><code><span class="nc">Lib</span><span class="o">#</span><span class="nc">Stable</span><span class="o">#</span><span class="nc">Foo</span></code></span>
, where
<span class="highlight"><code><span class="nc">Lib</span><span class="o">#</span><span class="nc">Stable</span></code></span>
is a namespace containing only those components whose interfaces are stable.</p></li>
<li><p><strong>Be simple and easy to explain to beginners.</strong></p></li>
<li><p><strong>Allow multiple source files to share the same filename.</strong> Each module that
is linked into an OCaml program must have a unique name. Currently, a
module’s name is completely determined by its filename. This forces library
developers to either use pack (which gives its components new long names) or
give their source files long names like “libName_Foo.ml”. A namespaces
proposal may be able to alleviate this problem.</p></li>
<li><p><strong>Allow libraries to control which modules are open by default.</strong> By default
OCaml opens the standard library’s
<span class="highlight"><code><span class="nc">Pervasives</span></code></span>
module. Libraries that wish to replace the standard library may also wish to
provide their own
<span class="highlight"><code><span class="nc">Pervasives</span></code></span>
module and have it opened by default.</p></li>
<li><p><strong>Support libraries that wish to remain compatible with versions of OCaml
without namespaces.</strong></p></li>
<li><p><strong>Require minimal changes to existing build systems.</strong> Since a namespace
proposal changes how a library’s components are named, it may require
changes to some build systems. If these changes are too invasive then users
of some build systems will probably be unable to use namespaces in the near
future.</p></li>
</ul>


<h3 id="Design+choices">Design choices</h3>

<h4 id="Flat+or+hierarchical?">Flat or hierarchical?</h4>

<p>In order to replace pack, namespaces must be able to contain modules. It is
not clear, however, whether they need to be able to contain other
namespaces. We call namespaces that can contain other namespaces
<em>hierarchical</em>, as opposed to <em>flat</em>.</p>

<p>In favour of flat namespaces:</p>

<ul>
<li><p>Hierarchical namespaces might lead to arbitrary categorising of components
(e.g.<br/>
<span class="highlight"><code><span class="nc">Data</span><span class="o">#</span><span class="nc">Array</span></code></span>
). These add syntactic clutter and do not bring any real benefit.</p></li>
<li><p>Hierarchical namespaces might lead to deep java-style hierarchies
(e.g.<br/>
<span class="highlight"><code><span class="nc">Com</span><span class="o">#</span><span class="nc">Janestreet</span><span class="o">#</span><span class="nc">Core</span><span class="o">#</span><span class="nc">Std</span></code></span>
). These add syntactic clutter without adding any actual information.</p></li>
</ul>


<p>In favour of hierarchical namespaces:</p>

<ul>
<li>
A library may wish to provide multiple versions of some of its components. For
example:

<ul>
<li>    
<span class="highlight"><code><span class="nc">Http</span><span class="o">#</span><span class="nc">Async</span><span class="o">#</span><span class="nc">IO</span></code></span>
 and 
<span class="highlight"><code><span class="nc">Http</span><span class="o">#</span><span class="nc">Lwt</span><span class="o">#</span><span class="nc">IO</span></code></span>
</li>
<li>
<span class="highlight"><code><span class="nc">File</span><span class="o">#</span><span class="nc">Windows</span><span class="o">#</span><span class="nc">Directories</span></code></span>
and 
<span class="highlight"><code><span class="nc">File</span><span class="o">#</span><span class="nc">Unix</span><span class="o">#</span><span class="nc">Directories</span></code></span>
</li>
<li>
<span class="highlight"><code><span class="nc">Core</span><span class="o">#</span><span class="nc">Mutex</span></code></span>
and 
<span class="highlight"><code><span class="nc">Core</span><span class="o">#</span><span class="nc">Testing</span><span class="o">#</span><span class="nc">Mutex</span></code></span>
</li>
</ul>

In such situations it is useful to be able to write both


<div class="highlight"><pre><code class="ocaml"><span class="k">open</span> <span class="nc">Core</span>
<span class="o">[...]</span>
<span class="nc">Testing</span><span class="o">#</span><span class="nn">Mutex</span><span class="p">.</span><span class="n">lock</span> <span class="n">x</span>
</code></pre></div>


and


<div class="highlight"><pre><code class="ocaml"><span class="k">open</span> <span class="nc">Core</span><span class="o">#</span><span class="nc">Testing</span>
<span class="o">[...]</span>
<span class="nn">Mutex</span><span class="p">.</span><span class="n">lock</span> <span class="n">x</span>
</code></pre></div>

</li>
<li>
None of the systems of namespaces that have been proposed have any
additional cost for supporting hierarchical namespaces.
</li>
</ul>


<h4 id="Should+namespaces+be+opened+explicitly+in+source+code?">Should namespaces be opened explicitly in source code?</h4>

<p>There was some debate on the platform mailing list about whether to support
opening namespaces explicitly in source code. This means allowing a syntax
like:</p>

<div class="highlight">
<pre><code class="ocaml"><span class="k">open</span> <span class="k">namespace</span> <span class="nc">Foo</span></code></pre>
</div>


<p>that allows the members of namespace
<span class="highlight"><code><span class="nc">Foo</span></code></span>
to be referenced directly (i.e.
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
can be referred to as
<span class="highlight"><code><span class="nc">Bar</span></code></span>).</p>

<p>The alternative would be to only support opening namespaces through a
command-line argument.</p>

<p>In favour of supporting explicit opens:</p>

<ul>
<li><p>If you open two namespaces with commonly named sub-components then the order
of those opens matters. If the opens are command-line arguments then the
order of those command-line arguments (often determined by build systems and
other tools) matters. This is potentially very fragile.</p></li>
<li><p>Explicit opens in a source file give valuable information about which
libraries are being used by that source file. If a file contains “open
namespace Core” then you know it uses the Core library.</p></li>
<li><p>Local namespace opens provide users more precise control over their naming
environment.</p></li>
</ul>


<p>Against supporting explicit opens:</p>

<ul>
<li>They require a new syntactic construct.</li>
</ul>


<h4 id="How+should+the+compiler+find+modules+in+the+presence+of+namespaces?">How should the compiler find modules in the presence of namespaces?</h4>

<p>Currently, when looking for a module
<span class="highlight"><code><span class="nc">Bar</span></code></span>
that is not in the current environment, the OCaml compiler will search the
directories in its search path for a file called “bar.cmi”.</p>

<p>In the presence of namespaces this becomes more complicated: how does the
compiler find the module
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
?</p>

<p>The suggested possible methods for finding modules in the presence of
namespaces fall into four categories.</p>

<h5 id="Using+filenames">Using filenames</h5>

<p>By storing the interface for
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
in a file named “foo-bar.cmi” the compiler can continue to simply look-up
modules in its search path.</p>

<p>Note that “–” is an illegal character in module names so there is no risk of
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
being confused with a module called
<span class="highlight"><code><span class="nc">Foo-bar</span></code></span>.</p>

<p>This simple scheme does not support placing a module within multiple
namespaces or allowing users to put existing modules in a new namespace.</p>

<h5 id="Checking+multiple++.cmi++files">Checking multiple “.cmi” files</h5>

<p>The name of the namespace containing a compilation unit could be included in
the “.cmi” file of that unit. Then, when looking for a module
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
, the compiler would try every “bar.cmi” file in its search path until it
found one that was part of the “Foo” namespace. This may require the compiler
to open all the “bar.cmi” files on its search path, which could be expensive
on certain operating systems.</p>

<p>This scheme does not support allowing users to put existing modules in a new
namespace, but can support placing a module in multiple namespaces.</p>

<p>It is difficult to detect typos in namespace open statements using this
scheme. For example, detecting that
<span class="highlight"><code><span class="k">open</span>
<span class="k">namespace</span>
<span class="nc">Core</span><span class="o">#</span><span class="nc">Sdt</span></code></span>
should have been
<span class="highlight"><code><span class="k">open</span>
<span class="k">namespace</span>
<span class="nc">Core</span><span class="o">#</span><span class="nc">Std</span></code></span>
would require the compiler to check every file in its search path for one that
was part of namespace
<span class="highlight"><code><span class="nc">Core</span><span class="o">#</span><span class="nc">Sdt</span></code></span>.</p>

<h5 id="Using+namespace+description+files">Using namespace description files</h5>

<p>The compiler could find a member of a namespace by consulting a file that
describes the members of that namespace.</p>

<p>For example, if namespace
<span class="highlight"><code><span class="nc">Foo</span></code></span>
was described by a file “foo.ns” that was on the compiler’s search path then
the compiler could find
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
by locating “foo.ns” and using it to look-up the location of the “.cmi” file
for
<span class="highlight"><code><span class="nc">Bar</span></code></span>.</p>

<p>These namespace description files could be created automatically by some
tool. However, they must be produced before detecting dependencies with
OCamlDep, which could complicate the build process.</p>

<h5 id="Using+environment+description+files">Using environment description files</h5>

<p>The compiler could find a member of a namespace by consulting a file that
describes a mapping between module names and “.cmi” files.</p>

<p>For example, if a file “foo.mlpath” included the mapping “Foo#Bar:
foo/bar.cmi” then that file could be passed as a command-line argument to the
compiler and used to look up the “bar.cmi” file directly.</p>

<p>Looking up modules using this scheme may speed up compilation by avoiding the
need to scan directories for files.</p>

<h4 id="How+should+namespaces+specified?">How should namespaces specified?</h4>

<p>Perhaps the most important question for any namespaces proposal is how
namespaces are specified. It is closely related to the above question of how
the compiler finds modules in the presence of namespaces.</p>

<p>The suggested possible methods for specifying namespaces fall into five
categories.</p>

<h5 id="Explicitly+in+the+source+files">Explicitly in the source files</h5>

<p>Namespaces could be specified by adding a line like:</p>

<div class="highlight">
<pre><code class="ocaml"><span class="k">namespace</span> <span class="nc">Foo</span></code></pre>
</div>


<p>to the beginning of each compilation unit that is part of the
<span class="highlight"><code><span class="nc">Foo</span></code></span>
namespace.</p>

<p>This has the benefit of making namespaces explicitly part of the language
itself, however it does mean that the full name of a module is specified in
two locations: partly in the filename and partly within the file itself.</p>

<h5 id="Through+command-line+arguments">Through command-line arguments</h5>

<p>Namespaces could be specified by passing a command-line argument to the
compiler. For example,
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
could be compiled with the command-line:</p>

<div class="highlight"><pre><code class="sh">ocamlc -c -namespace Foo bar.ml 
</code></pre></div>


<p>This scheme also means that the full name of a module is specified in two
locations: partly in the build system and partly in the filename.</p>

<h5 id="Through+filenames">Through filenames</h5>

<p>Namespaces could be specified using the filenames of source files. For
example,
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
would be created by compiling a file “foo-bar.ml”</p>

<p>This scheme is simple and very similar to how modules are currently named, but
it would require all source files to have long unique names.</p>

<h5 id="Through+namespace+description+files">Through namespace description files</h5>

<p>Namespaces could be specified using namespace description files. The
<span class="highlight"><code><span class="nc">Foo</span></code></span>
namespace would be specified by a file “foo.ns” that described the members of
<span class="highlight"><code><span class="nc">Foo</span></code></span>:</p>

<pre><code>module Bar = "foo_bar.cmi"
namespace Testing = "testing.ns"
</code></pre>

<h5 id="Through+environment+description+files">Through environment description files</h5>

<p>Namespaces could be specified using environment description files. A namespace
<span class="highlight"><code><span class="nc">Foo</span></code></span>
would be defined by passing an environment description file to the compiler
that included mappings for each of the members of
<span class="highlight"><code><span class="nc">Foo</span></code></span>. For example:</p>

<pre><code>Foo#Bar: "foo_bar.cmi"
Foo#Testing#Bar: "foo_testing_bar.cmi"
Baz: "baz.cmi"
</code></pre>

<p>In addition to specifying namespaces, this system allows users (or a tool like
OCamlFind) to have complete control the naming environment of a program.</p>

<h4 id="How+rich+should+a+description+language+be?">How rich should a description language be?</h4>

<p>For namespace proposals that use namespace or environment description files,
they must decide how rich their description language should be.</p>

<p>For example, <a href="http://gallium.inria.fr/~scherer/namespaces/spec.pdf">Gabriel Scherer et
al</a> describe a very rich
environment description language including many different operations that can
be performed on namespaces.</p>

<p>A rich description language can produce shorter descriptions. However, the
more operations a language supports the more syntax that users must understand
in order to read description files. The majority of description files are
unlikely to require complex operations.</p>

<h4 id="Should+namespaces+support+automatically+opened+members?">Should namespaces support automatically opened members?</h4>

<p>A feature of namespaces that has been proposed on the mailing list is to allow
some modules within a namespace to be automatically opened when the namespace
is also opened. This makes it seem that the namespace has values and types as
members.</p>

<p>This feature is based on the current design of Jane Street’s Core
library. Users of the Core library are expected to open the
<span class="highlight"><code><span class="nc">Core<span class="p">.</span>Std</span></code></span>
 module before using the library. Opening this module provides access to all
the other modules of the library (much like opening a namespace), but it also
provides types and values similar to those provided by the standard library’s
<span class="highlight"><code><span class="nc">Pervasives</span></code></span> module.</p>

<p>Supporting auto-opened modules would allow
<span class="highlight"><code><span class="nc">Core<span class="p">.</span>Std</span></code></span>
to be directly replaced by a namespace. However, the semantics of this feature
could be awkward due to potential conflicts between members of the namespace
and sub-modules of the auto-opened modules. It also increases the overlap
between namespaces and modules.</p>

<h3 id="Proposal">Proposal</h3>

<p>In the last section of this post I will outline a namespaces proposal that I
think satisfies the design goals set out earlier.</p>

<p>I think that satisfying these design goals requires a combination of
extensions to OCaml. My proposal is made up of four such extensions. To keep
things simple for users to understand, I have tried to keep each of these
extensions completely independent of the others and with a clearly defined
goal.</p>

<h4 id="Simple+namespaces+through+filenames">Simple namespaces through filenames</h4>

<p>Currently, the name of a module is completely defined by its filename, and
modules are looked up using a simple search path. While it has some problems,
this simple paradigm has served OCaml well and I think that it is important to
provide some support for namespaces within this paradigm.</p>

<p>This means allowing simple namespaces to be specified using source file
names. For example, to create a module
<span class="highlight"><code><span class="nc">Bar</span></code></span>
within the namespace
<span class="highlight"><code><span class="nc">Foo</span></code></span>
developers can simply create an implementation file “foo-bar.ml” and an
interface file “foo-bar.mli”. This interface file would be compiled to a
“foo-bar.cmi” file. Hierarchical namespaces would be created by files with
names like “foo-bar-baz.ml”.</p>

<p>These namespaced modules can be referred to using the syntax
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>.
This syntax simply causes the compiler to look in its search path for a
“foo-bar.cmi” file.</p>

<p>I also propose supporting a namespace opening syntax like:</p>

<div class="highlight">
<pre><code class="ocaml"><span class="k">open</span> <span class="k">namespace</span> <span class="nc">Foo</span>
[...]
<span class="nc">Bar</span></code></pre>
</div>


<h4 id="An+alternative+to+search+paths">An alternative to search paths</h4>

<p>Forcing the name of a module to be completely defined by its (compiled)
filename makes it easy to look-up modules in a search path. However, it
prevents modules from being given multiple names or being renamed by users. So
I propose supporting an alternative look-up mechanism.</p>

<p>I propose supporting environment description files called <em>search path
files</em>. These files would have a syntax like:</p>

<pre><code>Foo#Bar : "other_bar.cmi"
Foo#Baz : Foo#Bar
</code></pre>

<p>This file can be given to the “-I” command-line argument instead of a
directory and used to look-up the locations of “.cmi” files for given module
names.</p>

<p>These search path files can be used to alias modules and to create new
namespaces. They also allow a module to be available under multiple namespaces.</p>

<p>I envisage two particular modes of use:</p>

<ul>
<li><p>Library authors can write “.mlpath” files and tell OCamlFind to use that
file as its search path instead of a list of directories.</p></li>
<li><p>A user (or potentially OCamlFind) can create search path files to define
their entire naming environment as they see fit.</p></li>
</ul>


<h4 id="The++-name++argument">The “-name” argument</h4>

<p>While the hard link between a module’s name and the name of its source file
makes life easier for build systems (“list.cmi” can only be produced by
compiling “list.ml”), it forces library authors to give their source files long
unique names.</p>

<p>I propose adding a “-name” command-line argument to the OCaml compiler. This
would be used as follows:</p>

<div class="highlight"><pre><code class="sh">ocamlc -c -name Foo#Bar other.ml
</code></pre></div>


<p>This command would produce a “foo-bar.cmi” file defining a module named
<span class="highlight"><code><span class="nc">Foo</span><span class="o">#</span><span class="nc">Bar</span></code></span>
. This means that “.cmi” files would still be expected to be unique, but
source files could be named however the developer wants.</p>

<p>Obviously, any tools that assume that a module
<span class="highlight"><code><span class="nc">Bar</span></code></span>
must be compiled from a file called “bar.ml” will not work in this
situation. However, the only OCaml tool that absolutely relies on this
assumption is “OCamlDep” when it is producing makefile formatted output.</p>

<p>Build systems would not be required to support the “-name” argument, however
it would make it easy for them to provide features such as:</p>

<ul>
<li><p>Creating namespaces to reflect a directory structure (e.g. “foo/bar.mli” becomes “foo-bar.cmi”).</p></li>
<li><p>Placing all the modules of a library under a common namespace (e.g. “bar.mli” becomes “foo-bar.cmi”)</p></li>
</ul>


<p>This would mean that the names of source files could be kept conveniently
short.</p>

<h4 id="The++-open++argument">The “-open” argument</h4>

<p>My proposals do not include support for automatically opened modules within
namespaces. I feel that this feature conflates two separate issues and it
would be better to solve the problem of automatically opened modules elsewhere.</p>

<p>Auto-opened modules are meant to allow libraries to provide their own
equivalent of the standard library’s
<span class="highlight"><code><span class="nc">Pervasives</span></code></span>
module. I think that it would be more appropriate to have these “pervasive”
modules opened by default in any program compiled using one of these
libraries.</p>

<p>I propose adding a command-line argument “-open” that could be used to open a
module by default:</p>

<div class="highlight"><pre><code class="sh">ocamlc -c -open core-pervasives.cmi foo.ml
</code></pre></div>


<p>By adding support for this feature to OCamlFind, libraries could add this
argument to every program compiled using them. This amounts to having
automatically opened modules as part of the package system rather than part of
the namespace system.</p><a onclick="switchContent('post8','post7')" class="btn" href="#c3f4de345dacff845f985e402cced3c6">Hide</a></div></span>
<a name="0802910a1b39035bde5255ca97da05df"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=871"> Barista: 2.0-beta</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">08 Mar 2013</span></span><span class="rss-description"><pre class="rss-text">Changes:
  - update for Objective Caml 4.00.1
  - update for Camlzip 1.05
  - new 'graph' command, allowing to generate the graph of classes references
    from a list of archives (supported file formats: Dot, GEXF, and GraphML)
  - new 'Lookup' module allowing to search for Java elements (classes,
    constructors, fields, and methods) from string queries
  - new 'Manifest' module providing support for archive manifest files
  - new 'ArchiveBuilder' module allowing to construct archives from classes,
    and handling manifest, services, and copy from other archives
  - the 'flow' command can now generate output to either GEXF, or GraphML, in
    addition to Dot
  - improved handling of classpaths
  - improved performance for class encoding (about 50% speed-up)
  - improved performance for stack state computations (about 30% speed-up)
  - optimization of switches (turning lookup switches into table switches if it
    saves some place)
  - new peephole optimizations, in order to avoid simple conversions of
    constants
  - API CHANGE: class types for 'traversal' objects enhanced with new methods
  - API CHANGE: 'Traversal' module renamed to 'ClassTraversal'
  - new 'traversal' class type allowing to fold over class elements
  - new 'ArchiveTraversal' module allowing to traverse archives
  - bug: incorrect handling of some 'package-info' class files
  - bug #86: '-ocaml-prefix' doesn't really work
  - bug #87: install shouldn't build anything
  - bug #89: do not activate warnings by default
  - bug #104: configure script should be executable
  - bug #110: error in annotation encoding of string value
  - bug #111: invalid stack frame when locals are changed in a protected block
  - bug #116: invalid stack frame after "invokespecial" instruction</pre></span>
<a name="92bfb9f28f5eb6765ff4f320fdad06cc"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=593"> Barista 2.0-beta</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">08 Mar 2013</span></span><span class="rss-description">Library for Java .class file manipulation.
Also a command-line [dis]assembler for Java.</span>
<a name="86dbf4d4225c32b951bbd5d7b4ccdf18"></a><span class="rss-header"><span class="rss-title"><a href="http://caml.inria.fr/cgi-bin/hump.cgi?contrib=641"> Jane Street's core library 109.11.00</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">The Caml Humps</span>, <span class="rss-date">08 Mar 2013</span></span><span class="rss-description">Jane Street's alternative to the standard library.</span>
<a name="3e720f21429ee19a49cf32078b39dac8"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/projects/sekred/"> Sekred</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge Projects</span>, <span class="rss-date">07 Mar 2013</span></span><span class="rss-description">This program helps to manage passwords set automatically and stored in a semi-secure way.  It is not a secure storage for password because only the Unix ACL system protects the secret.  The system is designed to be a companion tool for puppet.</span>
<a name="06cbe253950211843d19cd91ac1b647c"></a><span class="rss-header"><span class="rss-title"><a href="http://gallium.inria.fr/blog/a-library-to-record-ocaml-backtraces"> A library to record OCaml backtraces</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">GaGallium</span>, <span class="rss-date">07 Mar 2013</span></span><span class="rss-description"><div id="post9"><p>
      Sometimes using
      <code>OCAMLRUNPARAM="b"</code> returns a disappointingly
      unhelpful backtrace, because the program you're trying to debug
      has a non-trivial usage of exceptions that destroys the
      backtrace information you were expecting. Here is a new library
      that should solve this problem, by allowing you to reliably
      register backtraces. Read more for the source, and the juicy
      internal details: weak tables, semi-manual garbage collection
      logic, and an <em>optional</em> change to the OCaml runtime to
      improve the library performances.
    </p>

    

    <h3>The problem</h3>
    <a onclick="switchContent('post9','post10')" class="btn" href="#06cbe253950211843d19cd91ac1b647c">Read more...</a></div><div id="post10" style="display: none"><p>
      Sometimes using
      <code>OCAMLRUNPARAM="b"</code> returns a disappointingly
      unhelpful backtrace, because the program you're trying to debug
      has a non-trivial usage of exceptions that destroys the
      backtrace information you were expecting. Here is a new library
      that should solve this problem, by allowing you to reliably
      register backtraces. Read more for the source, and the juicy
      internal details: weak tables, semi-manual garbage collection
      logic, and an <em>optional</em> change to the OCaml runtime to
      improve the library performances.
    </p>

    

    <h3>The problem</h3>
    <p>
      When debugging OCaml programs, it is sometimes hard to get
      useful backtraces for exceptions. Let's take an example: you are
      hacking the Coq implementation, and your patch launches an
      exception (any resemblance to real persons, living or dead, is
      purely coincidental). Of course, you have no idea why this
      exception has been raised, so a little bit of context would be
      appreciated: getting a backtrace would be very useful, because
      it tells you where the exception has been raised, and what were
      the state of the call stack at that time.
    </p>

    <p>
      There is already some support for getting backtraces in
      OCaml. If you compile in debug mode (eg. with
      the <code>-g</code> option), and then run your code
      with <code>OCAMLRUNPARAM="b"</code> in the environment, then you
      can get exception backtraces. They will be automatically printed
      for uncaught exceptions (those that stop the program execution),
      and inside your programs you can use
      the <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printexc.html">Printexc</a>
      module of the OCaml standard library, to print the backtrace
      from the "raise" of the last exception that was raised up to the
      "try..with" that caught it (or the end of the program).
    </p>

    <p>
      However, this system is not always satisfactory: in OCaml,
      exceptions are very efficient, and it is a common idiom to use
      them for control flow (rather than only to handle errors). As
      a consequence, the exception handling mechanism in big OCaml
      programs can be complicated, because it has to filter
      exceptional exceptions (which are a sign of an error), and
      exceptions used for control. It can also be the case that the
      error handlers themselves uses exceptions internally, for
      example some error messages formatter do this. This is
      problematic, because it erases the original, relevant
      backtrace. Asking for a backtrace after the fact will show you
      traces for exceptions that were raised and caught internally in
      the message formatter, and then you're lost, which (in the
      good case) makes you write frustrated blog posts such
      as <a href="http://www.acunu.com/2/post/2012/05/dude-wheres-my-stacktrace.html">this
      one</a>.
    </p>

    <h3>The solution of other languages</h3>
    <p>
      In some other languages, like Java, every exception stores its
      own backtrace. So, even if you do strange things with exceptions
      internally, as long as you have access to the exception that has
      been raised, you can print its backtrace. However, this has
      a non-negligible memory and performance cost, because the
      runtime has to copy the exception backtrace into the heap.
    </p>
      
    <p>
      In OCaml, it would be unpleasant to do that in the general case,
      because exception can be heavily used. We could imagine to do
      that only in debug mode and when backtraces are active, but this
      poses non-trivial questions, because we have to choose at
      compile time whether to allocate a backtrace-compliant exception
      object or not, for example. Besides, it would require quite
      invasive changes to the compiler and runtime, probably add bugs,
      etc. Not something you want to try over a week-end.
    </p>

    <h3>A less invasive approach: a user library</h3>
    <p>
      If we cannot add a pointer from the exception to the backtrace,
      we can consider building an global map from exceptions to
      backtraces. Each time we catch an exception, we can store its
      backtrace in the map. Then, when needed, we can lookup the
      backtrace from the exception in this map.
    </p>

    <p>
      This has the advantage of not requiring any change to the
      compiler. You can implement this big table as a library, and let
      users call a library function, in their exception handler, to
      add their current exception to the table.
    </p>

    <p>
      But this requires user intervention to work well: the user must
      explicitly call the registration function in each error
      handler. This is good, as it allows to decide whether to store
      traces in a fine-grained way, making performance/traceability
      compromises or simply not tracing exceptions that you know do
      not correspond to bugs. But this can be painful for legacy or
      third-party code for which you just want a backtrace quick: you
      don't really want to go over all the `try..with` handlers in
      Coq's implementation to add a call to our registration function,
      by hand. Gabriel Scherer implemented a small preprocessor
      (as a Camlp4 extension and a `-ppx` rewriter) to add them
      automatically at each handler if desired.
    </p>

    <p>
      Implementing the map itself is more challenging: inserting in it
      should be efficient (while lookup operations can be slow); it
      should operate with physical equality, because two occurrences
      of <code>Not_found</code> should see their backtraces
      distinguished; it should not leak memory, that is, it should
      throw away the backtrace when the exception is no longer
      accessible -- and it should not be considered as accessible by
      the Garbage Collector (GC) trough this map. Finally, we need to
      be able to store multiple backtrace for the same exception,
      because an exception can be re-raised: in that case, we want to
      be able to get all the backtraces.
    </p>

    <p>
      Our solution is to use two arrays: one for exceptions, the other for
      backtraces. At the same indices, we store corresponding
      elements. Inserting is very cheap in amortized time, even if it
      involves resizing the arrays if necessary. The lookup is in linear
      time, but we almost never need it. The array of exceptions is a
      <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Weak.html">weak
      array</a>: this data structures makes the GC able to collect
      exceptions even if they are still referenced in the map. At the
      end of each major GC cycle, we compact those arrays, manually
      removing traces corresponding to collected exceptions.
    </p>

    <h3>Performances considerations</h3>
    <p>
      Storing &lt;emph&gt;all&lt;/emph&gt; traces in this way is very slow
      for <code>raise</code>-happy programs (which are the one for
      which you need better traces in the first place). The
      performances of Coq are divided by 3 to 4 by this
      modification. The main reason for this cost is that the only way
      in the OCaml standard library to get the backtrace information
      is to convert it to a string, with English sentences, file
      names, line numbers, and so on. It takes a long time to generate
      such strings for each caught exception, and uses a lot of
      memory, stressing the GC. But still, it works, and if you really
      need good backtraces you are ready to pay the performance
      price... which only exists when you turn on backtrace recording.
    </p>

    <p>
      The next idea was to modify the OCaml runtime and standard
      library, in order to expose a more low-level representation of
      backtraces without the processing costs. Actually, this already
      exists: when using the existing mechanism for recording
      backtraces in OCaml, the runtime generate a compact
      representation of the backtrace in a global variable for each
      raised exception. The only thing we have to do is to split the
      collecting-and-formatting function in two, and expose an API for
      copying on demand this information in the ocaml heap, for
      a possible future conversion to the string representation.
    </p>

    <p>
      We implemented this as a small change to the OCaml runtime system
      and <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printexc.html">Printexc</a>
      module -- much less invasive than the compiler-wide change we
      are avoiding with our user-side solution. Using this new
      feature, Coq only get 10% slower (tested on the compilation
      of CompCert). It still uses more memory (about 30%). We think
      this is very reasonable, given that Coq uses quite a lot of
      exceptions for backtracking, and that there is no cost when
      backtrace recording is not activated.
    </p>

    <p>
      Of course, performances could be improved even further by
      letting users decide which exception handlers really correspond
      to <em>errors</em> that needs to store traces, and which are
      purely control-flow logic (loop exit, backtracking...) that does
      not need to record anything. But getting good traces out the box
      with reasonable performance impact is already satisfying enough
      for now.
    </p>

    <h3>The actual code</h3>
    <p>
      Our library for recording backtraces can be found
      in <a href="http://gallium.inria.fr/blog/exceptionHandling.ml">exceptionHandling.ml</a>
      (slow version using strings),
      or <a href="http://gallium.inria.fr/blog/exceptionHandling.ml.new">exceptionHandling.ml.new</a>
      (fast version using the new runtime functions). Both share
      a single
      interface <a href="http://gallium.inria.fr/blog/exceptionHandling.mli">exceptionHandling.mli</a>.
    </p>

    <p>
      The rewriter that adds exception handling logic to all <code>try
      .. with ..</code> in your code (to use with care) is available
      for Camlp4, <a href="http://gallium.inria.fr/blog/add_smartcatch.ml">add_smartcatch.ml</a>,
      or for the new <code>-ppx</code> AST rewriting mechanism
      available in OCaml
      trunk, <a href="http://gallium.inria.fr/blog/smartcatch_ppx.ml">smartcatch_ppx.ml</a>.
    </p>

    <p>
      The patch to the available runtime is available
      as <a href="http://gallium.inria.fr/blog/abstract-backtraces.patch.txt">abstract-backtraces.patch.txt</a>. It
      is mostly of historical curiosity, as the maintainers found the
      change non-invasive enough to accept it into the OCaml trunk, so
      you should be able to get fast backtrace recording in the next
      OCaml version.
    </p>
    
    <p>
      Our quick-and-dirty patch for Coq 8.4pl1
      is <a href="http://gallium.inria.fr/blog/coq-8.4pl1.patch">coq-8.4pl1.patch</a> (it mostly
      hacks around the Coq build system to add an additional camlp4
      preprocessing step to all files). In order to use it, you must
      add either version¹ of the exception handling library in
      the <code>lib</code> subdirectory, under the
      name <code>exceptionHandling.ml</code>. Then, simply type:
    </p>

<pre><code>./configure -debug
make</code></pre>

    <p>And voilà, pixel-perfect backtraces!</p>

    <p>
      ¹: Note that for obscure camlp5 reasons, Coq will not build
      easily against the OCaml trunk, so you should apply the runtime
      patch to the 4.00 branch instead; as the patch adds a new
      primitive, you will need to throw a <code>make coreboot</code>
      somewhere in the OCaml compilation process. Even then, building
      Coq won't be for the faint of heart.
    </p><a onclick="switchContent('post10','post9')" class="btn" href="#06cbe253950211843d19cd91ac1b647c">Hide</a></div></span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
