<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: OCaml Planet</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="http://ocaml.org/img/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href=".././css/bootstrap.css"/>
    <link href=".././css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href=".././css/bootstrap-responsive.css"/>

    
    

    <meta content="OCaml Planet" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href=".././" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="../description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="../taste.html">100 Lines of OCaml</a></li>
    <li><a href="../success.html">Success Stories</a></li>
    <li><a href="../companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../install.html">Install</a></li>
    <li><a href="../tutorials/">Tutorials</a></li>
    <li><a href="../faq.html">FAQ</a></li>
    <li><a href="../books.html">Books</a></li>
    <li><a href="../videos.html">Videos</a></li>
    <li><a href="../papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../releases/">Releases</a></li>
    <li><a href="../libraries.html">Libraries</a></li>
    <li><a href="../dev_tools.html">Development Tools</a></li>
    <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">User Manual</a></li>
    <li><a href="../cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
    <li><a href="http://gitorious.org/search?page=1&q=ocaml">Gitorious</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="../mailing_lists.html">Mailing Lists</a></li>
    <li><a href="../planet/">Blogs</a></li>
    <li><a href="../meetings/">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="../support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="../#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="../caml-light/">Caml Light</a></li>
    <li><a href="../logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./../">Home</a><span class="separation"><img src=".././img/right_arrow.png" alt="&gt;"/></span>OCaml Planet
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      

    <h1>OCaml Planet</h1>

    <p>The OCaml Planet aggregates various blogs from the OCaml
    community.  It is kindly provided
    by <a href="http://www.ocamlcore.com/">OCamlCore</a>.  If you
    would like to be added, read
    the <a href="http://www.ocamlcore.org/planet/">Planet
    subscription HOWTO</a>.</p>

    <br/>
    <div style="float: right; margin-right: 0; margin-top: 0" class="span2 planet-subscriptions"><em>Subscriptions</em>
      <ul><li><a href="http://alexleighton.tumblr.com/tagged/ocaml/rss">Alex Leighton</a></li><li><a href="http://feeds.feedburner.com/amirmc-ocaml">Amir Chaudhry</a></li><li><a href="http://andreiformiga.com/blog/?cat=5&feed=rss2">Andrei Formiga</a></li><li><a href="http://math.andrej.com/feed/">Andrej Bauer</a></li><li><a href="http://anil.recoil.org/feeds/atom.xml">Anil Madhavapeddy</a></li><li><a href="http://ashishagarwal.org/tag/ocaml/feed/">Ashish Agarwal</a></li><li><a href="http://www.blogger.com/feeds/7617521785419311079/posts/default">Cameleon news</a></li><li><a href="http://caml.inria.fr/news.en.rss">Caml INRIA</a></li><li><a href="http://camlspotter.blogspot.com/feeds/posts/default?alt=rss">Caml Spotting</a></li><li><a href="http://alan.petitepomme.net/cwn/cwn.rss">Caml Weekly News</a></li><li><a href="http://coherentpdf.com/blog/?tag=ocaml&feed=rss2">Coherent Graphics</a></li><li><a href="http://coq.inria.fr/news/feed">Coq</a></li><li><a href="http://erratique.ch/feeds/news.atom">Daniel Bünzli</a></li><li><a href="http://nleyten.com:82/feed/tag/ocaml/atom">Dario Teixeira</a></li><li><a href="http://www.blogger.com/feeds/17133288/posts/default/-/ocaml">David Baelde</a></li><li><a href="http://blog.bentobako.org/index.php?feed/tag/ocaml/atom">David Mentré</a></li><li><a href="http://dutherenverseauborddelatable.wordpress.com/category/ocaml/feed/">David Teller</a></li><li><a href="http://www.examachine.net/blog/cat/ocaml/feed/">Eray Özkural</a></li><li><a href="http://www.mega-nerd.com/erikd/Blog/index.rss20">Erik de Castro Lopo</a></li><li><a href="http://blog.emillon.org/feeds/ocaml.xml">Etienne Millon</a></li><li><a href="http://frama-c.com/rss.xml">Frama-C</a></li><li><a href="http://functionaljobs.com/jobs/search/?q=ocaml&format=rss">Functional Jobs</a></li><li><a href="http://gallium.inria.fr/blog/index.rss">GaGallium</a></li><li><a href="http://gaiustech.wordpress.com/category/ocaml/feed/">Gaius Hammond</a></li><li><a href="http://blog.camlcity.org/blog/rss">Gerd Stolpmann</a></li><li><a href="http://jobs.github.com/positions.atom?description=ocaml&location=">Github OCaml jobs</a></li><li><a href="http://www.wisdomandwonder.com/tag/OCaml/feed">Grant Rettke</a></li><li><a href="http://hongboz.wordpress.com/feed/">Hong bo Zhang</a></li><li><a href="http://blog.incubaid.com/tag/ocaml/feed/">Incubaid Research</a></li><li><a href="http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss">Jake Donham</a></li><li><a href="http://scattered-thoughts.net/atom.xml">Jamie Brandon</a></li><li><a href="https://ocaml.janestreet.com/?q=rss.xml">Jane Street</a></li><li><a href="http://lpw25.net/rss.xml">Leo White</a></li><li><a href="http://www.lexifi.com/blogs/ocaml/feed">LexiFi</a></li><li><a href="http://newblog.0branch.com/rss.xml">Marc Simpson</a></li><li><a href="http://syntaxexclamation.wordpress.com/tag/ocaml/feed/">Matthias Puech</a></li><li><a href="http://www.blogger.com/feeds/5888658295182480819/posts/default">Matías Giovannini</a></li><li><a href="">Mihamina Rakotomandimby</a></li><li><a href="http://mcclurmc.wordpress.com/feed/">Mike McClurg</a></li><li><a href="http://nyc-ocaml.posterous.com/rss.xml">NYC OCaml</a></li><li><a href="http://ocaml-book.com/blog?format=rss">OCaml Book</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfnews.php">OCamlCore Forge News</a></li><li><a href="http://forge.ocamlcore.org/export/rss_sfprojects.php">OCamlCore Forge Projects</a></li><li><a href="http://www.ocamlcore.com/wp/?feed=rss2&amp;language=en&#038;language=en">OCamlCore.com</a></li><li><a href="http://www.ocamlpro.com/feed/atom.xml">OCamlPro</a></li><li><a href="http://odns.tuxfamily.org/feed/">ODNS project</a></li><li><a href="http://ox.tuxfamily.org/feed/">Ocaml XMPP project</a></li><li><a href="http://ocsigen.org/news.atom">Ocsigen project</a></li><li><a href="http://www.blogger.com/feeds/2073503406800427577/posts/default">Opa</a></li><li><a href="http://www.openmirage.org/blog/atom.xml">Open Mirage</a></li><li><a href="http://functional-orbitz.blogspot.com/feeds/posts/default/-/planetocaml?alt=rss">Orbitz</a></li><li><a href="http://www.donadeo.net/facets/programming-languages/objective-caml/feed/">Paolo Donadeo</a></li><li><a href="https://mancoosi.org/~abate/taxonomy/term/5/0/feed">Pietro Abate</a></li><li><a href="http://rwmj.wordpress.com/tag/ocaml/feed/">Richard Jones</a></li><li><a href="http://blog.rastageeks.org/spip.php?page=rss&id_mot=2">Romain Beauxis</a></li><li><a href="http://seb.mondet.org/blog/feed/ocaml.rss">Sebastien Mondet</a></li><li><a href="http://upsilon.cc/~zack/tags/ocaml/index.rss">Stefano Zacchiroli</a></li><li><a href="http://le-gall.net/sylvain+violaine/blog/index.php?feed/tag/ocaml/atom">Sylvain Le Gall</a></li><li><a href="http://caml.inria.fr/hump.rss">The Caml Humps</a></li><li><a href="http://www.blogger.com/feeds/6115529230232389198/posts/default">Till Varoquaux</a></li><li><a href="http://y-node.com/blog/feeds/latest/">y-node</a></li></ul>

      <a href="http://planet.ocaml.org/rss20.xml"><img src=".././img/rss20.png"/></a>
      <a href="http://planet.ocaml.org/opml.xml"><img src=".././img/opml.png"/></a>
    </div>
    <div class="planet"><a name="2777d7de50de146d52efb62009134d88"></a><span class="rss-header"><span class="rss-title"><a href="https://forge.ocamlcore.org/forum/forum.php?forum_id=886"> CCSS 1.4 released</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCamlCore Forge News</span>, <span class="rss-date">28 Sep 2013</span></span><span class="rss-description"><pre class="rss-text">The most notable feature of this release is the introduction of mixins: a variable may now be assigned an entire declaration block.</pre></span>
<a name="e862e722280f522e7be81f5c35cb41b8"></a><span class="rss-header"><span class="rss-title"><a href="http://ocaml-book.com/blog/2013/9/27/ocaml-tutorial-videos-now-available"> OCaml  tutorial videos now available</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">OCaml Book</span>, <span class="rss-date">27 Sep 2013</span></span><span class="rss-description"><p>I've made a few little tutorial videos to go with the book. Just seven for now, covering the first four chapters, but more to come:</p><ol><li>Evaluating an expression</li><li>True and false</li><li>Making decisions</li><li>Names and functions</li><li>Patterns</li><li>Lists</li><li>Take and drop</li><li>Appending two lists</li></ol><p>They're not really a substitute for the book but, when learning, it's always helpful to go over things twice, particularly using a different medium.</p><p>The videos are available <a href="http://ocaml-book.com/videos/">here</a>. </p><p> </p></span>
<a name="93c79f2753d826bda17a37d3b209d73d"></a><span class="rss-header"><span class="rss-title"><a href="http://le-gall.net/sylvain+violaine/blog/index.php?post/2013/09/25/OUnit-2.0-progress%2C-September-2013"> OUnit 2.0 progress, September 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Sylvain Le Gall</span>, <span class="rss-date">25 Sep 2013</span></span><span class="rss-description"><div id="post1"><p>Continuing last month progress report on<a href="http://ounit.forge.ocamlcore.org">OUnit2</a>. The release is just a few days away, I am testing real life application and the core of the work is already in the VCS.</p>


<p>The basic features:</p>
<a onclick="switchContent('post1','post2')" class="btn" href="#93c79f2753d826bda17a37d3b209d73d">Read more...</a></div><div id="post2" style="display: none"><p>Continuing last month progress report on<a href="http://ounit.forge.ocamlcore.org">OUnit2</a>. The release is just a few days away, I am testing real life application and the core of the work is already in the VCS.</p>


<p>The basic features:</p>
<ul>
<li>better configuration setup
<ul>
<li>environment variable</li>
<li>command line options</li>
<li>configuration files</li>
</ul></li>
<li>improved output of the tests:
<ul>
<li>allow vim quickfix to jump in the log file where the error has happened</li>
<li>output HTML report</li>
<li>output JUnit report</li>
<li>systematic logging (verbose always on), but output log in a file</li>
</ul></li>
<li>choose how to run your test:
<ul>
<li>run tests in parallel using processes (auto-detect number of CPU and run as many worker processes)</li>
<li>run tests concurrently using threads</li>
<li>use the old sequential runner</li>
</ul></li>
<li>choose which test to run with a chooser that can do smart selection of tests:
<ul>
<li>simple: just run test in sequence</li>
<li>failfirst: run the tests that failed in the last run first and skip the success if they are still failing</li>
</ul></li>
<li>some refactoring:
<ul>
<li>bracket: use a registration in the context but easier to use</li>
<li>remove all useless functions in the OUnit2 interface</li>
</ul></li>
<li>non-fatal section: allow to fail inside non-fatal section without quitting immediately the whole test</li>
<li>allow to use OUnit1 test inside OUnit2 (smooth the transition)</li>
<li>timer that makes tests fail if they take too long, only when using the processes runner (I was not able to do it cleanly using threads and sequential)</li>
<li>allow to parametrize filenames so that you can use <code>OUNIT_OUTPUT_FILE=ounit-$(suite_name),log</code> and have <code>$(suite_name)</code> replace by the test suite name</li>
<li>create locks to avoid accessing the same resources within a single process or the whole application (typically to avoid doing a <code>chdir</code> while another thread is doing a <code>chdir</code> elsewhere)</li>
<li>create a <code>in_testdata_dir</code> function to locate test data, if any</li>
</ul>

<p>Still remaining to do, but quite straightforward:</p>
<ul>
<li>sys admin (website, release process)</li>
<li>update the whole documentation</li>
</ul>

<p>Some things that I decided not to do for OUnit 2.0 release:</p>
<ul>
<li>introduce a 'cached' state to avoid rerunning a test if you can programmaticaly determine that the result will be the same.</li>
</ul>

<p>The main development is now done, but before releasing I decided to test it first on a real scale application. The first big migration to OUnit2, will be the OASIS test suite. This is a pretty big test suite (100+ tests) that takes a fair amount of time to run. I hope that during the next week I will be able to port the whole test suite and come back with some timing results.</p>


<p>You can follow my progress on porting OASIS to OUnit 2.0, in <a href="https://github.com/ocaml/oasis/tree/ounit2">github</a>.</p>


<h2>Help wanted</h2>


<p>If you have a long standing issue with OUnit, this is the time to submit a bug.
<a href="https://forge.ocamlcore.org/tracker/?atid=733&amp;group_id=162&amp;func=browse">OUnit BTS</a></p>


<p>If you want to try the dev version of OUnit:</p>


<pre> $&gt; darcs get http://forge.ocamlcore.org/anonscm/darcs/ounit/ounit</pre>


<p>Patches always welcome.</p>


<p>You can read the documentation of the devel version the <a href="http://ounit.forge.ocamlcore.org/api-ounit-dev/index.html">website</a>.</p><a onclick="switchContent('post2','post1')" class="btn" href="#93c79f2753d826bda17a37d3b209d73d">Hide</a></div></span>
<a name="b159bb33433f9b70968e3d4eb1ce64dd"></a><span class="rss-header"><span class="rss-title"><a href="http://erratique.ch/software"> Gg 0.8.0 and Vg 0.8.0</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Daniel Bünzli</span>, <span class="rss-date">24 Sep 2013</span></span><span class="rss-description"><p>First release of Gg and Vg. Thanks to <a href="http://www.xenproject.org/developers/teams/xapi.html">Citrix Systems R&amp;D</a> and <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/index.html">OCaml Labs</a> for sponsoring this work.</p></span>
<a name="a5df4d5e6a84208a9f87406b4030f9d7"></a><span class="rss-header"><span class="rss-title"><a href="http://amirchaudhry.com/ocamlorg-request-for-feedback"> Feedback requested on the OCaml.org redesign</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Amir Chaudhry</span>, <span class="rss-date">24 Sep 2013</span></span><span class="rss-description"><p>There is a work-in-progress site at <a href="http://ocaml-redesign.github.io">ocaml-redesign.github.io</a>, where we’ve been developing both the tools and design for the new ocaml.org pages. This allows us to test our tools and fix issues before we consider merging changes upstream.</p>

<p>There is a more detailed post coming about all the design work to date and the workflow we’re using, but in the meantime, feedback on the following areas would be most welcome. Please leave feedback in the form of issues on the <a href="https://github.com/ocamllabs/sandbox-ocaml.org/issues">ocaml.org sandbox repo</a>. You can also raise points on the <a href="http://lists.ocaml.org/listinfo/infrastructure">infrastructure mailing list</a>.</p>

<ol>
<li>
<p><strong>OCaml Logo</strong> - There was some feedback on the last iteration of the logo, especially regarding the font, so there are now several options to consider. Please look at the images on the <a href="https://github.com/ocaml/ocaml.org/wiki/Draft-OCaml-Logos">ocaml.org GitHub wiki</a> and then leave your feedback on <a href="https://github.com/ocamllabs/sandbox-ocaml.org/issues/16">issue #16 on the sandbox repo</a>.</p>
</li>

<li>
<p><strong>Site design</strong> - Please do give feedback on the design and any glitches you notice. Text on each of the new landing pages is still an initial draft so comments and improvements there are also welcome (specifically: Home Page, Learn, Documentation, Platform, Community). There are already a few <a href="https://github.com/ocamllabs/sandbox-ocaml.org/issues">known issues</a>, so do add your comments to those threads first.</p>
</li>
</ol></span>
<a name="9b473804a34b88f50c84468e5d2ad0f8"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.09.24.html"> Caml Weekly News, 24 Sep 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">24 Sep 2013</span></span><span class="rss-description">OCaml on Android / OCaml release 4.01.0 / OCaml vs Ada and/or GUI options / Beta release of OPAM 1.1.0 / Ocaml on an embedded arm system (no linux) / Call for Talks - Open World Forum / OSDC / SIunits 0.1 / ocaml interface to berkeley db? / Other Caml News</span>
<a name="79336793f839bc71e3b56a8399d9f156"></a><span class="rss-header"><span class="rss-title"><a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-4/"> Goaljobs, part 4</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Richard Jones</span>, <span class="rss-date">20 Sep 2013</span></span><span class="rss-description"><div id="post3"><p>In <a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-3/">part 3</a> I described how to write targets which can access network resources, and how to use memoization to make them run fast.  In this (last) part of the series, I’ll describe the final feature of goaljobs — periodic jobs.</p>
<p>If you wanted to use <code>make</code> to monitor a git repository and do a build when a new commit appears there would I guess be three choices: You could just run the <code>make</code> command manually over and over again.  You could have a git hook that runs <code>make</code>.  Or you have a cron job the periodically checks the git repository.</p>
<p>The git hook is the ideal solution for goaljobs too, but goaljobs also has cron-like <b>periodic jobs</b> built in, and they are very easy to use:</p>
<pre>every 30 minutes (fun () -&gt;
  let commit =
    shout "cd %s &amp;&amp; git rev-parse HEAD" repo in
  require (git_commit_tested commit)
)
</pre>
<p><code>every 30 minutes</code> is self-explanatory (right?).  The function that runs every half-an-hour is two lines of code.  The first line uses <code>shout</code> to run a <b>sh</b>ell command and capture the <b>out</b>put.  In this case git prints the current commit.  The second command requires that the <code>git_commit_tested</code> goal is reached for this commit.</p>
<p>One way to implement this goal would be:</p>
<a onclick="switchContent('post3','post4')" class="btn" href="#79336793f839bc71e3b56a8399d9f156">Read more...</a></div><div id="post4" style="display: none"><p>In <a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-3/">part 3</a> I described how to write targets which can access network resources, and how to use memoization to make them run fast.  In this (last) part of the series, I’ll describe the final feature of goaljobs — periodic jobs.</p>
<p>If you wanted to use <code>make</code> to monitor a git repository and do a build when a new commit appears there would I guess be three choices: You could just run the <code>make</code> command manually over and over again.  You could have a git hook that runs <code>make</code>.  Or you have a cron job the periodically checks the git repository.</p>
<p>The git hook is the ideal solution for goaljobs too, but goaljobs also has cron-like <b>periodic jobs</b> built in, and they are very easy to use:</p>
<pre>every 30 minutes (fun () -&gt;
  let commit =
    shout "cd %s &amp;&amp; git rev-parse HEAD" repo in
  require (git_commit_tested commit)
)
</pre>
<p><code>every 30 minutes</code> is self-explanatory (right?).  The function that runs every half-an-hour is two lines of code.  The first line uses <code>shout</code> to run a <b>sh</b>ell command and capture the <b>out</b>put.  In this case git prints the current commit.  The second command requires that the <code>git_commit_tested</code> goal is reached for this commit.</p>
<p>One way to implement this goal would be:</p>
<pre>let goal git_commit_tested commit =
  let key = sprintf "repo-tested-%s" commit in
  target (memory_exists key);

  sh "
      git clone %s test
      cd test
      ./configure
      make
      make check
  " repo_url;

  memory_set key "1"
</pre>
<p>This code clones the repository and runs <code>make check</code> to test it.  It uses the Memory (ie. memoization) to ensure that the tests are run at most once per commit.</p>
<p>Actually this is not quite true: the tests run successfully once, but if the test fails, it will keep running every 30 minutes and nag you about it.  It’s trivial to change the memoization to remember failures as well as successes, or you could consider the repeated nagging to be a feature not a bug …</p>
<p>That’s it!  The goaljobs website <i>will</i> be this (I’ve not uploaded it yet, but will do in the next day or two):</p>
<p><a href="http://people.redhat.com/~rjones/goaljobs" rel="nofollow">http://people.redhat.com/~rjones/goaljobs</a></p>
<p>You can also download the code from the <a href="http://git.annexia.org/?p=goaljobs.git;a=summary">git repository</a> and the goals I’ve written from <a href="http://git.annexia.org/?p=goals.git;a=summary">this repository</a>.</p>
<br/>  <a href="http://feeds.wordpress.com/1.0/gocomments/rwmj.wordpress.com/4619/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/rwmj.wordpress.com/4619/" alt="" border="0"/></a> <img src="http://stats.wordpress.com/b.gif?host=rwmj.wordpress.com&amp;blog=6840703&amp;post=4619&amp;subd=rwmj&amp;ref=&amp;feed=1" alt="" height="1" border="0" width="1"/><a onclick="switchContent('post4','post3')" class="btn" href="#79336793f839bc71e3b56a8399d9f156">Hide</a></div></span>
<a name="f250946ccea5900b2fab62858722f2d5"></a><span class="rss-header"><span class="rss-title"><a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-3/"> Goaljobs, part 3</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Richard Jones</span>, <span class="rss-date">20 Sep 2013</span></span><span class="rss-description"><div id="post5"><p>In <a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-2/">part 2</a> I introduced an example goaljobs script that can rebuild a set of packages in Fedora in the right order.</p>
<p>It’s time to take a closer look at <b>targets</b> — the promise that you make that some condition will be true by the time a goal has run.</p>
<p>In the Fedora rebuild script the goal targets looked like this:</p>
<pre>let goal rebuilt pkg =
  <b>target (koji_build_state (fedora_verrel pkg branch)
               == `Complete);</b>
  ...
</pre>
<p><code>koji_build_state</code> is a regular function.  It’s implemented using the <code>koji buildinfo</code> command line tool for querying <a href="http://koji.fedoraproject.org/koji/">the Koji build system</a>.  (The koji command line tool is annoyingly hard to automate, but as we’ve got a complete programming language available — not just bash — <a href="http://git.annexia.org/?p=goals.git;a=blob;f=fedora.ml;hb=HEAD">the implementation of <code>koji_build_state</code></a> is tedious and long, but doable).</p>
<p>Querying Koji takes a few seconds and we don’t want to do it every time we check a goal.  Goaljobs offers a feature called “The Memory” which lets you <a href="http://perl.plover.com/Memoize/doc.html#description">memoize</a> functions.  “The Memory” is just a fancy name for a key/value store which is kept in <code>~/.goaljobs-memory</code> and persists across goaljobs sessions:</p>
<a onclick="switchContent('post5','post6')" class="btn" href="#f250946ccea5900b2fab62858722f2d5">Read more...</a></div><div id="post6" style="display: none"><p>In <a href="http://rwmj.wordpress.com/2013/09/20/goaljobs-part-2/">part 2</a> I introduced an example goaljobs script that can rebuild a set of packages in Fedora in the right order.</p>
<p>It’s time to take a closer look at <b>targets</b> — the promise that you make that some condition will be true by the time a goal has run.</p>
<p>In the Fedora rebuild script the goal targets looked like this:</p>
<pre>let goal rebuilt pkg =
  <b>target (koji_build_state (fedora_verrel pkg branch)
               == `Complete);</b>
  ...
</pre>
<p><code>koji_build_state</code> is a regular function.  It’s implemented using the <code>koji buildinfo</code> command line tool for querying <a href="http://koji.fedoraproject.org/koji/">the Koji build system</a>.  (The koji command line tool is annoyingly hard to automate, but as we’ve got a complete programming language available — not just bash — <a href="http://git.annexia.org/?p=goals.git;a=blob;f=fedora.ml;hb=HEAD">the implementation of <code>koji_build_state</code></a> is tedious and long, but doable).</p>
<p>Querying Koji takes a few seconds and we don’t want to do it every time we check a goal.  Goaljobs offers a feature called “The Memory” which lets you <a href="http://perl.plover.com/Memoize/doc.html#description">memoize</a> functions.  “The Memory” is just a fancy name for a key/value store which is kept in <code>~/.goaljobs-memory</code> and persists across goaljobs sessions:</p>
<pre>let koji_build_state verrel =
  let key = sprintf "koji_build_complete_%s" verrel in
  if <b>memory_exists key</b> then
    `Complete
  else (
    <i>(* tedious code to query koji *)</i>
    if state == `Complete then
      <b>memory_set key "1"</b>;
    state
  )
</pre>
<p>With strategic use of memoization, evaluating goaljobs goals can be very fast and doesn’t change the fundamental contract of targets.</p>
<p>Finally in this part: a note on how targets are implemented.</p>
<p>A target is a boolean expression which is evaluated once near the beginning of the goal.  If it evaluates to true at the beginning of the goal then the rest of the goal can be skipped because the goal has already been achieved / doesn’t need to be repeated.</p>
<p>And since targets are just general expressions, they can be anything at all, from accessing a remote server (as here) to checking the existence of a local file (like make).  As long as something can be tested quickly, or can be tested slowly and memoized, it’s suitable to be a target.</p>
<br/>  <a href="http://feeds.wordpress.com/1.0/gocomments/rwmj.wordpress.com/4615/" rel="nofollow"><img src="http://feeds.wordpress.com/1.0/comments/rwmj.wordpress.com/4615/" alt="" border="0"/></a> <img src="http://stats.wordpress.com/b.gif?host=rwmj.wordpress.com&amp;blog=6840703&amp;post=4615&amp;subd=rwmj&amp;ref=&amp;feed=1" alt="" height="1" border="0" width="1"/><a onclick="switchContent('post6','post5')" class="btn" href="#f250946ccea5900b2fab62858722f2d5">Hide</a></div></span>
<a name="8443cf975eee954aeeee1b56d929e304"></a><span class="rss-header"><span class="rss-title"><a href="http://anil.recoil.org/2013/09/20/opam-1-1-beta.html"> OPAM 1.1 beta available, with pretty colours</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Anil Madhavapeddy</span>, <span class="rss-date">19 Sep 2013</span></span><span class="rss-description"><div id="post7"><p><a href="http://gazagnaire.org">Thomas</a> just announced the availability of the <a href="http://opam.ocamlpro.com">OPAM</a> beta release. This has been a huge amount of work for him and <a href="http://louis.gesbert.fr/">Louis</a>, so I’m excited to see this release! Aside from general stability, the main highlights for me are:</p>

<a onclick="switchContent('post7','post8')" class="btn" href="#8443cf975eee954aeeee1b56d929e304">Read more...</a></div><div id="post8" style="display: none"><p><a href="http://gazagnaire.org">Thomas</a> just announced the availability of the <a href="http://opam.ocamlpro.com">OPAM</a> beta release. This has been a huge amount of work for him and <a href="http://louis.gesbert.fr/">Louis</a>, so I’m excited to see this release! Aside from general stability, the main highlights for me are:</p>

<ul>
<li>
<p>A switch to the <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a> public-domain-like license for the repository, and LGPL2+linking exception for OPAM itself. The <a href="https://github.com/OCamlPro/opam-repository/issues/955">cutover to the new license</a> was the first non-gratuitous use of GitHub’s fancy issue lists I’ve seen, too! As part of this, we’re also beginning a transition over to hosting it at <code>opam.ocaml.org</code>, to underline our committment to maintaining it as an OCaml community resource.</p>
</li>

<li>
<p>Much-improved support for package pinning and updates. This is the feature that makes OPAM work well with <a href="http://openmirage.org">MirageOS</a>, since we often need to do development work on a low-level library (such as a <a href="https://github.com/mirage/ocaml-xen-block-driver">device driver</a> and recompile all the reverse dependencies.</p>
</li>

<li>
<p>Support for post-installation messages (e.g. to display <a href="https://github.com/OCamlPro/opam-repository/pull/1100">licensing information</a> or configuration hints) and better support for the external library management issues I explained in an earlier post about <a href="http://anil.recoil.org/2013/09/09/ocamlot-autotriaging.html">OCamlot testing</a>.</p>
</li>

<li>
<p>Better library structuring to let tools like <a href="http://github.com/OCamlPro/opam2web">Opam2web</a> work with the package metadata. For instance, my group’s <a href="http://ocaml.io">OCaml Labs</a> has a comprehensive list of <a href="http://www.cl.cam.ac.uk/projects/ocamllabs/pkg/index.html">the software packages that we work on</a> generated directly from an OPAM remote.</p>
</li>

<li>
<p>A growing set of administration tools (via the <code>opam-admin</code> binary) that run health checks and compute statistics over package repositories. For example, here’s the result of running <code>opam-admin stats</code> over the latest package repository to show various growth curves.</p>
</li>
</ul>
<table width="90%" align="center">
<tbody><tr>
<td width="30%" class="bimg"><a href="http://anil.recoil.org/images/opam11-beta-contributors.png"><img src="http://anil.recoil.org/images/opam11-beta-contributors.png" border="0" width="220"/></a><br/>Number of unique contributors to the main OPAM package repository.</td>
<td width="30%" class="bimg"><a href="http://anil.recoil.org/images/opam11-beta-packages.png"><img src="http://anil.recoil.org/images/opam11-beta-packages.png" border="0" width="220"/></a><br/>Total number of unique packages (including multiple versions of the same package).</td>
<td width="30%" class="bimg"><a href="http://anil.recoil.org/images/opam11-beta-unique-packages.png"><img src="http://anil.recoil.org/images/opam11-beta-packages.png" border="0" width="220"/></a><br/>Total packages with multiple versions coalesced so you can see new package growth.</td>
</tr>
</tbody></table>
<p>Is it a <a href="http://www.theatlantic.com/technology/archive/2013/05/the-hockey-stick-the-most-controversial-chart-in-science-explained/275753/">hockey stick</a> graph? Only time will tell! See Thomas’ <a href="https://sympa.inria.fr/sympa/arc/caml-list/2013-09/msg00300.html">full release announcement</a> and let us know how you get along with this new release…</p><a onclick="switchContent('post8','post7')" class="btn" href="#8443cf975eee954aeeee1b56d929e304">Hide</a></div></span>
<a name="57720400b0482a70ca341aeece1a046c"></a><span class="rss-header"><span class="rss-title"><a href="http://alan.petitepomme.net/cwn/2013.09.17.html"> Caml Weekly News, 17 Sep 2013</a></span>&nbsp;&mdash;&nbsp;<span class="rss-author">Caml Weekly News</span>, <span class="rss-date">17 Sep 2013</span></span><span class="rss-description">ReactiveML 1.09.01 / OCaml vs Ada and/or GUI options / OCaml release 4.01.0 / OCaml installer for Windows 4.01.0 / ocamlbuild documentation / Allocation profiling for x86-64 native code / Camomile 0.8.5 / ucorelib 0.0.2 / Other Caml News</span>
<script type="text/javascript">function switchContent(id1,id2) {
     // Get the DOM reference
     var contentId1 = document.getElementById(id1);
     var contentId2 = document.getElementById(id2);
     // Toggle
     contentId1.style.display = "none";
     contentId2.style.display = "block";
     }</script></div>

  
    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title=".././img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src=".././js/jquery-1.8.0.min.js"></script>
    
    <script src=".././js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
